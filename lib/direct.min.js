!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a){return a instanceof Array?function(){return i.iter(a)}:"function"==typeof a.iterator?d(a,a.iterator):a.iterator}function d(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=A++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var e={},f=function(){return v.Boot.__string_rec(this,"")},g=a.DirectAPI=function(){this.eventEmitter=new C};e.DirectAPI=g,g.__name__=["DirectAPI"],g.getInstance=function(){return null==g.instance&&(g.instance=new g),g.instance},g.main=function(){},g.prototype={setOptions:function(a){null!=a&&(B.host=a.host,B.endpoint=a.endpoint,B.accessToken=a.access_token,B.proxyURL=a.proxyURL,B.account=a.account,B.talkWithBot=a.talkWithBot),u._d(u.dateStr(),"current settings",B,"","",""),null==B.accessToken&&u._e(u.dateStr(),"Not enough parameters provided. I need a access token","","","","")},parseInt64:function(a){return a.length>0&&"_"==a.charAt(0)?t.Int64Helper.makeFromIdStr(a):t.Int64Helper.parse(a)},stringifyInt64:function(a,b){return null==b&&(b=!1),b?"_"+a.high+"_"+a.low:a.toString()},listen:function(){this.facade=t.AppFacade.getInstance(),this.api=v.Boot.__cast(this.facade.retrieveProxy("api"),t.proxy.AlberoServiceProxy),this.data=v.Boot.__cast(this.facade.retrieveProxy("dataStore"),t.proxy.DataStoreProxy),this.facade.startup()},emit:function(a,b,c,d){this.eventEmitter.emit(a,b,c,d)},on:function(a,b){return this.eventEmitter.on(a,b)},getDomainInvites:function(a){this.api._getDomainInvites(a)},acceptDomainInvite:function(a){this.api.acceptDomainInvite(a)},__class__:g};var h=function(a,b){b=b.split("u").join(""),this.r=new RegExp(a,b)};e.EReg=h,h.__name__=["EReg"],h.prototype={match:function(a){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(a),this.r.s=a,null!=this.r.m},matched:function(a){if(null!=this.r.m&&a>=0&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched"},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){if(null==c&&(c=-1),this.r.global){this.r.lastIndex=b,this.r.m=this.r.exec(0>c?a:i.substr(a,0,b+c));var d=null!=this.r.m;return d&&(this.r.s=a),d}var e=this.match(0>c?i.substr(a,b,null):i.substr(a,b,c));return e&&(this.r.s=a,this.r.m.index+=b),e},split:function(a){var b="#__delim__#";return a.replace(this.r,b).split(b)},replace:function(a,b){return a.replace(this.r,b)},map:function(a,b){var c=0,d=new o;do{if(c>=a.length)break;if(!this.matchSub(a,c)){d.add(i.substr(a,c,null));break}var e=this.matchedPos();d.add(i.substr(a,c,e.pos-c)),d.add(b(this)),0==e.len?(d.add(i.substr(a,e.pos,1)),c=e.pos+1):c=e.pos+e.len}while(this.r.global);return!this.r.global&&c>0&&c<a.length&&d.add(i.substr(a,c,null)),d.b},__class__:h};var i=function(){};e.HxOverrides=i,i.__name__=["HxOverrides"],i.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)},i.strDate=function(a){var b=a.length;switch(b){case 8:var c=a.split(":"),d=new Date;return d.setTime(0),d.setUTCHours(c[0]),d.setUTCMinutes(c[1]),d.setUTCSeconds(c[2]),d;case 10:var e=a.split("-");return new Date(e[0],e[1]-1,e[2],0,0,0);case 19:var f=a.split(" "),g=f[0].split("-"),h=f[1].split(":");return new Date(g[0],g[1]-1,g[2],h[0],h[1],h[2]);default:throw"Invalid date format : "+a}},i.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c},i.substr=function(a,b,c){return null!=b&&0!=b&&null!=c&&0>c?"":(null==c&&(c=a.length),0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b),a.substr(b,c))},i.indexOf=function(a,b,c){var d=a.length;for(0>c&&(c+=d,0>c&&(c=0));d>c;){if(a[c]===b)return c;c++}return-1},i.remove=function(a,b){var c=i.indexOf(a,b,0);return-1==c?!1:(a.splice(c,1),!0)},i.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var j=function(){};e.Lambda=j,j.__name__=["Lambda"],j.array=function(a){for(var b=new Array,d=c(a)();d.hasNext();){var e=d.next();b.push(e)}return b},j.exists=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();if(b(e))return!0}return!1},j.iter=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();b(e)}},j.filter=function(a,b){for(var d=new k,e=c(a)();e.hasNext();){var f=e.next();b(f)&&d.add(f)}return d},j.fold=function(a,b,d){for(var e=c(a)();e.hasNext();){var f=e.next();d=b(f,d)}return d},j.count=function(a,b){var d=0;if(null==b)for(var e=c(a)();e.hasNext();){e.next();d++}else for(var f=c(a)();f.hasNext();){var g=f.next();b(g)&&d++}return d},j.find=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();if(b(e))return e}return null};var k=function(){this.length=0};e.List=k,k.__name__=["List"],k.prototype={add:function(a){var b=[a];null==this.h?this.h=b:this.q[1]=b,this.q=b,this.length++},isEmpty:function(){return null==this.h},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c[0]==a)return null==b?this.h=c[1]:b[1]=c[1],this.q==c&&(this.q=b),this.length--,!0;b=c,c=c[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];return this.h=this.h[1],a}}},map:function(a){for(var b=new k,c=this.h;null!=c;){var d=c[0];c=c[1],b.add(a(d))}return b},__class__:k};var l=function(){};e.IMap=l,l.__name__=["IMap"],l.prototype={__class__:l},Math.__name__=["Math"];var m=function(){};e.Reflect=m,m.__name__=["Reflect"],m.field=function(a,b){try{return a[b]}catch(c){return null}},m.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty;for(var d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b},m.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)},m.compare=function(a,b){return a==b?0:a>b?1:-1},m.isEnumValue=function(a){return null!=a&&null!=a.__enum__},m.deleteField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)?(delete a[b],!0):!1};var n=function(){};e.Std=n,n.__name__=["Std"],n.string=function(a){return v.Boot.__string_rec(a,"")},n["int"]=function(a){return 0|a},n.parseInt=function(a){var b=parseInt(a,10);return 0!=b||120!=i.cca(a,1)&&88!=i.cca(a,1)||(b=parseInt(a)),isNaN(b)?null:b},n.parseFloat=function(a){return parseFloat(a)};var o=function(){this.b=""};e.StringBuf=o,o.__name__=["StringBuf"],o.prototype={add:function(a){this.b+=n.string(a)},toString:function(){return this.b},__class__:o};var p=function(){};e.StringTools=p,p.__name__=["StringTools"],p.htmlEscape=function(a,b){return a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),b?a.split('"').join("&quot;").split("'").join("&#039;"):a},p.startsWith=function(a,b){return a.length>=b.length&&i.substr(a,0,b.length)==b},p.replace=function(a,b,c){return a.split(b).join(c)},p.hex=function(a,b){var c="",d="0123456789ABCDEF";do c=d.charAt(15&a)+c,a>>>=4;while(a>0);if(null!=b)for(;c.length<b;)c="0"+c;return c},p.fastCodeAt=function(a,b){return a.charCodeAt(b)};var q=e.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};q.TNull=["TNull",0],q.TNull.toString=f,q.TNull.__enum__=q,q.TInt=["TInt",1],q.TInt.toString=f,q.TInt.__enum__=q,q.TFloat=["TFloat",2],q.TFloat.toString=f,q.TFloat.__enum__=q,q.TBool=["TBool",3],q.TBool.toString=f,q.TBool.__enum__=q,q.TObject=["TObject",4],q.TObject.toString=f,q.TObject.__enum__=q,q.TFunction=["TFunction",5],q.TFunction.toString=f,q.TFunction.__enum__=q,q.TClass=function(a){var b=["TClass",6,a];return b.__enum__=q,b.toString=f,b},q.TEnum=function(a){var b=["TEnum",7,a];return b.__enum__=q,b.toString=f,b},q.TUnknown=["TUnknown",8],q.TUnknown.toString=f,q.TUnknown.__enum__=q;var r=function(){};e.Type=r,r.__name__=["Type"],r.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__},r.getClassName=function(a){var b=a.__name__;return b.join(".")},r.getEnumName=function(a){var b=a.__ename__;return b.join(".")},r.resolveClass=function(a){var b=e[a];return null!=b&&b.__name__?b:null},r.resolveEnum=function(a){var b=e[a];return null!=b&&b.__ename__?b:null},r.createInstance=function(a,b){var c=b.length;switch(c){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments"}return null},r.createEmptyInstance=function(a){function b(){}return b.prototype=a.prototype,new b},r.createEnum=function(a,b,c){var d=m.field(a,b);if(null==d)throw"No such constructor "+b;if(m.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d},r.getEnumConstructs=function(a){var b=a.__constructs__;return b.slice()},r["typeof"]=function(a){var b=typeof a;switch(b){case"boolean":return q.TBool;case"string":return q.TClass(String);case"number":return Math.ceil(a)==a%2147483648?q.TInt:q.TFloat;case"object":if(null==a)return q.TNull;var c=a.__enum__;if(null!=c)return q.TEnum(c);var d;return d=a instanceof Array&&null==a.__enum__?Array:a.__class__,null!=d?q.TClass(d):q.TObject;case"function":return a.__name__||a.__ename__?q.TObject:q.TFunction;case"undefined":return q.TNull;default:return q.TUnknown}},r.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;d>c;){var e=c++;if(!r.enumEq(a[e],b[e]))return!1}var f=a.__enum__;if(f!=b.__enum__||null==f)return!1}catch(g){return!1}return!0};var s={};s.interfaces={},s.interfaces.IFacade=function(){},e["puremvc.interfaces.IFacade"]=s.interfaces.IFacade,s.interfaces.IFacade.__name__=["puremvc","interfaces","IFacade"],s.interfaces.IFacade.prototype={__class__:s.interfaces.IFacade},s.patterns={},s.patterns.facade={},s.patterns.facade.Facade=function(){s.patterns.facade.Facade.instance=this,this.initializeFacade()},e["puremvc.patterns.facade.Facade"]=s.patterns.facade.Facade,s.patterns.facade.Facade.__name__=["puremvc","patterns","facade","Facade"],s.patterns.facade.Facade.__interfaces__=[s.interfaces.IFacade],s.patterns.facade.Facade.getInstance=function(){return null==s.patterns.facade.Facade.instance&&(s.patterns.facade.Facade.instance=new s.patterns.facade.Facade),s.patterns.facade.Facade.instance},s.patterns.facade.Facade.prototype={initializeFacade:function(){this.initializeModel(),this.initializeController(),this.initializeView()},initializeController:function(){null==this.controller&&(this.controller=s.core.Controller.getInstance())},initializeModel:function(){null==this.model&&(this.model=s.core.Model.getInstance())},initializeView:function(){null==this.view&&(this.view=s.core.View.getInstance())},registerCommand:function(a,b){this.controller.registerCommand(a,b)},removeCommand:function(a){this.controller.removeCommand(a)},hasCommand:function(a){return this.controller.hasCommand(a)},registerProxy:function(a){this.model.registerProxy(a)},retrieveProxy:function(a){return this.model.retrieveProxy(a)},removeProxy:function(a){var b=null;return null!=this.model&&(b=this.model.removeProxy(a)),b},hasProxy:function(a){return this.model.hasProxy(a)},registerMediator:function(a){null!=this.view&&this.view.registerMediator(a)},retrieveMediator:function(a){return this.view.retrieveMediator(a)},removeMediator:function(a){var b=null;return null!=this.view&&(b=this.view.removeMediator(a)),b},hasMediator:function(a){return this.view.hasMediator(a)},sendNotification:function(a,b,c){this.notifyObservers(new s.patterns.observer.Notification(a,b,c))},notifyObservers:function(a){null!=this.view&&this.view.notifyObservers(a)},__class__:s.patterns.facade.Facade};var t={};t.AppFacade=function(){s.patterns.facade.Facade.call(this)},e["albero.AppFacade"]=t.AppFacade,t.AppFacade.__name__=["albero","AppFacade"],t.AppFacade.getInstance=function(){return null==s.patterns.facade.Facade.instance&&(s.patterns.facade.Facade.instance=new t.AppFacade),v.Boot.__cast(s.patterns.facade.Facade.instance,t.AppFacade)},t.AppFacade.__super__=s.patterns.facade.Facade,t.AppFacade.prototype=b(s.patterns.facade.Facade.prototype,{initializeModel:function(){s.patterns.facade.Facade.prototype.initializeModel.call(this);for(var a=[new t.proxy.MsgPackRpcProxy,new t.proxy.AppStateProxy,new t.proxy.DataStoreProxy,new t.proxy.DepartmentStoreProxy,new t.proxy.SettingsProxy,new t.proxy.AlberoBroadcastProxy,new t.proxy.AlberoServiceProxy,new t.proxy.FileServiceProxy,new t.proxy.RoutingProxy,new t.proxy.FileInfoStoreProxy,new t.proxy.SearchServiceProxy,new t.proxy.SolutionsStoreProxy,new t.proxy.KeywordWatcherProxy,new t.proxy.FeaturesProxy],b=0;b<a.length;){var c=a[b];++b,this.registerProxy(c)}for(var d=0;d<a.length;){var e=a[d];++d,this.autoBind(e)}},initializeView:function(){s.patterns.facade.Facade.prototype.initializeView.call(this);for(var a=[new w.mediator.CommandLineMediator],b=0;b<a.length;){var c=a[b];++b,this.registerMediator(c)}},initializeController:function(){s.patterns.facade.Facade.prototype.initializeController.call(this);for(var a=[t.command.DomainCommand,t.command.SignInCommand,t.command.SignOutCommand,t.command.ReloadDataCommand,t.command.SendCommand,t.command.TalkCommand,t.command.ManageFriendsCommand,t.command.ReadCommand,t.command.LoadStampSetCommand,t.command.FileCommand,t.command.SelectTalkCommand,t.command.UpdateUserCommand,t.command.UpdateProfileCommand,t.command.UrlCommand,t.command.SearchCommand,t.command.AccountControlRequestCommand,t.command.MessageCommand,t.command.DeviceCommand],b=0;b<a.length;){var c=a[b];++b;var d=p.replace(r.getClassName(c).split(".").pop(),"Command","");this.registerCommand(d,c)}},registerMediator:function(a){this.autoBind(a),s.patterns.facade.Facade.prototype.registerMediator.call(this,a)},autoBind:function(a){for(var b=x.rtti.Meta.getFields(r.getClass(a)),c=0,d=m.fields(b);c<d.length;){var e=d[c];++c;var f=m.field(b,e);if(Object.prototype.hasOwnProperty.call(f,"inject")){var g=this.retrieveProxy(e);null==g||(a[e]=g)}}},startup:function(){v.Boot.__cast(this.retrieveProxy("appState"),t.proxy.AppStateProxy).start()},__class__:t.AppFacade}),t.AppState=e["albero.AppState"]={__ename__:["albero","AppState"],__constructs__:["Active","Inactive"]},t.AppState.Active=["Active",0],t.AppState.Active.toString=f,t.AppState.Active.__enum__=t.AppState,t.AppState.Inactive=["Inactive",1],t.AppState.Inactive.toString=f,t.AppState.Inactive.__enum__=t.AppState,t.ConnectionStatus=e["albero.ConnectionStatus"]={__ename__:["albero","ConnectionStatus"],__constructs__:["Ok","Error","ConcurrentAccessError","ForcibliyClosedError"]},t.ConnectionStatus.Ok=["Ok",0],t.ConnectionStatus.Ok.toString=f,t.ConnectionStatus.Ok.__enum__=t.ConnectionStatus,t.ConnectionStatus.Error=["Error",1],t.ConnectionStatus.Error.toString=f,t.ConnectionStatus.Error.__enum__=t.ConnectionStatus,t.ConnectionStatus.ConcurrentAccessError=["ConcurrentAccessError",2],t.ConnectionStatus.ConcurrentAccessError.toString=f,t.ConnectionStatus.ConcurrentAccessError.__enum__=t.ConnectionStatus,t.ConnectionStatus.ForcibliyClosedError=["ForcibliyClosedError",3],t.ConnectionStatus.ForcibliyClosedError.toString=f,t.ConnectionStatus.ForcibliyClosedError.__enum__=t.ConnectionStatus,t.DateTimeHelper=function(){},e["albero.DateTimeHelper"]=t.DateTimeHelper,t.DateTimeHelper.__name__=["albero","DateTimeHelper"],t.DateTimeHelper.isSameDate=function(a,b){return a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()},t.DateTimeHelper.dateString=function(a,b){var c=new Date,d="";return a.getFullYear()!=c.getFullYear()&&(d+=a.getFullYear()+"/"),d+=a.getMonth()+1+"/"+a.getDate(),b&&(d+=" ("+t.DateTimeHelper.dayOfWeekString(a)+")"),d},t.DateTimeHelper.dayOfWeekString=function(a){var b=a.getDay();switch(b){case 0:return"日";case 1:return"月";case 2:return"火";case 3:return"水";case 4:return"木";case 5:return"金";default:return"土"}},t.DateTimeHelper.getDateStringForFile=function(){var a=new Date,b=a.getFullYear(),c=t.DateTimeHelper.toDoubleDigits(a.getMonth()+1),d=t.DateTimeHelper.toDoubleDigits(a.getDate()),e=t.DateTimeHelper.toDoubleDigits(a.getHours()),f=t.DateTimeHelper.toDoubleDigits(a.getMinutes()),g=t.DateTimeHelper.toDoubleDigits(a.getSeconds());return b+c+d+"_"+e+f+g},t.DateTimeHelper.getTimeStringForVoice=function(a){var b=t.DateTimeHelper.toDoubleDigits(a/60|0),c=t.DateTimeHelper.toDoubleDigits((0|a)%60);return b+":"+c},t.DateTimeHelper.toDoubleDigits=function(a){var b;return b=null==a?"null":""+a,1==b.length&&(b="0"+b),b},t.DateTimeHelper.nowAsInt64=function(){return t.DateTimeHelper.dateAsInt64((new Date).getTime())},t.DateTimeHelper.oneDayAfterAsInt64=function(){return t.DateTimeHelper.dateAsInt64((new Date).getTime()+864e5)},t.DateTimeHelper.afterAsInt64=function(a){return t.DateTimeHelper.dateAsInt64((new Date).getTime()+a)},t.DateTimeHelper.dateAsInt64=function(a){var b=4294967296;return new x.Int64(a/b|0,a%b|0)},t.DateTimeHelper.abbreviateDatetimeString=function(a){if(null==a)return"";var b,c=new Date,d=t.Int64Helper.toFloat(a),e=new Date;e.setTime(d),b=e;var f="";return f=c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()?b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes():t.DateTimeHelper.dateString(b,!1)},t.DateTimeHelper.datetimeStringIn11Chars=function(a){if(null==a)return"";var b,c=new Date,d=t.Int64Helper.toFloat(a),e=new Date;e.setTime(d),b=e;var f=t.DateTimeHelper.dateString(b,!1);return c.getFullYear()==b.getFullYear()&&(f+=" "+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()),f},t.DateTimeHelper.timeString=function(a){if(null==a)return"";var b,c=t.Int64Helper.toFloat(a),d=new Date;return d.setTime(c),b=d,b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},t.DateTimeHelper.datetimeString=function(a){if(null==a)return"";var b,c=n.parseFloat(n.string(a)),d=new Date;return d.setTime(c),b=d,b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" "+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},t.FileHelper=function(){},e["albero.FileHelper"]=t.FileHelper,t.FileHelper.__name__=["albero","FileHelper"],t.FileHelper.createByteSizeStringWithUnit=function(a){for(var b,c=["","K","M","G","T"];(b=a/1024|0)>0;)a=b,c.shift();return a+" "+c.shift()+"B"},t.History=function(){},e["albero.History"]=t.History,t.History.__name__=["albero","History"],t.History.replaceState=function(a,b,c){return null!=window.history?(window.history.replaceState(a,b,c),!0):!1},t.Int64Helper=function(){},e["albero.Int64Helper"]=t.Int64Helper,t.Int64Helper.__name__=["albero","Int64Helper"],t.Int64Helper.parse=function(a){var b=new h("^\\d+$","");if(!b.match(a))return null;for(var c=new x.Int64(0,0),d=new x.Int64(0,10),e=0,f=a.length;f>e;){var g=e++;c=x.Int64.add(x.Int64.mul(c,d),x.Int64.make(0,n.parseInt(a.charAt(g))))}return c},t.Int64Helper.getHigh=function(a){return a.high},t.Int64Helper.getLow=function(a){return a.low},t.Int64Helper.idStr=function(a){return"_"+a.high+"_"+a.low},t.Int64Helper.makeFromIdStr=function(a){var b=new h("^_(-?\\d*)_(-?\\d*)$","");return b.match(a)?x.Int64.make(n.parseInt(b.matched(1)),n.parseInt(b.matched(2))):null},t.Int64Helper.eq=function(a,b){return null!=a&&null!=b&&a.high==b.high&&a.low==b.low},t.Int64Helper.toFloat=function(a){var b=4294967296,c=a.high,d=a.low;return c*b+(d>=0?d:d+b)},t.Int64Helper.idStrToInt64=function(a){var b=a.split("_");return b.length>2?x.Int64.make(n.parseInt(b[1]),n.parseInt(b[2])):null},t.Int64Helper.decrement=function(a){return null==a?null:x.Int64.sub(a,new x.Int64(0,1))},t.Int64Helper.increment=function(a){return null==a?null:x.Int64.add(a,new x.Int64(0,1))},t.Int64Helper.contains=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return!0}return!1},t.Int64Helper.remove=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return i.remove(a,d),!0}return!1},t.Int64Helper.fromIntOrInt64=function(a){return null==a||v.Boot.__instanceof(a,x.Int64)?a:x.Int64.ofInt(v.Boot.__cast(a,D))},t.Int64Helper.eqArray=function(a,b){if(a!=b){if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0,d=a.length;d>c;){var e=c++;if(!t.Int64Helper.eq(a[e],b[e]))return!1}}return!0},t.LambdaHelper=function(){},e["albero.LambdaHelper"]=t.LambdaHelper,t.LambdaHelper.__name__=["albero","LambdaHelper"],t.LambdaHelper.flatten=function(a){return j.filter(a,function(a){return t.OptionHelper.isDefined(a)}).map(function(a){return t.OptionHelper.get(a)})},t.LambdaHelper.headOption=function(a){for(var b=c(a)();b.hasNext();){var d=b.next();return x.ds.Option.Some(d)}return x.ds.Option.None},t.LambdaHelper.lastOption=function(a){for(var b=x.ds.Option.None,d=c(a)();d.hasNext();){var e=d.next();b=x.ds.Option.Some(e)}return b},t.LambdaHelper.findOption=function(a,b){return t.OptionHelper.option(j.find(a,b))},t.LambdaHelper.indexWhere=function(a,b){for(var d=0,e=c(a)();e.hasNext();){var f=e.next();if(b(f))return d;d+=1}return-1},t.LambdaHelper.forall=function(a,b){return!j.exists(a,function(a){return!b(a)})},t.ArrayHelper=function(){},e["albero.ArrayHelper"]=t.ArrayHelper,t.ArrayHelper.__name__=["albero","ArrayHelper"],t.ArrayHelper.lastOption=function(a){return 0==a.length?x.ds.Option.None:x.ds.Option.Some(a[a.length-1])},t.ArrayHelper.sortAndReturn=function(a,b){return a.sort(b),a},t.OptionHelper=function(){},e["albero.OptionHelper"]=t.OptionHelper,t.OptionHelper.__name__=["albero","OptionHelper"],t.OptionHelper.map=function(a,b){switch(a[1]){case 1:return x.ds.Option.None;case 0:var c=a[2];return x.ds.Option.Some(b(c))}},t.OptionHelper.flatMap=function(a,b){switch(a[1]){case 1:return x.ds.Option.None;case 0:var c=a[2];return b(c)}},t.OptionHelper.foreach=function(a,b){switch(a[1]){case 1:break;case 0:var c=a[2];b(c)}},t.OptionHelper.filter=function(a,b){switch(a[1]){case 1:return x.ds.Option.None;case 0:var c=a[2];return b(c)?a:x.ds.Option.None}},t.OptionHelper.exists=function(a,b){return t.OptionHelper.isDefined(t.OptionHelper.filter(a,b))},t.OptionHelper.isDefined=function(a){switch(a[1]){case 1:return!1;case 0:return!0}},t.OptionHelper.isEmpty=function(a){switch(a[1]){case 1:return!0;case 0:return!1}},t.OptionHelper.get=function(a){switch(a[1]){case 0:var b=a[2];return b;case 1:throw"None.get called"}},t.OptionHelper.orNull=function(a){switch(a[1]){case 1:return null;case 0:var b=a[2];return b}},t.OptionHelper.flatten=function(a){return t.OptionHelper.flatMap(a,function(a){return a})},t.OptionHelper.eq=function(a,b){return r.enumEq(a,b)},t.OptionHelper.option=function(a){return null!=a?x.ds.Option.Some(a):x.ds.Option.None},t.StorageHelper=function(){},e["albero.StorageHelper"]=t.StorageHelper,t.StorageHelper.__name__=["albero","StorageHelper"],t.StorageHelper.getItemAsJson=function(a){var b=t.StorageHelper.getItem(a);if(null==b)return null;try{return JSON.parse(b)}catch(c){return null}},t.StorageHelper.getItemAsInt=function(a){var b=t.StorageHelper.getItem(a);return null==b?null:n.parseInt(b)},t.StorageHelper.getItem=function(a){var b=t.js.LocalStorage.getLocalStorage();if(null==b)u._e(u.dateStr(),"storage not found","","","","");else try{return b.getItem(a)}catch(c){u._e(u.dateStr(),"storage error occered.",c,"","","")}return null},t.StorageHelper.removeItem=function(a){var b=t.js.LocalStorage.getLocalStorage();if(null==b)u._e(u.dateStr(),"storage not found","","","","");else try{return b.removeItem(a),!0}catch(c){u._e(u.dateStr(),"storage error occered.",c,"","","")}return!1},t.StorageHelper.setItem=function(a,b){var c=t.js.LocalStorage.getLocalStorage();if(null==c)u._e(u.dateStr(),"storage not found","","","","");else try{return c.setItem(a,b),!0}catch(d){u._e(u.dateStr(),"storage error occered.",d,"","","")}return!1},t.StorageHelper.getItemWithUnserialize=function(a){var b=t.StorageHelper.getItem(a);if(null!=b)try{return x.Unserializer.run(b)}catch(c){u._w(u.dateStr(),c,"","","","")}return null},t.StorageHelper.setItemWithSerialize=function(a,b){t.StorageHelper.setItem(a,x.Serializer.run(b))},t.StringHelper=function(){},e["albero.StringHelper"]=t.StringHelper,t.StringHelper.__name__=["albero","StringHelper"],t.StringHelper.trim=function(a){return a.trim()},t.StringHelper.compare=function(a,b){return a>b?1:b>a?-1:0},t.StringHelper.isEmtpy=function(a){return null==a||0==a.length},t.StringHelper.isNotEmtpy=function(a){return!t.StringHelper.isEmtpy(a)},t.StringHelper.randomString=function(){var a=new o,b=8;for(a.add(p.hex(n["int"]((new Date).getTime()),8));b++<36;)a.add(0!=(51*b&52)?p.hex(0!=(15^b)?8^n["int"](Math.random()*(0!=(20^b)?16:4)):4):"-");return a.b.toLowerCase()},t.Urls=e["albero.Urls"]={__ename__:["albero","Urls"],__constructs__:["auto","domains","domain","members","talks","actions","settings","announcements","error","loading","environment"]},t.Urls.auto=["auto",0],t.Urls.auto.toString=f,t.Urls.auto.__enum__=t.Urls,t.Urls.domains=["domains",1],t.Urls.domains.toString=f,t.Urls.domains.__enum__=t.Urls,t.Urls.domain=function(a){var b=["domain",2,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.members=function(a){var b=["members",3,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.talks=function(a,b){var c=["talks",4,a,b];return c.__enum__=t.Urls,c.toString=f,c},t.Urls.actions=function(a){var b=["actions",5,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.settings=function(a){var b=["settings",6,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.announcements=["announcements",7],t.Urls.announcements.toString=f,t.Urls.announcements.__enum__=t.Urls,t.Urls.error=["error",8],t.Urls.error.toString=f,t.Urls.error.__enum__=t.Urls,t.Urls.loading=["loading",9],t.Urls.loading.toString=f,t.Urls.loading.__enum__=t.Urls,t.Urls.environment=function(a){var b=["environment",10,a];return b.__enum__=t.Urls,b.toString=f,b},t.TalkUrlParam=e["albero.TalkUrlParam"]={__ename__:["albero","TalkUrlParam"],__constructs__:["multi","single","auto"]},t.TalkUrlParam.multi=["multi",0],t.TalkUrlParam.multi.toString=f,t.TalkUrlParam.multi.__enum__=t.TalkUrlParam,t.TalkUrlParam.single=["single",1],t.TalkUrlParam.single.toString=f,t.TalkUrlParam.single.__enum__=t.TalkUrlParam,t.TalkUrlParam.auto=["auto",2],t.TalkUrlParam.auto.toString=f,t.TalkUrlParam.auto.__enum__=t.TalkUrlParam,s.interfaces.INotifier=function(){},e["puremvc.interfaces.INotifier"]=s.interfaces.INotifier,s.interfaces.INotifier.__name__=["puremvc","interfaces","INotifier"],s.interfaces.INotifier.prototype={__class__:s.interfaces.INotifier},s.patterns.observer={},s.patterns.observer.Notifier=function(){this.facade=s.patterns.facade.Facade.getInstance()},e["puremvc.patterns.observer.Notifier"]=s.patterns.observer.Notifier,s.patterns.observer.Notifier.__name__=["puremvc","patterns","observer","Notifier"],s.patterns.observer.Notifier.__interfaces__=[s.interfaces.INotifier],s.patterns.observer.Notifier.prototype={sendNotification:function(a,b,c){this.facade.sendNotification(a,b,c)},__class__:s.patterns.observer.Notifier},s.interfaces.ICommand=function(){},e["puremvc.interfaces.ICommand"]=s.interfaces.ICommand,s.interfaces.ICommand.__name__=["puremvc","interfaces","ICommand"],s.interfaces.ICommand.prototype={__class__:s.interfaces.ICommand},s.patterns.command={},s.patterns.command.SimpleCommand=function(){s.patterns.observer.Notifier.call(this)},e["puremvc.patterns.command.SimpleCommand"]=s.patterns.command.SimpleCommand,s.patterns.command.SimpleCommand.__name__=["puremvc","patterns","command","SimpleCommand"],s.patterns.command.SimpleCommand.__interfaces__=[s.interfaces.ICommand],s.patterns.command.SimpleCommand.__super__=s.patterns.observer.Notifier,s.patterns.command.SimpleCommand.prototype=b(s.patterns.observer.Notifier.prototype,{execute:function(a){},__class__:s.patterns.command.SimpleCommand}),t.command={},t.command.AutoBindCommand=function(){s.patterns.command.SimpleCommand.call(this),t.AppFacade.getInstance().autoBind(this)},e["albero.command.AutoBindCommand"]=t.command.AutoBindCommand,t.command.AutoBindCommand.__name__=["albero","command","AutoBindCommand"],t.command.AutoBindCommand.__super__=s.patterns.command.SimpleCommand,t.command.AutoBindCommand.prototype=b(s.patterns.command.SimpleCommand.prototype,{__class__:t.command.AutoBindCommand}),t.command.AccountControlRequestCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.AccountControlRequestCommand"]=t.command.AccountControlRequestCommand,t.command.AccountControlRequestCommand.__name__=["albero","command","AccountControlRequestCommand"],t.command.AccountControlRequestCommand.__super__=t.command.AutoBindCommand,t.command.AccountControlRequestCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.acceptAccountControlRequest(c);break;case 1:var d=b[2];this.api.rejectAccountControlRequest(d)}},__class__:t.command.AccountControlRequestCommand}),t.command.AccountControlRequestAction=e["albero.command.AccountControlRequestAction"]={__ename__:["albero","command","AccountControlRequestAction"],__constructs__:["ACCEPT_REQUEST","REJECT_REQUEST"]},t.command.AccountControlRequestAction.ACCEPT_REQUEST=function(a){var b=["ACCEPT_REQUEST",0,a];return b.__enum__=t.command.AccountControlRequestAction,b.toString=f,b},t.command.AccountControlRequestAction.REJECT_REQUEST=function(a){var b=["REJECT_REQUEST",1,a];return b.__enum__=t.command.AccountControlRequestAction,b.toString=f,b},t.command.DeviceCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.DeviceCommand"]=t.command.DeviceCommand,t.command.DeviceCommand.__name__=["albero","command","DeviceCommand"],t.command.DeviceCommand.__super__=t.command.AutoBindCommand,t.command.DeviceCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){a.getBody()},__class__:t.command.DeviceCommand}),t.command.DeviceAction=e["albero.command.DeviceAction"]={__ename__:["albero","command","DeviceAction"],__constructs__:["AUTHORIZE"]},t.command.DeviceAction.AUTHORIZE=["AUTHORIZE",0],t.command.DeviceAction.AUTHORIZE.toString=f,t.command.DeviceAction.AUTHORIZE.__enum__=t.command.DeviceAction,t.command.DomainCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.DomainCommand"]=t.command.DomainCommand,t.command.DomainCommand.__name__=["albero","command","DomainCommand"],t.command.DomainCommand.__super__=t.command.AutoBindCommand,t.command.DomainCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.acceptDomainInvite(c);break;case 1:var d=b[2];this.api.deleteDomainInvite(d);break;case 2:var e=b[2];this.api.leaveDomain(e)}},__class__:t.command.DomainCommand}),t.command.DomainAction=e["albero.command.DomainAction"]={__ename__:["albero","command","DomainAction"],__constructs__:["ACCEPT_INVITE","DELETE_INVITE","LEAVE"]},t.command.DomainAction.ACCEPT_INVITE=function(a){var b=["ACCEPT_INVITE",0,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.DomainAction.DELETE_INVITE=function(a){var b=["DELETE_INVITE",1,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.DomainAction.LEAVE=function(a){var b=["LEAVE",2,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.FileCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.FileCommand"]=t.command.FileCommand,t.command.FileCommand.__name__=["albero","command","FileCommand"],
t.command.FileCommand.__super__=t.command.AutoBindCommand,t.command.FileCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.upload(d.domainId,d.id,c);break;case 1:var e=b[4],f=b[3],g=b[2];this.api.uploadMulti(g.domainId,g.id,f,e);break;case 2:var h=b[2];this.api.deleteAttachment(h.id,h.messageId)}},__class__:t.command.FileCommand}),t.command.FileAction=e["albero.command.FileAction"]={__ename__:["albero","command","FileAction"],__constructs__:["UPLOAD","UPLOAD_MULTI","DELETE"]},t.command.FileAction.UPLOAD=function(a,b){var c=["UPLOAD",0,a,b];return c.__enum__=t.command.FileAction,c.toString=f,c},t.command.FileAction.UPLOAD_MULTI=function(a,b,c){var d=["UPLOAD_MULTI",1,a,b,c];return d.__enum__=t.command.FileAction,d.toString=f,d},t.command.FileAction.DELETE=function(a){var b=["DELETE",2,a];return b.__enum__=t.command.FileAction,b.toString=f,b},t.command.LoadStampSetCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.LoadStampSetCommand"]=t.command.LoadStampSetCommand,t.command.LoadStampSetCommand.__name__=["albero","command","LoadStampSetCommand"],t.command.LoadStampSetCommand.__super__=t.command.AutoBindCommand,t.command.LoadStampSetCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){new Array},__class__:t.command.LoadStampSetCommand}),t.command.ManageFriendsCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ManageFriendsCommand"]=t.command.ManageFriendsCommand,t.command.ManageFriendsCommand.__name__=["albero","command","ManageFriendsCommand"],t.command.ManageFriendsCommand.__super__=t.command.AutoBindCommand,t.command.ManageFriendsCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody(),c=b.action;switch(c[1]){case 0:for(var d=0,e=b.users;d<e.length;){var f=e[d];++d,this.api.addFriend(f)}break;case 1:for(var g=0,h=b.users;g<h.length;){var i=h[g];++g,this.api.deleteFriend(i)}}},__class__:t.command.ManageFriendsCommand}),t.command.ManageFriendsAction=e["albero.command.ManageFriendsAction"]={__ename__:["albero","command","ManageFriendsAction"],__constructs__:["ADD","DELETE"]},t.command.ManageFriendsAction.ADD=["ADD",0],t.command.ManageFriendsAction.ADD.toString=f,t.command.ManageFriendsAction.ADD.__enum__=t.command.ManageFriendsAction,t.command.ManageFriendsAction.DELETE=["DELETE",1],t.command.ManageFriendsAction.DELETE.toString=f,t.command.ManageFriendsAction.DELETE.__enum__=t.command.ManageFriendsAction,t.command.MessageCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.MessageCommand"]=t.command.MessageCommand,t.command.MessageCommand.__name__=["albero","command","MessageCommand"],t.command.MessageCommand.__super__=t.command.AutoBindCommand,t.command.MessageCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.deleteMessage(d,c);break;case 1:var e=b[3],f=b[2];this.api.forwardMessages(f,e,0)}},__class__:t.command.MessageCommand}),t.command.MessageAction=e["albero.command.MessageAction"]={__ename__:["albero","command","MessageAction"],__constructs__:["DELETE","FORWARD"]},t.command.MessageAction.DELETE=function(a,b){var c=["DELETE",0,a,b];return c.__enum__=t.command.MessageAction,c.toString=f,c},t.command.MessageAction.FORWARD=function(a,b){var c=["FORWARD",1,a,b];return c.__enum__=t.command.MessageAction,c.toString=f,c},t.command.ReadCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ReadCommand"]=t.command.ReadCommand,t.command.ReadCommand.__name__=["albero","command","ReadCommand"],t.command.ReadCommand.__super__=t.command.AutoBindCommand,t.command.ReadCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.updateReadStatuses(d,c);break;case 1:var e=b[3],f=b[2];this.api.updateAnnouncementReadStatus(f,e);break;case 2:var g=b[3],h=b[2];this.api.getReadStatus(h,g);break;case 3:var i=b[3],j=b[2];this.keywordWatcher.readKeywordDetection(j,null,i);break;case 4:var k=b[3],l=b[2];this.keywordWatcher.readKeywordDetection(null,l,k)}},__class__:t.command.ReadCommand}),t.command.ReadType=e["albero.command.ReadType"]={__ename__:["albero","command","ReadType"],__constructs__:["TALK","ANNOUNCEMENT","READ_STATUS","KEYWORD_IN_ANNOUNCEMENTS","KEYWORD_IN_MESSAGES"]},t.command.ReadType.TALK=function(a,b){var c=["TALK",0,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReadType.ANNOUNCEMENT=function(a,b){var c=["ANNOUNCEMENT",1,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReadType.READ_STATUS=function(a,b){var c=["READ_STATUS",2,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReadType.KEYWORD_IN_ANNOUNCEMENTS=function(a,b){var c=["KEYWORD_IN_ANNOUNCEMENTS",3,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReadType.KEYWORD_IN_MESSAGES=function(a,b){var c=["KEYWORD_IN_MESSAGES",4,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReloadDataCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ReloadDataCommand"]=t.command.ReloadDataCommand,t.command.ReloadDataCommand.__name__=["albero","command","ReloadDataCommand"],t.command.ReloadDataCommand.__super__=t.command.AutoBindCommand,t.command.ReloadDataCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:this.api.getDomains();break;case 1:this.api.getFriends(),this.api.getAcquaintances();break;case 2:this.api.getTalks();break;case 3:var c=b[5],d=b[4],e=b[3],f=b[2];this.api.getMessages(f,e,d,c);break;case 4:var g=b[2];this.api.getAllUsers(g);break;case 5:var h=b[3],i=b[2];this.api.getUsers(i,h);break;case 6:var j=b[3],k=b[2];this.api.getProfile(k,j);break;case 7:var l=b[3],m=b[2];this.api.searchDomainUsers(m,l);break;case 8:var n=b[4],o=b[3],p=b[2];this.api.getAnnouncements(p,o,n);break;case 9:var q=b[5],r=b[4],s=b[3],t=b[2];this.api.getQuestions(t,s,r,q);break;case 10:var u=b[3],v=b[2];this.api.getQuestion(v,u);break;case 11:var w=b[3],x=b[2];this.api.getAttachments(x,w);break;case 12:var y=b[3],z=b[2];this.api.getSolutions(z,y);break;case 13:this.api.getMe();break;case 14:var A=b[2];this.api.getDepartmentTree(A);break;case 15:var B=b[3],C=b[2];this.api.getDepartmentUsers(C,B);break;case 16:var D=b[2];this.api.getDepartmentAllUsers(D);break;case 17:var E=b[3],F=b[2];this.api.getDepartmentUserCount(F,E)}},__class__:t.command.ReloadDataCommand}),t.command.ReloadDataType=e["albero.command.ReloadDataType"]={__ename__:["albero","command","ReloadDataType"],__constructs__:["Domains","Friends","Talks","Messages","AllUsers","GetUsers","GetProfile","SearchDomainUsers","Announcements","Questions","Question","Files","Solutions","Me","DepartmentTree","DepartmentUsers","DepartmentAllUsers","DepartmentUserCount"]},t.command.ReloadDataType.Domains=["Domains",0],t.command.ReloadDataType.Domains.toString=f,t.command.ReloadDataType.Domains.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Friends=["Friends",1],t.command.ReloadDataType.Friends.toString=f,t.command.ReloadDataType.Friends.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Talks=["Talks",2],t.command.ReloadDataType.Talks.toString=f,t.command.ReloadDataType.Talks.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Messages=function(a,b,c,d){var e=["Messages",3,a,b,c,d];return e.__enum__=t.command.ReloadDataType,e.toString=f,e},t.command.ReloadDataType.AllUsers=function(a){var b=["AllUsers",4,a];return b.__enum__=t.command.ReloadDataType,b.toString=f,b},t.command.ReloadDataType.GetUsers=function(a,b){var c=["GetUsers",5,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.GetProfile=function(a,b){var c=["GetProfile",6,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.SearchDomainUsers=function(a,b){var c=["SearchDomainUsers",7,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Announcements=function(a,b,c){var d=["Announcements",8,a,b,c];return d.__enum__=t.command.ReloadDataType,d.toString=f,d},t.command.ReloadDataType.Questions=function(a,b,c,d){var e=["Questions",9,a,b,c,d];return e.__enum__=t.command.ReloadDataType,e.toString=f,e},t.command.ReloadDataType.Question=function(a,b){var c=["Question",10,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Files=function(a,b){var c=["Files",11,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Solutions=function(a,b){var c=["Solutions",12,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Me=["Me",13],t.command.ReloadDataType.Me.toString=f,t.command.ReloadDataType.Me.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.DepartmentTree=function(a){var b=["DepartmentTree",14,a];return b.__enum__=t.command.ReloadDataType,b.toString=f,b},t.command.ReloadDataType.DepartmentUsers=function(a,b){var c=["DepartmentUsers",15,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.DepartmentAllUsers=function(a){var b=["DepartmentAllUsers",16,a];return b.__enum__=t.command.ReloadDataType,b.toString=f,b},t.command.ReloadDataType.DepartmentUserCount=function(a,b){var c=["DepartmentUserCount",17,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.SearchCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SearchCommand"]=t.command.SearchCommand,t.command.SearchCommand.__name__=["albero","command","SearchCommand"],t.command.SearchCommand.__super__=t.command.AutoBindCommand,t.command.SearchCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[4],d=b[3],e=b[2];this.searchService.isSearching()||(null==c&&this.searchService.saveParams(e),this.api.search(e.copy(),d,c));break;case 1:this.searchService.clearEditingParams(),this.searchService.clearRecentParams(),this.searchService.clearSearching(),this.sendNotification("notify_search_clear",{})}},__class__:t.command.SearchCommand}),t.command.SearchAction=e["albero.command.SearchAction"]={__ename__:["albero","command","SearchAction"],__constructs__:["SEARCH","CLEAR"]},t.command.SearchAction.SEARCH=function(a,b,c){var d=["SEARCH",0,a,b,c];return d.__enum__=t.command.SearchAction,d.toString=f,d},t.command.SearchAction.CLEAR=["CLEAR",1],t.command.SearchAction.CLEAR.toString=f,t.command.SearchAction.CLEAR.__enum__=t.command.SearchAction,t.command.SelectTalkCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SelectTalkCommand"]=t.command.SelectTalkCommand,t.command.SelectTalkCommand.__name__=["albero","command","SelectTalkCommand"],t.command.SelectTalkCommand.__super__=t.command.AutoBindCommand,t.command.SelectTalkCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.settings.selectTalk(t.entity.PaneType.SingleTalkPane,d,x.ds.Option.Some(c));break;case 1:var e=b[2];this.settings.selectTalk(t.entity.PaneType.SingleTalkPane,e,x.ds.Option.None);break;case 2:this.settings.selectAnnouncement(t.entity.PaneType.SingleTalkPane)}},__class__:t.command.SelectTalkCommand}),t.command.SelectTalkAction=e["albero.command.SelectTalkAction"]={__ename__:["albero","command","SelectTalkAction"],__constructs__:["SelectTalkAndMessage","SelectTalk","SelectAnnouncement"]},t.command.SelectTalkAction.SelectTalkAndMessage=function(a,b){var c=["SelectTalkAndMessage",0,a,b];return c.__enum__=t.command.SelectTalkAction,c.toString=f,c},t.command.SelectTalkAction.SelectTalk=function(a){var b=["SelectTalk",1,a];return b.__enum__=t.command.SelectTalkAction,b.toString=f,b},t.command.SelectTalkAction.SelectAnnouncement=["SelectAnnouncement",2],t.command.SelectTalkAction.SelectAnnouncement.toString=f,t.command.SelectTalkAction.SelectAnnouncement.__enum__=t.command.SelectTalkAction,t.command.SendCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SendCommand"]=t.command.SendCommand,t.command.SendCommand.__name__=["albero","command","SendCommand"],t.command.SendCommand.__super__=t.command.AutoBindCommand,t.command.SendCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();this.api.createMessage(b.talkId,b.type,b.content)},__class__:t.command.SendCommand}),t.command.SignInCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SignInCommand"]=t.command.SignInCommand,t.command.SignInCommand.__name__=["albero","command","SignInCommand"],t.command.SignInCommand.__super__=t.command.AutoBindCommand,t.command.SignInCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=this.settings.getAccessToken();if(null!=b)return void this.api.createSession(b);var c;c=null!=B.account?B.account.split(":"):null,null!=c&&2==c.length&&this.api.createAccessToken(c[0],c[1])},__class__:t.command.SignInCommand}),t.command.SignOutCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SignOutCommand"]=t.command.SignOutCommand,t.command.SignOutCommand.__name__=["albero","command","SignOutCommand"],t.command.SignOutCommand.__super__=t.command.AutoBindCommand,t.command.SignOutCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){this.api.deleteSession(),this.settings.clearInputTextForAll(),this.dataStore.clear(!0)},__class__:t.command.SignOutCommand}),t.command.TalkCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.TalkCommand"]=t.command.TalkCommand,t.command.TalkCommand.__name__=["albero","command","TalkCommand"],t.command.TalkCommand.__super__=t.command.AutoBindCommand,t.command.TalkCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[4],d=b[3],e=b[2],f=this.dataStore.getValidPairTalk(d,e);null!=f?this.sendNotification("SelectTalk",t.command.SelectTalkAction.SelectTalk(f)):this.api.createPairTalk(e,d,c);break;case 1:var g=b[5],h=b[4],i=b[3],j=b[2];this.api.createGroupTalk(j,i,h,g);break;case 2:var k=b[4],l=b[3],m=b[2];this.api.addTalkers(m,l,k);break;case 3:var n=b[3],o=b[2];null==n&&(n=this.dataStore.me.id),this.api.deleteTalker(o,n);break;case 4:var p=b[5],q=b[4],r=b[3],s=b[2];this.api.updateGroupTalk(s,r,q,p);break;case 5:var u=b[3],v=b[2];this.api.addFavoriteTalk(v,u);break;case 6:var w=b[3],x=b[2];this.api.deleteFavoriteTalk(x,w);break;case 7:var y=b[3],z=b[2];this.api.disablePushNotification(z,y);break;case 8:var A=b[3],B=b[2];this.api.enablePushNotification(B,A)}},__class__:t.command.TalkCommand}),t.command.TalkAction=e["albero.command.TalkAction"]={__ename__:["albero","command","TalkAction"],__constructs__:["OPEN_PAIR_TALK","OPEN_GROUP_TALK","ADD","DELETE","UPDATE","ADD_FAVORITE","DELETE_FAVORITE","DISABLE_PUSH_NOTIFICATION","ENABLE_PUSH_NOTIFICATION"]},t.command.TalkAction.OPEN_PAIR_TALK=function(a,b,c){var d=["OPEN_PAIR_TALK",0,a,b,c];return d.__enum__=t.command.TalkAction,d.toString=f,d},t.command.TalkAction.OPEN_GROUP_TALK=function(a,b,c,d){var e=["OPEN_GROUP_TALK",1,a,b,c,d];return e.__enum__=t.command.TalkAction,e.toString=f,e},t.command.TalkAction.ADD=function(a,b,c){var d=["ADD",2,a,b,c];return d.__enum__=t.command.TalkAction,d.toString=f,d},t.command.TalkAction.DELETE=function(a,b){var c=["DELETE",3,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.TalkAction.UPDATE=function(a,b,c,d){var e=["UPDATE",4,a,b,c,d];return e.__enum__=t.command.TalkAction,e.toString=f,e},t.command.TalkAction.ADD_FAVORITE=function(a,b){var c=["ADD_FAVORITE",5,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.TalkAction.DELETE_FAVORITE=function(a,b){var c=["DELETE_FAVORITE",6,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.TalkAction.DISABLE_PUSH_NOTIFICATION=function(a,b){var c=["DISABLE_PUSH_NOTIFICATION",7,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.TalkAction.ENABLE_PUSH_NOTIFICATION=function(a,b){var c=["ENABLE_PUSH_NOTIFICATION",8,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.UpdateProfileCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UpdateProfileCommand"]=t.command.UpdateProfileCommand,t.command.UpdateProfileCommand.__name__=["albero","command","UpdateProfileCommand"],t.command.UpdateProfileCommand.__super__=t.command.AutoBindCommand,t.command.UpdateProfileCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody().domainId,c=a.getBody().profileItemValues,d=a.getBody().copyToAllDomains,e=this.dataStore.getDomain(b);if(null!=e&&null!=e.profileDefinition.itemDefinitions){var f=new Array;if(d){for(var g=new Array,h=0;h<c.length;){var j=c[h];++h;var k=t.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,j.profileItemId);null!=k&&g.push({name:k.name,value:j.value})}for(var l=0,m=this.dataStore.getDomains();l<m.length;){var n=m[l];if(++l,!n.domainInfo.frozen){for(var o=new Array,p=0,q=n.profileDefinition.itemDefinitions;p<q.length;){var r=q[p];if(++p,r.visible&&!r.locked)for(var s=0;s<g.length;){var u=g[s];if(++s,u.name==r.name){var v=new t.entity.ProfileItemValue;v.profileItemId=r.profileItemId,v.value=u.value,o.push(v);break}}}o.length>0&&f.push({domainId:n.id,profileItemValues:o})}}}else{for(var w=new Array,x=(i.iter(c),0);x<c.length;){var y=c[x];++x;var z=t.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,y.profileItemId);null!=z&&z.visible&&!z.locked&&w.push(y)}w.length>0&&f.push({domainId:e.id,profileItemValues:w})}0==f.length?this.sendNotification("update_profile_responsed",this.dataStore.me):this.api.updateProfile(f)}},__class__:t.command.UpdateProfileCommand}),t.command.UpdateUserCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UpdateUserCommand"]=t.command.UpdateUserCommand,t.command.UpdateUserCommand.__name__=["albero","command","UpdateUserCommand"],t.command.UpdateUserCommand.__super__=t.command.AutoBindCommand,t.command.UpdateUserCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();(null==b.profileImage||p.startsWith(b.profileImage.type,"image/"))&&this.api.updateUser(b.displayName,b.profileImage,b.profileImageUrl,b.phoneticDisplayName,b.status)},__class__:t.command.UpdateUserCommand}),t.command.UrlCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UrlCommand"]=t.command.UrlCommand,t.command.UrlCommand.__name__=["albero","command","UrlCommand"],t.command.UrlCommand.__super__=t.command.AutoBindCommand,t.command.UrlCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.routing.forward(c);break;case 1:var d=b[2];this.routing.redirect(d);break;case 2:this.routing.back()}},__class__:t.command.UrlCommand}),t.command.UrlAction=e["albero.command.UrlAction"]={__ename__:["albero","command","UrlAction"],__constructs__:["FORWARD","REDIRECT","BACK"]},t.command.UrlAction.FORWARD=function(a){var b=["FORWARD",0,a];return b.__enum__=t.command.UrlAction,b.toString=f,b},t.command.UrlAction.REDIRECT=function(a){var b=["REDIRECT",1,a];return b.__enum__=t.command.UrlAction,b.toString=f,b},t.command.UrlAction.BACK=["BACK",2],t.command.UrlAction.BACK.toString=f,t.command.UrlAction.BACK.__enum__=t.command.UrlAction,t.entity={},t.entity.AccountControlGroup=function(a){null!=a&&(this.id=a.id,this.group=new t.entity.AccountControlGroupGroup(a.group),this.profilePolicy=new t.entity.AccountControlGroupProfilePolicy(a.profile_policy))},e["albero.entity.AccountControlGroup"]=t.entity.AccountControlGroup,t.entity.AccountControlGroup.__name__=["albero","entity","AccountControlGroup"],t.entity.AccountControlGroup.prototype={__class__:t.entity.AccountControlGroup},t.entity.AccountControlGroupGroup=function(a){null!=a&&(this.name=a.name,this.alias=a.alias,this.ownerName=a.owner_name,this.version=a.version)},e["albero.entity.AccountControlGroupGroup"]=t.entity.AccountControlGroupGroup,t.entity.AccountControlGroupGroup.__name__=["albero","entity","AccountControlGroupGroup"],t.entity.AccountControlGroupGroup.prototype={__class__:t.entity.AccountControlGroupGroup},t.entity.AccountControlGroupProfilePolicy=function(a){null!=a&&(this.allowUpdateDisplayName=a.allow_update_display_name,this.allowUpdateProfileImage=a.allow_update_profile_image,this.version=a.version)},e["albero.entity.AccountControlGroupProfilePolicy"]=t.entity.AccountControlGroupProfilePolicy,t.entity.AccountControlGroupProfilePolicy.__name__=["albero","entity","AccountControlGroupProfilePolicy"],t.entity.AccountControlGroupProfilePolicy.prototype={__class__:t.entity.AccountControlGroupProfilePolicy},t.entity.AccountControlGroupPartialUpdate=function(a){null!=a&&(this.id=a.id,null!=a.group&&(this.group=new t.entity.AccountControlGroupGroup(a.group)),null!=a.profile_policy&&(this.profilePolicy=new t.entity.AccountControlGroupProfilePolicy(a.profile_policy)))},e["albero.entity.AccountControlGroupPartialUpdate"]=t.entity.AccountControlGroupPartialUpdate,t.entity.AccountControlGroupPartialUpdate.__name__=["albero","entity","AccountControlGroupPartialUpdate"],t.entity.AccountControlGroupPartialUpdate.prototype={__class__:t.entity.AccountControlGroupPartialUpdate},t.entity.AccountControlRequest=function(a){null!=a&&(this.id=t.Int64Helper.fromIntOrInt64(a.id),this.groupName=a.group_name,this.groupOwnerName=a.group_owner_name,this.groupOwnerEmail=a.group_owner_email,this.hasDomainInvite=a.has_domain_invite,this.updatedAt=a.updated_at,this.version=a.version)},e["albero.entity.AccountControlRequest"]=t.entity.AccountControlRequest,t.entity.AccountControlRequest.__name__=["albero","entity","AccountControlRequest"],t.entity.AccountControlRequest.prototype={__class__:t.entity.AccountControlRequest},t.entity.Announcement=function(a){null!=a&&(this.id=a.announcement_id,this.domainId=a.domain_id,this.groupId=a.group_id,this.groupName=a.group_name,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.userName=a.user_name,this.createdAt=a.created_at)},e["albero.entity.Announcement"]=t.entity.Announcement,t.entity.Announcement.__name__=["albero","entity","Announcement"],t.entity.Announcement.prototype={__class__:t.entity.Announcement},t.entity.AnnouncementStatus=function(a){null!=a&&(this.domainId=a.domain_id,null!=a.unread_count?this.unreadCount=a.unread_count:this.unreadCount=0,this.maxAnnouncementId=a.max_announcement_id,null!=a.max_announcement&&(this.maxAnnouncement=new t.entity.Announcement(a.max_announcement)),this.maxReadAnnouncementId=a.max_read_announcement_id)},e["albero.entity.AnnouncementStatus"]=t.entity.AnnouncementStatus,t.entity.AnnouncementStatus.__name__=["albero","entity","AnnouncementStatus"],t.entity.AnnouncementStatus.prototype={updateRead:function(a){var b=0,c=null;if(null!=a.readAnnouncementIds)for(var d=0,e=a.readAnnouncementIds;d<e.length;){var f=e[d];++d,(null==this.maxReadAnnouncementId||x.Int64.compare(f,this.maxReadAnnouncementId)>0)&&((null==c||x.Int64.compare(f,c)>0)&&(c=f),b++)}null!=c&&(this.maxReadAnnouncementId=c,this.unreadCount=this.unreadCount-b,this.unreadCount<0&&(this.unreadCount=0))},__class__:t.entity.AnnouncementStatus},t.entity.AnnouncementStatusHelper=function(){},e["albero.entity.AnnouncementStatusHelper"]=t.entity.AnnouncementStatusHelper,t.entity.AnnouncementStatusHelper.__name__=["albero","entity","AnnouncementStatusHelper"],t.entity.AnnouncementStatusHelper.isUnreadAnnouncementExisted=function(a){return null==a?!1:null==a.maxAnnouncement?!1:null==a.maxReadAnnouncementId?!0:x.Int64.compare(a.maxAnnouncement.id,a.maxReadAnnouncementId)>0},t.entity.AnnouncementStatusUpdate=function(a){null!=a&&(this.domainId=a.domain_id,this.readAnnouncementIds=a.read_announcement_ids)},e["albero.entity.AnnouncementStatusUpdate"]=t.entity.AnnouncementStatusUpdate,t.entity.AnnouncementStatusUpdate.__name__=["albero","entity","AnnouncementStatusUpdate"],t.entity.AnnouncementStatusUpdate.prototype={__class__:t.entity.AnnouncementStatusUpdate},t.entity.BrowserSettings=function(a){if(this.notificationInvisibleTalkSound=!0,this.notificationInvisibleTalkPopup=!1,this.notificationVisibleTalkSound=!1,this.notificationVisibleTalkPopup=!1,this.talkAutoScroll=t.entity.BrowserSettings.TalkAutoScrollDelay,this.keywordWatchingText="",this.keywordWatchingEmphasis=!1,this.keywordWatchingSelfMessage=!1,this.keywordWatchingActionReply=!1,this.userDataContainer=new Array,null!=a&&(null!=a.notificationInvisibleTalkSound&&(this.notificationInvisibleTalkSound=a.notificationInvisibleTalkSound),null!=a.notificationInvisibleTalkPopup&&(this.notificationInvisibleTalkPopup=a.notificationInvisibleTalkPopup),null!=a.notificationVisibleTalkSound&&(this.notificationVisibleTalkSound=a.notificationVisibleTalkSound),null!=a.notificationVisibleTalkPopup&&(this.notificationVisibleTalkPopup=a.notificationVisibleTalkPopup),null!=a.notificationVisibleTalkAutoScroll&&(a.notificationVisibleTalkAutoScroll?this.talkAutoScroll=t.entity.BrowserSettings.TalkAutoScrollDelay:this.talkAutoScroll=t.entity.BrowserSettings.TalkAutoScrollNone),null!=a.talkAutoScroll&&(this.talkAutoScroll=a.talkAutoScroll),null!=a.keywordWatchingText&&(this.keywordWatchingText=a.keywordWatchingText),null!=a.keywordWatchingEmphasis&&(this.keywordWatchingEmphasis=a.keywordWatchingEmphasis),null!=a.keywordWatchingSelfMessage&&(this.keywordWatchingSelfMessage=a.keywordWatchingSelfMessage),null!=a.keywordWatchingActionReply&&(this.keywordWatchingActionReply=a.keywordWatchingActionReply),null!=a.userDataContainer)){var b,c=0;for(b=v.Boot.__cast(a.userDataContainer,Array);c<b.length;){var d=b[c];++c,this.userDataContainer.push(t.entity.UserData.fromJson(d))}}},e["albero.entity.BrowserSettings"]=t.entity.BrowserSettings,t.entity.BrowserSettings.__name__=["albero","entity","BrowserSettings"],t.entity.BrowserSettings.fromJson=function(a){var b=new t.entity.BrowserSettings(a);return b},t.entity.BrowserSettings.prototype={createCopy:function(){var a=new t.entity.BrowserSettings(null);return this.copyTo(a),a},hasNotificationSettingsChange:function(a){return a.notificationInvisibleTalkSound==this.notificationInvisibleTalkSound&&a.notificationInvisibleTalkPopup==this.notificationInvisibleTalkPopup&&a.notificationVisibleTalkSound==this.notificationVisibleTalkSound&&a.notificationVisibleTalkPopup==this.notificationVisibleTalkPopup},hasTalkSettingsChange:function(a){return a.talkAutoScroll==this.talkAutoScroll},hasKeywordWatchingChange:function(a){return a.keywordWatchingText==this.keywordWatchingText&&a.keywordWatchingEmphasis==this.keywordWatchingEmphasis&&a.keywordWatchingSelfMessage==this.keywordWatchingSelfMessage&&a.keywordWatchingActionReply==this.keywordWatchingActionReply},hasUserDataChange:function(a,b){var c=a.getUserData(b),d=this.getUserData(b);if(null==c||null==c)return!0;var e=d.stampHistories.length;if(c.stampHistories.length!=e)return!0;for(var f=0;e>f;){var g=f++;if(c.stampHistories[g]!=d.stampHistories[g])return!0}return!1},copyTo:function(a){this.copyNotificationSettingsTo(a),this.copyKeywordSettingsTo(a),this.copyTalkSettingsTo(a),this.copyUserDataContainerTo(a)},copyNotificationSettingsTo:function(a){a.notificationInvisibleTalkSound=this.notificationInvisibleTalkSound,a.notificationInvisibleTalkPopup=this.notificationInvisibleTalkPopup,a.notificationVisibleTalkSound=this.notificationVisibleTalkSound,a.notificationVisibleTalkPopup=this.notificationVisibleTalkPopup},copyKeywordSettingsTo:function(a){a.keywordWatchingText=this.keywordWatchingText,a.keywordWatchingEmphasis=this.keywordWatchingEmphasis,a.keywordWatchingSelfMessage=this.keywordWatchingSelfMessage,a.keywordWatchingActionReply=this.keywordWatchingActionReply},copyTalkSettingsTo:function(a){a.talkAutoScroll=this.talkAutoScroll},copyUserDataContainerTo:function(a){a.userDataContainer=this.userDataContainer},getUserData:function(a){var b=j.find(this.userDataContainer,function(b){return b.userIdString==a});return b},assureUserData:function(a){var b=this.getUserData(a);return null==b&&(b=t.entity.UserData.fromUserIdString(a),this.userDataContainer.push(b)),b},__class__:t.entity.BrowserSettings},t.entity.UserData=function(){},e["albero.entity.UserData"]=t.entity.UserData,t.entity.UserData.__name__=["albero","entity","UserData"],t.entity.UserData.fromUserIdString=function(a){var b=new t.entity.UserData;return b.userIdString=a,b.stampHistories=new Array,b},t.entity.UserData.fromJson=function(a){var b=new t.entity.UserData;return null!=a&&(null!=a.userIdString&&(b.userIdString=a.userIdString),null!=a.stampHistories&&(b.stampHistories=a.stampHistories)),b},t.entity.UserData.prototype={__class__:t.entity.UserData},t.entity.Configuration=function(a){null!=a&&(this.maxFriends=a.max_friends,this.maxTalks=a.max_talks,this.maxTalkers=a.max_talkers,this.maxMessageContentLength=a.max_message_content_length,this.botExpiredVersion=a.bot_expired_version)},e["albero.entity.Configuration"]=t.entity.Configuration,t.entity.Configuration.__name__=["albero","entity","Configuration"],t.entity.Configuration.prototype={__class__:t.entity.Configuration},t.entity.Contract=function(a){null!=a&&(this.id=a.contract_id,this.plan=new t.entity.Plan(a.plan),this.quota=new t.entity.Quota(a.quota),this.solutionIds=a.solution_ids)},e["albero.entity.Contract"]=t.entity.Contract,t.entity.Contract.__name__=["albero","entity","Contract"],t.entity.Contract.prototype={getMaxMessageContentLength:function(){return t.OptionHelper.map(t.OptionHelper.option(this.quota),function(a){return a.maxMessageContentLength})},__class__:t.entity.Contract},t.entity.Department=function(a){if(null!=a){this.id=a.department_id,this.order=a.order,this.parentId=a.parent,null==a.node?this.nodeType=t.entity.DepartmentNodeType.Normal:this.nodeType=this.parseDepartmentNodeType(a.node);var b=this.nodeType;switch(b[1]){case 1:this.name=t.entity.Department.LABEL_ROOT;break;case 2:this.name=t.entity.Department.LABEL_FREE;break;case 0:this.name=a.name}this.depth=0,this.childrenIds=null,this.userCount=null,this.userIds=null,this.userCountLoading=!1}},e["albero.entity.Department"]=t.entity.Department,t.entity.Department.__name__=["albero","entity","Department"],t.entity.Department.prototype={addChild:function(a){null==this.childrenIds&&(this.childrenIds=[]),this.childrenIds.push(a)},isRoot:function(){return this.nodeType==t.entity.DepartmentNodeType.Root},isFree:function(){return this.nodeType==t.entity.DepartmentNodeType.Free},parseDepartmentNodeType:function(a){switch(a){case 1:return t.entity.DepartmentNodeType.Root;case 2:return t.entity.DepartmentNodeType.Free;default:return t.entity.DepartmentNodeType.Normal}},__class__:t.entity.Department},t.entity.DepartmentHelper=function(){},e["albero.entity.DepartmentHelper"]=t.entity.DepartmentHelper,t.entity.DepartmentHelper.__name__=["albero","entity","DepartmentHelper"],t.entity.DepartmentHelper.getName=function(a){return null==a?null:a.name},t.entity.DepartmentNodeType=e["albero.entity.DepartmentNodeType"]={__ename__:["albero","entity","DepartmentNodeType"],__constructs__:["Normal","Root","Free"]},t.entity.DepartmentNodeType.Normal=["Normal",0],t.entity.DepartmentNodeType.Normal.toString=f,t.entity.DepartmentNodeType.Normal.__enum__=t.entity.DepartmentNodeType,t.entity.DepartmentNodeType.Root=["Root",1],t.entity.DepartmentNodeType.Root.toString=f,t.entity.DepartmentNodeType.Root.__enum__=t.entity.DepartmentNodeType,t.entity.DepartmentNodeType.Free=["Free",2],t.entity.DepartmentNodeType.Free.toString=f,t.entity.DepartmentNodeType.Free.__enum__=t.entity.DepartmentNodeType,t.entity.DepartmentList=function(a){null!=a&&(this.domainId=a.domain_id,this.departments=this.getDepartments(a.departments))},e["albero.entity.DepartmentList"]=t.entity.DepartmentList,t.entity.DepartmentList.__name__=["albero","entity","DepartmentList"],
t.entity.DepartmentList.prototype={getDepartments:function(a){return null==a?[]:a.map(function(a){return new t.entity.Department(a)})},__class__:t.entity.DepartmentList},t.entity.DepartmentUserCount=function(a){null!=a&&(this.departmentId=a.department_id,this.all=a.all,this.partial=a.partial)},e["albero.entity.DepartmentUserCount"]=t.entity.DepartmentUserCount,t.entity.DepartmentUserCount.__name__=["albero","entity","DepartmentUserCount"],t.entity.DepartmentUserCount.prototype={__class__:t.entity.DepartmentUserCount},t.entity.DepartmentUserCountList=function(a){null!=a&&(this.departments=this.getDepartmentUserCounts(a.departments))},e["albero.entity.DepartmentUserCountList"]=t.entity.DepartmentUserCountList,t.entity.DepartmentUserCountList.__name__=["albero","entity","DepartmentUserCountList"],t.entity.DepartmentUserCountList.prototype={getDepartmentUserCounts:function(a){return null==a?[]:a.map(function(a){return new t.entity.DepartmentUserCount(a)})},__class__:t.entity.DepartmentUserCountList},t.entity.Domain=function(a){null!=a&&(this.id=a.domain_id,this.updatedAt=a.updated_at,this.domainInfo=new t.entity.DomainInfo(a.domain),this.contract=new t.entity.Contract(a.contract),this.profileDefinition=new t.entity.ProfileDefinition(a.profile_definition),this.setting=new t.entity.DomainSetting(a.setting),this.role=new t.entity.DomainRole(a.role),this.closed=!1)},e["albero.entity.Domain"]=t.entity.Domain,t.entity.Domain.__name__=["albero","entity","Domain"],t.entity.Domain.isChangedContractTreeEnabled=function(a,b){var c=t.entity.Domain.isDepartmentEnabled(a),d=t.entity.Domain.isDepartmentEnabled(b);return c!=d},t.entity.Domain.isDepartmentEnabled=function(a){return null==a?!1:t.entity.Domain.isAllowListUser(a)&&!!a.setting.contactTreeEnabled},t.entity.Domain.isAllowListUser=function(a){return null==a||a.role.allowListUsers},t.entity.Domain.isChangedRoleType=function(a,b){var c;c=null==a?t.entity.DomainRoleType.user:a.role.type;var d;return d=null==b?t.entity.DomainRoleType.user:b.role.type,c!=d},t.entity.Domain.prototype={getMaxMessageContentLengthOrElse:function(a){var b=t.OptionHelper.flatMap(t.OptionHelper.option(this.contract),function(a){return a.getMaxMessageContentLength()});switch(b[1]){case 0:var c=b[2];return c;case 1:return a}},__class__:t.entity.Domain},t.entity.DomainInfo=function(a){null!=a&&(this.name=a.domain_name,this.logoUrl=a.logo_url,this.frozen=a.frozen)},e["albero.entity.DomainInfo"]=t.entity.DomainInfo,t.entity.DomainInfo.__name__=["albero","entity","DomainInfo"],t.entity.DomainInfo.prototype={__class__:t.entity.DomainInfo},t.entity.DomainSetting=function(a){null!=a&&(this.allowAttachmentType=this.allowAttachmentTypeOf(a.allow_attachment_type),this.allowSaveAttachmentsToDevice=a.allow_save_attachments_to_device,null!=a.allow_save_attachments&&(this.allowSaveAttachments=new t.entity.DomainSettingAllowSaveAttachments(a.allow_save_attachments)),this.allowForwardMessageType=this.allowForwardMessageTypeOf(a.allow_forward_message_type),this.contactTreeEnabled=!!a.contact_tree_enabled)},e["albero.entity.DomainSetting"]=t.entity.DomainSetting,t.entity.DomainSetting.__name__=["albero","entity","DomainSetting"],t.entity.DomainSetting.prototype={allowAttachmentTypeOf:function(a){switch(a){case 0:return t.entity.DomainAllowAttachmentType.ng;case 1:return t.entity.DomainAllowAttachmentType.ok;case 2:return t.entity.DomainAllowAttachmentType.image;case 3:return t.entity.DomainAllowAttachmentType.imageOrVideo;case 4:return t.entity.DomainAllowAttachmentType.imageOrVideoOrAudio;default:return t.entity.DomainAllowAttachmentType.other}},allowForwardMessageTypeOf:function(a){switch(a){case 0:return t.entity.DomainAllowForwardMessageType.ng;case 1:return t.entity.DomainAllowForwardMessageType.ok;case 2:return t.entity.DomainAllowForwardMessageType.onlyTextOrStamp;default:return t.entity.DomainAllowForwardMessageType.other}},__class__:t.entity.DomainSetting},t.entity.DomainSettingAllowSaveAttachments=function(a){null!=a&&(null==a.web?this.web=!0:this.web=a.web,null==a.ios?this.ios=!0:this.ios=a.ios,null==a.android?this.android=!0:this.android=a.android,null==a.desktop?this.desktop=!0:this.desktop=a.desktop)},e["albero.entity.DomainSettingAllowSaveAttachments"]=t.entity.DomainSettingAllowSaveAttachments,t.entity.DomainSettingAllowSaveAttachments.__name__=["albero","entity","DomainSettingAllowSaveAttachments"],t.entity.DomainSettingAllowSaveAttachments.prototype={__class__:t.entity.DomainSettingAllowSaveAttachments},t.entity.DomainRole=function(a){null!=a&&(this.type=this.typeOf(a.type),this.allowGuests=this.def(a.allow_guests,!0),this.allowCreateAttachments=this.def(a.allow_create_attachments,!0),this.allowReadAttachments=this.def(a.allow_read_attachments,!0),this.allowCreateAnnouncement=this.def(a.allow_create_announcement,!1),this.allowReadAnnouncements=a.allow_read_announcements,null==this.allowReadAnnouncements&&(this.allowReadAnnouncements=!0),this.allowListUsers=a.allow_list_users,null==this.allowListUsers&&(this.allowListUsers=!0))},e["albero.entity.DomainRole"]=t.entity.DomainRole,t.entity.DomainRole.__name__=["albero","entity","DomainRole"],t.entity.DomainRole.prototype={def:function(a,b){return a?a:b},typeOf:function(a){switch(a){case 10:return t.entity.DomainRoleType.owner;case 20:return t.entity.DomainRoleType.manager;case 30:return t.entity.DomainRoleType.user;default:return t.entity.DomainRoleType.guest}},__class__:t.entity.DomainRole},t.entity.DomainRoleType=e["albero.entity.DomainRoleType"]={__ename__:["albero","entity","DomainRoleType"],__constructs__:["owner","manager","user","guest"]},t.entity.DomainRoleType.owner=["owner",0],t.entity.DomainRoleType.owner.toString=f,t.entity.DomainRoleType.owner.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.manager=["manager",1],t.entity.DomainRoleType.manager.toString=f,t.entity.DomainRoleType.manager.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.user=["user",2],t.entity.DomainRoleType.user.toString=f,t.entity.DomainRoleType.user.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.guest=["guest",3],t.entity.DomainRoleType.guest.toString=f,t.entity.DomainRoleType.guest.__enum__=t.entity.DomainRoleType,t.entity.DomainAllowAttachmentType=e["albero.entity.DomainAllowAttachmentType"]={__ename__:["albero","entity","DomainAllowAttachmentType"],__constructs__:["ng","ok","image","imageOrVideo","imageOrVideoOrAudio","other"]},t.entity.DomainAllowAttachmentType.ng=["ng",0],t.entity.DomainAllowAttachmentType.ng.toString=f,t.entity.DomainAllowAttachmentType.ng.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowAttachmentType.ok=["ok",1],t.entity.DomainAllowAttachmentType.ok.toString=f,t.entity.DomainAllowAttachmentType.ok.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowAttachmentType.image=["image",2],t.entity.DomainAllowAttachmentType.image.toString=f,t.entity.DomainAllowAttachmentType.image.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowAttachmentType.imageOrVideo=["imageOrVideo",3],t.entity.DomainAllowAttachmentType.imageOrVideo.toString=f,t.entity.DomainAllowAttachmentType.imageOrVideo.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowAttachmentType.imageOrVideoOrAudio=["imageOrVideoOrAudio",4],t.entity.DomainAllowAttachmentType.imageOrVideoOrAudio.toString=f,t.entity.DomainAllowAttachmentType.imageOrVideoOrAudio.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowAttachmentType.other=["other",5],t.entity.DomainAllowAttachmentType.other.toString=f,t.entity.DomainAllowAttachmentType.other.__enum__=t.entity.DomainAllowAttachmentType,t.entity.DomainAllowForwardMessageType=e["albero.entity.DomainAllowForwardMessageType"]={__ename__:["albero","entity","DomainAllowForwardMessageType"],__constructs__:["ng","ok","onlyTextOrStamp","other"]},t.entity.DomainAllowForwardMessageType.ng=["ng",0],t.entity.DomainAllowForwardMessageType.ng.toString=f,t.entity.DomainAllowForwardMessageType.ng.__enum__=t.entity.DomainAllowForwardMessageType,t.entity.DomainAllowForwardMessageType.ok=["ok",1],t.entity.DomainAllowForwardMessageType.ok.toString=f,t.entity.DomainAllowForwardMessageType.ok.__enum__=t.entity.DomainAllowForwardMessageType,t.entity.DomainAllowForwardMessageType.onlyTextOrStamp=["onlyTextOrStamp",2],t.entity.DomainAllowForwardMessageType.onlyTextOrStamp.toString=f,t.entity.DomainAllowForwardMessageType.onlyTextOrStamp.__enum__=t.entity.DomainAllowForwardMessageType,t.entity.DomainAllowForwardMessageType.other=["other",3],t.entity.DomainAllowForwardMessageType.other.toString=f,t.entity.DomainAllowForwardMessageType.other.__enum__=t.entity.DomainAllowForwardMessageType,t.entity.DomainDepartmentPath=function(a){null!=a&&(this.domainId=a.domain_id,this.departments=a.departments)},e["albero.entity.DomainDepartmentPath"]=t.entity.DomainDepartmentPath,t.entity.DomainDepartmentPath.__name__=["albero","entity","DomainDepartmentPath"],t.entity.DomainDepartmentPath.prototype={__class__:t.entity.DomainDepartmentPath},t.entity.DomainInvite=function(a){null!=a&&(this.id=a.domain_id,this.name=a.domain_name,this.accountControlRequestId=t.Int64Helper.fromIntOrInt64(a.account_control_request_id),this.updatedAt=a.updated_at)},e["albero.entity.DomainInvite"]=t.entity.DomainInvite,t.entity.DomainInvite.__name__=["albero","entity","DomainInvite"],t.entity.DomainInvite.prototype={__class__:t.entity.DomainInvite},t.entity.User=function(a){null!=a&&(this.id=a.user_id,this.status=a.status,this.displayName=a.display_name,this.canonicalDisplayName=a.canonical_display_name,this.phoneticDisplayName=a.phonetic_display_name,this.canonicalPhoneticDisplayName=a.canonical_phonetic_display_name,this.profileImageUrl=a.profile_image_url,this.updatedAt=a.updated_at)},e["albero.entity.User"]=t.entity.User,t.entity.User.__name__=["albero","entity","User"],t.entity.User.prototype={__class__:t.entity.User},t.entity.DomainUser=function(a){if(t.entity.User.call(this,a),null!=a){if(this.domainId=a.domain_id,null!=a.profile_contact){this.profileContact=new Array;var b,c=0;for(b=v.Boot.__cast(a.profile_contact,Array);c<b.length;){var d=b[c];++c,this.profileContact.push(new t.entity.ProfileItemValue(d))}}this.departments=a.departments}},e["albero.entity.DomainUser"]=t.entity.DomainUser,t.entity.DomainUser.__name__=["albero","entity","DomainUser"],t.entity.DomainUser.__super__=t.entity.User,t.entity.DomainUser.prototype=b(t.entity.User.prototype,{match:function(a,b,c){if(this.matchNameOrPhonetic(a,c))return!0;if(null!=this.profileContact&&null!=b.profileDefinition.itemDefinitions)for(var d=0,e=this.profileContact;d<e.length;){var f=e[d];++d;for(var g=0,h=b.profileDefinition.itemDefinitions;g<h.length;){var i=h[g];if(++g,i.profileItemId==f.profileItemId){if(i.visible&&10==i.group&&f.canonicalValue.indexOf(a)>-1)return!0;break}}}return!1},matchNameOrPhonetic:function(a,b){return null==a||0==a.length?!0:((null==this.canonicalDisplayName||0==this.canonicalDisplayName.length)&&(this.canonicalDisplayName=t.js.TextCanonicalizer.canonicalize(this.displayName,b)),this.canonicalDisplayName.indexOf(a)>-1?!0:null!=this.canonicalPhoneticDisplayName&&this.canonicalPhoneticDisplayName.indexOf(a)>-1?!0:!1)},__class__:t.entity.DomainUser}),t.entity.FavoriteTalkEvent=function(a){null!=a&&(this.domainId=a.domain_id,this.talkId=a.talk_id,this.orderInFavorites=a.order_in_favorites,this.favoriteVersion=a.favorite_version)},e["albero.entity.FavoriteTalkEvent"]=t.entity.FavoriteTalkEvent,t.entity.FavoriteTalkEvent.__name__=["albero","entity","FavoriteTalkEvent"],t.entity.FavoriteTalkEvent.prototype={__class__:t.entity.FavoriteTalkEvent},t.entity.FileInfo=function(a){null!=a&&(this.attachmentId=a.attachment_id,this.messageId=a.message_id,this.talkId=a.talk_id,this.id=a.file_id,this.userId=a.user_id,this.name=a.name,this.contentType=a.content_type,this.contentSize=a.content_size,this.url=a.url,this.thumbUrl=a.thumbnail_url,this.updatedAt=a.updated_at,this.file=a.file,this.thumbFile=a.thumbnail_file,null!=a.deleted?this.deleted=a.deleted:this.deleted=!1)},e["albero.entity.FileInfo"]=t.entity.FileInfo,t.entity.FileInfo.__name__=["albero","entity","FileInfo"],t.entity.FileInfo.prototype={__class__:t.entity.FileInfo},t.entity.FileInfoDeletion=function(a){null!=a&&(this.messageId=a[0],this.talkId=a[1],this.fileId=a[2])},e["albero.entity.FileInfoDeletion"]=t.entity.FileInfoDeletion,t.entity.FileInfoDeletion.__name__=["albero","entity","FileInfoDeletion"],t.entity.FileInfoDeletion.prototype={__class__:t.entity.FileInfoDeletion},t.entity.HitContext=function(a){null!=a&&(this.talkId=a.talk_id,null!=a.messages&&(this.messages=v.Boot.__cast(a.messages,Array).map(function(a){return new t.entity.HitMessage(a)})))},e["albero.entity.HitContext"]=t.entity.HitContext,t.entity.HitContext.__name__=["albero","entity","HitContext"],t.entity.HitContext.prototype={findHitMessage:function(a){return j.find(this.messages,function(b){return t.Int64Helper.eq(b.id,a)})},__class__:t.entity.HitContext},t.entity.HitMessage=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.userId=a.user_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.createdAt=a.created_at,this.hit=a.hit)},e["albero.entity.HitMessage"]=t.entity.HitMessage,t.entity.HitMessage.__name__=["albero","entity","HitMessage"],t.entity.HitMessage.prototype={__class__:t.entity.HitMessage},t.entity.LocalErrorType=e["albero.entity.LocalErrorType"]={__ename__:["albero","entity","LocalErrorType"],__constructs__:["TalksCountOvered","TalkersCountOvered","SendingMessageConflicted","DeletingMessageConflicted","UploadSizeOvered"]},t.entity.LocalErrorType.TalksCountOvered=function(a){var b=["TalksCountOvered",0,a];return b.__enum__=t.entity.LocalErrorType,b.toString=f,b},t.entity.LocalErrorType.TalkersCountOvered=function(a){var b=["TalkersCountOvered",1,a];return b.__enum__=t.entity.LocalErrorType,b.toString=f,b},t.entity.LocalErrorType.SendingMessageConflicted=["SendingMessageConflicted",2],t.entity.LocalErrorType.SendingMessageConflicted.toString=f,t.entity.LocalErrorType.SendingMessageConflicted.__enum__=t.entity.LocalErrorType,t.entity.LocalErrorType.DeletingMessageConflicted=["DeletingMessageConflicted",3],t.entity.LocalErrorType.DeletingMessageConflicted.toString=f,t.entity.LocalErrorType.DeletingMessageConflicted.__enum__=t.entity.LocalErrorType,t.entity.LocalErrorType.UploadSizeOvered=function(a){var b=["UploadSizeOvered",4,a];return b.__enum__=t.entity.LocalErrorType,b.toString=f,b},t.entity.LocalErrorTypeMixin=function(){},e["albero.entity.LocalErrorTypeMixin"]=t.entity.LocalErrorTypeMixin,t.entity.LocalErrorTypeMixin.__name__=["albero","entity","LocalErrorTypeMixin"],t.entity.LocalErrorTypeMixin.toMessage=function(a){switch(a[1]){case 0:var b=a[2];return x.ds.Option.Some("トーク数が制限（"+b+"個）を超えています。必要のないトークから退出してください。");case 1:var c=a[2];return x.ds.Option.Some("トーク参加者数が制限（"+c+"人）を超えています。");case 2:return x.ds.Option.Some("一時的に送信できない状態です。しばらく待ってからリトライしてください。");case 3:return x.ds.Option.Some("一時的に削除できない状態です。しばらく待ってからリトライしてください。");case 4:var d=a[2],e=t.FileHelper.createByteSizeStringWithUnit(d);return x.ds.Option.Some("サイズが "+e+" を超えるファイルは使用できません")}},t.entity.Me=function(a){t.entity.User.call(this,a),null!=a&&(this.email=a.email,this.signinId=a.signin_id,null!=a.profiles&&(this.profiles=v.Boot.__cast(a.profiles,Array).map(function(a){return new t.entity.Profile(a)})),null!=a.departments&&(this.departments=v.Boot.__cast(a.departments,Array).map(function(a){return new t.entity.DomainDepartmentPath(a)})))},e["albero.entity.Me"]=t.entity.Me,t.entity.Me.__name__=["albero","entity","Me"],t.entity.Me.__super__=t.entity.User,t.entity.Me.prototype=b(t.entity.User.prototype,{toDomainUser:function(a){var b=new t.entity.DomainUser;if(b.id=this.id,b.status=this.status,b.domainId=a,b.displayName=this.displayName,b.canonicalDisplayName=this.canonicalDisplayName,b.phoneticDisplayName=this.phoneticDisplayName,b.canonicalPhoneticDisplayName=this.canonicalPhoneticDisplayName,b.profileImageUrl=this.profileImageUrl,b.updatedAt=this.updatedAt,b.email=this.email,null!=this.profiles)for(var c=0,d=this.profiles;c<d.length;){var e=d[c];if(++c,t.Int64Helper.eq(e.domainId,a)){b.profileContact=e.itemValues;break}}if(null!=this.departments)for(var f=0,g=this.departments;f<g.length;){var h=g[f];if(++f,t.Int64Helper.eq(h.domainId,a)){b.departments=h.departments;break}}return b},__class__:t.entity.Me}),t.entity.Message=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.userId=a.user_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.createdAt=a.created_at,this.readCount=a.read_count,this.readUserIds=a.read_user_ids,null==a.is_unread_count_target?this.isUnreadCountTarget=!0:this.isUnreadCountTarget=a.is_unread_count_target,null==a.bot_message?this.isBotMessage=!1:this.isBotMessage=a.bot_message)},e["albero.entity.Message"]=t.entity.Message,t.entity.Message.__name__=["albero","entity","Message"],t.entity.Message.typeOf=function(a){switch(a){case 0:return t.entity.MessageType.system;case 1:return t.entity.MessageType.text;case 2:return t.entity.MessageType.stamp;case 3:return t.entity.MessageType.geo;case 4:return t.entity.MessageType.file;case 5:return t.entity.MessageType.textMultipleFile;case 7:return t.entity.MessageType.deleted;case 500:return t.entity.MessageType.yesOrNo;case 501:return t.entity.MessageType.yesOrNoReply;case 502:return t.entity.MessageType.selectOne;case 503:return t.entity.MessageType.selectOneReply;case 504:return t.entity.MessageType.todo;case 505:return t.entity.MessageType.todoDone;case 506:return t.entity.MessageType.yesOrNoClosed;case 507:return t.entity.MessageType.selectOneClosed;case 508:return t.entity.MessageType.todoClosed;case 600:return t.entity.MessageType.phoneCall;case 601:return t.entity.MessageType.phoneReceive;default:return t.entity.MessageType.unknown}},t.entity.Message.enumIndex=function(a){switch(a[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:return a[1];case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return 500+a[1]-7;case 16:case 17:return 600+a[1]-16;default:return-1}},t.entity.Message.typeString=function(a){return n.string(a)},t.entity.Message.prototype={__class__:t.entity.Message},t.entity.MessageType=e["albero.entity.MessageType"]={__ename__:["albero","entity","MessageType"],__constructs__:["system","text","stamp","geo","file","textMultipleFile","deleted","yesOrNo","yesOrNoReply","selectOne","selectOneReply","todo","todoDone","yesOrNoClosed","selectOneClosed","todoClosed","phoneCall","phoneReceive","unknown"]},t.entity.MessageType.system=["system",0],t.entity.MessageType.system.toString=f,t.entity.MessageType.system.__enum__=t.entity.MessageType,t.entity.MessageType.text=["text",1],t.entity.MessageType.text.toString=f,t.entity.MessageType.text.__enum__=t.entity.MessageType,t.entity.MessageType.stamp=["stamp",2],t.entity.MessageType.stamp.toString=f,t.entity.MessageType.stamp.__enum__=t.entity.MessageType,t.entity.MessageType.geo=["geo",3],t.entity.MessageType.geo.toString=f,t.entity.MessageType.geo.__enum__=t.entity.MessageType,t.entity.MessageType.file=["file",4],t.entity.MessageType.file.toString=f,t.entity.MessageType.file.__enum__=t.entity.MessageType,t.entity.MessageType.textMultipleFile=["textMultipleFile",5],t.entity.MessageType.textMultipleFile.toString=f,t.entity.MessageType.textMultipleFile.__enum__=t.entity.MessageType,t.entity.MessageType.deleted=["deleted",6],t.entity.MessageType.deleted.toString=f,t.entity.MessageType.deleted.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNo=["yesOrNo",7],t.entity.MessageType.yesOrNo.toString=f,t.entity.MessageType.yesOrNo.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNoReply=["yesOrNoReply",8],t.entity.MessageType.yesOrNoReply.toString=f,t.entity.MessageType.yesOrNoReply.__enum__=t.entity.MessageType,t.entity.MessageType.selectOne=["selectOne",9],t.entity.MessageType.selectOne.toString=f,t.entity.MessageType.selectOne.__enum__=t.entity.MessageType,t.entity.MessageType.selectOneReply=["selectOneReply",10],t.entity.MessageType.selectOneReply.toString=f,t.entity.MessageType.selectOneReply.__enum__=t.entity.MessageType,t.entity.MessageType.todo=["todo",11],t.entity.MessageType.todo.toString=f,t.entity.MessageType.todo.__enum__=t.entity.MessageType,t.entity.MessageType.todoDone=["todoDone",12],t.entity.MessageType.todoDone.toString=f,t.entity.MessageType.todoDone.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNoClosed=["yesOrNoClosed",13],t.entity.MessageType.yesOrNoClosed.toString=f,t.entity.MessageType.yesOrNoClosed.__enum__=t.entity.MessageType,t.entity.MessageType.selectOneClosed=["selectOneClosed",14],t.entity.MessageType.selectOneClosed.toString=f,t.entity.MessageType.selectOneClosed.__enum__=t.entity.MessageType,t.entity.MessageType.todoClosed=["todoClosed",15],t.entity.MessageType.todoClosed.toString=f,t.entity.MessageType.todoClosed.__enum__=t.entity.MessageType,t.entity.MessageType.phoneCall=["phoneCall",16],t.entity.MessageType.phoneCall.toString=f,t.entity.MessageType.phoneCall.__enum__=t.entity.MessageType,t.entity.MessageType.phoneReceive=["phoneReceive",17],t.entity.MessageType.phoneReceive.toString=f,t.entity.MessageType.phoneReceive.__enum__=t.entity.MessageType,t.entity.MessageType.unknown=["unknown",18],t.entity.MessageType.unknown.toString=f,t.entity.MessageType.unknown.__enum__=t.entity.MessageType,t.entity.MessageDeletion=function(a){null!=a&&(this.talkId=a[0],this.messageId=a[1])},e["albero.entity.MessageDeletion"]=t.entity.MessageDeletion,t.entity.MessageDeletion.__name__=["albero","entity","MessageDeletion"],t.entity.MessageDeletion.prototype={__class__:t.entity.MessageDeletion},t.entity.MessageReadStatus=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.readUserIds=a.read_user_ids,this.unreadUserIds=a.unread_user_ids)},e["albero.entity.MessageReadStatus"]=t.entity.MessageReadStatus,t.entity.MessageReadStatus.__name__=["albero","entity","MessageReadStatus"],t.entity.MessageReadStatus.prototype={__class__:t.entity.MessageReadStatus},t.entity.MessageReadStatusesUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.messageIds=a.message_ids,this.readUserIds=a.read_user_ids,this.messageIdsExcludingUnreadCountTargets=a.message_ids_excluding_unread_count_targets,null==this.messageIdsExcludingUnreadCountTargets&&(this.messageIdsExcludingUnreadCountTargets=new Array))},e["albero.entity.MessageReadStatusesUpdate"]=t.entity.MessageReadStatusesUpdate,t.entity.MessageReadStatusesUpdate.__name__=["albero","entity","MessageReadStatusesUpdate"],t.entity.MessageReadStatusesUpdate.prototype={__class__:t.entity.MessageReadStatusesUpdate},t.entity.MessagesOrder=e["albero.entity.MessagesOrder"]={__ename__:["albero","entity","MessagesOrder"],__constructs__:["asc","desc"]},t.entity.MessagesOrder.asc=["asc",0],t.entity.MessagesOrder.asc.toString=f,t.entity.MessagesOrder.asc.__enum__=t.entity.MessagesOrder,t.entity.MessagesOrder.desc=["desc",1],t.entity.MessagesOrder.desc.toString=f,t.entity.MessagesOrder.desc.__enum__=t.entity.MessagesOrder,t.entity.MessagesOrderProc=function(){},e["albero.entity.MessagesOrderProc"]=t.entity.MessagesOrderProc,t.entity.MessagesOrderProc.__name__=["albero","entity","MessagesOrderProc"],t.entity.MessagesOrderProc.orderToInt=function(a){switch(a[1]){case 0:return 1;case 1:return 2}},t.entity.PasswordExpiration=function(a){null!=a&&(this.expiration=a.expiration,this.warning=a.warning)},e["albero.entity.PasswordExpiration"]=t.entity.PasswordExpiration,t.entity.PasswordExpiration.__name__=["albero","entity","PasswordExpiration"],t.entity.PasswordExpiration.prototype={__class__:t.entity.PasswordExpiration},t.entity.Plan=function(a){null!=a&&(this.name=a.plan_name,this.trial=a.trial)},e["albero.entity.Plan"]=t.entity.Plan,t.entity.Plan.__name__=["albero","entity","Plan"],t.entity.Plan.prototype={__class__:t.entity.Plan},t.entity.Profile=function(a){if(null!=a&&(this.domainId=a.domain_id,this.userId=a.user_id,null!=a.item_values)){this.itemValues=new Array;var b,c=0;for(b=v.Boot.__cast(a.item_values,Array);c<b.length;){var d=b[c];++c,this.itemValues.push(new t.entity.ProfileItemValue(d))}}},e["albero.entity.Profile"]=t.entity.Profile,t.entity.Profile.__name__=["albero","entity","Profile"],t.entity.Profile.prototype={__class__:t.entity.Profile},t.entity.ProfileDefinition=function(a){if(null!=a&&(this.domainId=a.domain_id,null!=a.item_definitions)){this.itemDefinitions=new Array;var b,c=0;for(b=v.Boot.__cast(a.item_definitions,Array);c<b.length;){var d=b[c];++c,this.itemDefinitions.push(new t.entity.ProfileItemDefinition(d))}}},e["albero.entity.ProfileDefinition"]=t.entity.ProfileDefinition,t.entity.ProfileDefinition.__name__=["albero","entity","ProfileDefinition"],t.entity.ProfileDefinition.isSameProfileItemDefinitions=function(a,b){if(b.length!=a.length)return!1;for(var c=0,d=b.length;d>c;){var e=c++;if(b[e].profileItemId!=a[e].profileItemId)return!1}return!0},t.entity.ProfileDefinition.prototype={getVisibleItemDefinitions:function(a,b){return null==b&&(b=!1),null==a&&(a=!1),null==this.itemDefinitions?[]:this.itemDefinitions.filter(function(c){return c.visible&&(a||10==c.group)&&(!b||1!=c.profileItemId&&2!=c.profileItemId)?!0:!1})},__class__:t.entity.ProfileDefinition},t.entity.ProfileItemDefinition=function(a){this.locked=!1,this.visible=!0,null!=a&&(this.profileItemId=a.profile_item_id,this.group=a.group,this.name=a.name,this.valueType=a.value_type,null!=a.visible&&(this.visible=a.visible),null!=a.locked&&(this.locked=a.locked))},e["albero.entity.ProfileItemDefinition"]=t.entity.ProfileItemDefinition,t.entity.ProfileItemDefinition.__name__=["albero","entity","ProfileItemDefinition"],t.entity.ProfileItemDefinition.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},t.entity.ProfileItemDefinition.prototype={__class__:t.entity.ProfileItemDefinition},t.entity.ProfileItemValue=function(a){null!=a&&(this.profileItemId=a.profile_item_id,this.value=a.value,this.canonicalValue=a.canonical_value)},e["albero.entity.ProfileItemValue"]=t.entity.ProfileItemValue,t.entity.ProfileItemValue.__name__=["albero","entity","ProfileItemValue"],t.entity.ProfileItemValue.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},t.entity.ProfileItemValue.prototype={__class__:t.entity.ProfileItemValue},t.entity.PushNotificationSetting=function(a){return null==a?(this.enabled=!0,void(this.version=0)):(null==a.enabled?this.enabled=!0:this.enabled=a.enabled,void(this.version=a.version))},e["albero.entity.PushNotificationSetting"]=t.entity.PushNotificationSetting,t.entity.PushNotificationSetting.__name__=["albero","entity","PushNotificationSetting"],t.entity.PushNotificationSetting.createWithParams=function(a,b){var c=new t.entity.PushNotificationSetting;return c.enabled=a,c.version=b,c},t.entity.PushNotificationSetting.prototype={__class__:t.entity.PushNotificationSetting},t.entity.Question=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.recipientIds=a.assigned_user_ids,this.responses=this.createResponses(a.responses),this.listing=a.listing,this.closingType=t.entity.Question.typeOf(a.closing_type),this.maxResponseId=a.max_response_id,this.lastResponse=a.last_response,this.lastResponseUserId=a.last_response_user_id,this.createdAt=a.created_at,this.updatedAt=a.updated_at,this.responded=a.responded,this.closed=a.closed)},e["albero.entity.Question"]=t.entity.Question,t.entity.Question.__name__=["albero","entity","Question"],t.entity.Question.typeOf=function(a){switch(a){case 0:return t.entity.QuestionClosingType.any;case 1:return t.entity.QuestionClosingType.all;default:return t.entity.QuestionClosingType.unknown}},t.entity.Question.prototype={createResponses:function(a){var b=[];if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c,b.push(new t.entity.QuestionResponse(d))}return b},isCompleted:function(a){if(r.enumEq(this.type,t.entity.MessageType.todo)){if(r.enumEq(this.closingType,t.entity.QuestionClosingType.any)){if(null!=this.lastResponse&&"DONE"==this.responses[this.lastResponse].content)return!0}else{if(!this.responded)return!1;for(var b=0,c=this.responses;b<c.length;){var d=c[b];if(++b,t.Int64Helper.contains(d.userIds,a))return"DONE"==d.content?!0:!1}}return!1}return r.enumEq(this.closingType,t.entity.QuestionClosingType.any)?null!=this.lastResponse:this.responded},__class__:t.entity.Question},t.entity.QuestionResponse=function(a){null!=a&&(this.content=a.content,this.count=a.count,this.userIds=a.user_ids)},e["albero.entity.QuestionResponse"]=t.entity.QuestionResponse,t.entity.QuestionResponse.__name__=["albero","entity","QuestionResponse"],t.entity.QuestionResponse.prototype={__class__:t.entity.QuestionResponse},t.entity.QuestionClosingType=e["albero.entity.QuestionClosingType"]={__ename__:["albero","entity","QuestionClosingType"],__constructs__:["any","all","unknown"]},t.entity.QuestionClosingType.any=["any",0],t.entity.QuestionClosingType.any.toString=f,t.entity.QuestionClosingType.any.__enum__=t.entity.QuestionClosingType,t.entity.QuestionClosingType.all=["all",1],t.entity.QuestionClosingType.all.toString=f,t.entity.QuestionClosingType.all.__enum__=t.entity.QuestionClosingType,t.entity.QuestionClosingType.unknown=["unknown",2],t.entity.QuestionClosingType.unknown.toString=f,t.entity.QuestionClosingType.unknown.__enum__=t.entity.QuestionClosingType,t.entity.QuestionFromType=e["albero.entity.QuestionFromType"]={__ename__:["albero","entity","QuestionFromType"],__constructs__:["fromSelf","fromOther"]},t.entity.QuestionFromType.fromSelf=["fromSelf",0],t.entity.QuestionFromType.fromSelf.toString=f,t.entity.QuestionFromType.fromSelf.__enum__=t.entity.QuestionFromType,t.entity.QuestionFromType.fromOther=["fromOther",1],t.entity.QuestionFromType.fromOther.toString=f,t.entity.QuestionFromType.fromOther.__enum__=t.entity.QuestionFromType,t.entity.QuestionFilter=e["albero.entity.QuestionFilter"]={__ename__:["albero","entity","QuestionFilter"],__constructs__:["onlyClosed","onlyUnclosed","noFilter"]},t.entity.QuestionFilter.onlyClosed=["onlyClosed",0],t.entity.QuestionFilter.onlyClosed.toString=f,t.entity.QuestionFilter.onlyClosed.__enum__=t.entity.QuestionFilter,t.entity.QuestionFilter.onlyUnclosed=["onlyUnclosed",1],t.entity.QuestionFilter.onlyUnclosed.toString=f,t.entity.QuestionFilter.onlyUnclosed.__enum__=t.entity.QuestionFilter,t.entity.QuestionFilter.noFilter=["noFilter",2],t.entity.QuestionFilter.noFilter.toString=f,t.entity.QuestionFilter.noFilter.__enum__=t.entity.QuestionFilter,t.entity.Quota=function(a){null!=a&&(this.msgRetentionPeriod=a.msg_retention_period,this.msgFileSize=a.msg_file_size,this.maxMessageContentLength=a.max_message_content_length)},e["albero.entity.Quota"]=t.entity.Quota,t.entity.Quota.__name__=["albero","entity","Quota"],t.entity.Quota.prototype={__class__:t.entity.Quota},t.entity.SearchAttachmentsResult=function(a){if(null!=a&&(this.total=a.total,this.marker=a.marker,this.nextMarker=a.next_marker,this.contents=new Array,null!=a.contents)){var b,c=0;for(b=v.Boot.__cast(a.contents,Array);c<b.length;){var d=b[c];++c,this.contents.push(new t.entity.FileInfo(d))}}},e["albero.entity.SearchAttachmentsResult"]=t.entity.SearchAttachmentsResult,t.entity.SearchAttachmentsResult.__name__=["albero","entity","SearchAttachmentsResult"],t.entity.SearchAttachmentsResult.prototype={__class__:t.entity.SearchAttachmentsResult},t.entity.SearchMessagesResult=function(a){if(null!=a&&(this.total=a.total,this.marker=a.marker,this.nextMarker=a.next_marker,this.contents=new Array,null!=a.contents)){var b,c=0;for(b=v.Boot.__cast(a.contents,Array);c<b.length;){var d=b[c];++c,this.contents.push(new t.entity.HitContext(d))}}},e["albero.entity.SearchMessagesResult"]=t.entity.SearchMessagesResult,t.entity.SearchMessagesResult.__name__=["albero","entity","SearchMessagesResult"],t.entity.SearchMessagesResult.prototype={
__class__:t.entity.SearchMessagesResult},t.entity.SearchParams=function(a){null!=a&&(null!=a.domain_id_str&&(this.domainId=t.Int64Helper.makeFromIdStr(a.domain_id_str)),null!=a.talk_id_str&&(this.talkId=t.Int64Helper.makeFromIdStr(a.talk_id_str)),this.keyword=a.keyword,null==a.search_type||"メッセージ"==a.search_type?this.searchType=t.entity.SearchType.MESSAGES:this.searchType=t.entity.SearchType.ATTACHMENTS,this.sinceText=a.since,this.untilText=a.until,null!=a.from_id_str&&(this.fromUserId=t.Int64Helper.makeFromIdStr(a.from_id_str)))},e["albero.entity.SearchParams"]=t.entity.SearchParams,t.entity.SearchParams.__name__=["albero","entity","SearchParams"],t.entity.SearchParams.dateQueryToText=function(a,b){if(null==a)return b;switch(a){case"t":return"今日";case"-1d":return"昨日";case"-3d":return"3日前";default:return p.replace(a,"-","/")}},t.entity.SearchParams.prototype={toProps:function(){var a={};null!=this.domainId&&(a.domain_id_str=t.Int64Helper.idStr(this.domainId)),null!=this.talkId&&(a.talk_id_str=t.Int64Helper.idStr(this.talkId)),a.keyword=this.keyword;var b=this.searchType;switch(b[1]){case 0:a.search_type="メッセージ";break;case 1:a.search_type="ファイル"}return a.since=this.sinceText,a.until=this.untilText,null!=this.fromUserId&&(a.from_id_str=t.Int64Helper.idStr(this.fromUserId)),a},copy:function(){return new t.entity.SearchParams(this.toProps())},eq:function(a){return(this.domainId==a.domainId||t.Int64Helper.eq(this.domainId,a.domainId))&&(this.talkId==a.talkId||t.Int64Helper.eq(this.talkId,a.talkId))?this.keyword!=a.keyword?!1:r.enumEq(this.searchType,a.searchType)?this.sinceText!=a.sinceText?!1:this.untilText!=a.untilText?!1:this.fromUserId==a.fromUserId||t.Int64Helper.eq(this.fromUserId,a.fromUserId)?!0:!1:!1:!1},getQueryText:function(){var a=new Array;return null!=this.keyword&&0!=this.keyword.length&&a.push(this.keyword),null!=this.sinceText&&a.push("since:"+this.sinceText),null!=this.untilText&&a.push("until:"+this.untilText),null!=this.fromUserId&&a.push("from:"+this.fromUserId.toString()),a.join(" ")},getPeriodText:function(){return""+t.entity.SearchParams.dateQueryToText(this.sinceText,"")+"~"+t.entity.SearchParams.dateQueryToText(this.untilText,"")},__class__:t.entity.SearchParams},t.entity.SearchType=e["albero.entity.SearchType"]={__ename__:["albero","entity","SearchType"],__constructs__:["MESSAGES","ATTACHMENTS"]},t.entity.SearchType.MESSAGES=["MESSAGES",0],t.entity.SearchType.MESSAGES.toString=f,t.entity.SearchType.MESSAGES.__enum__=t.entity.SearchType,t.entity.SearchType.ATTACHMENTS=["ATTACHMENTS",1],t.entity.SearchType.ATTACHMENTS.toString=f,t.entity.SearchType.ATTACHMENTS.__enum__=t.entity.SearchType,t.entity.Solution=function(a){null!=a&&(this.solutionId=a.solution_id,this.name=a.name,null!=a.link&&(this.link=new t.entity.SolutionLink(a.link)),null!=a.plugin&&(this.plugin=new t.entity.SolutionPlugin(a.plugin)))},e["albero.entity.Solution"]=t.entity.Solution,t.entity.Solution.__name__=["albero","entity","Solution"],t.entity.Solution.getSolutionType=function(a){switch(a){case 1:return t.entity.SolutionType.PhotoViewTrial;case 2:return t.entity.SolutionType.PhotoView;case 3:return t.entity.SolutionType.MultiView;case 4:return t.entity.SolutionType.KeywordWatching;default:return t.entity.SolutionType.Unknown}},t.entity.Solution.prototype={__class__:t.entity.Solution},t.entity.SolutionLink=function(a){null!=a&&(this.iconUrl=a.icon_url,this.url=a.url)},e["albero.entity.SolutionLink"]=t.entity.SolutionLink,t.entity.SolutionLink.__name__=["albero","entity","SolutionLink"],t.entity.SolutionLink.prototype={__class__:t.entity.SolutionLink},t.entity.SolutionPlugin=function(a){null!=a&&(this.url=a.url,this.loaded=!1)},e["albero.entity.SolutionPlugin"]=t.entity.SolutionPlugin,t.entity.SolutionPlugin.__name__=["albero","entity","SolutionPlugin"],t.entity.SolutionPlugin.prototype={__class__:t.entity.SolutionPlugin},t.entity.SolutionType=e["albero.entity.SolutionType"]={__ename__:["albero","entity","SolutionType"],__constructs__:["PhotoViewTrial","PhotoView","MultiView","KeywordWatching","Unknown"]},t.entity.SolutionType.PhotoViewTrial=["PhotoViewTrial",0],t.entity.SolutionType.PhotoViewTrial.toString=f,t.entity.SolutionType.PhotoViewTrial.__enum__=t.entity.SolutionType,t.entity.SolutionType.PhotoView=["PhotoView",1],t.entity.SolutionType.PhotoView.toString=f,t.entity.SolutionType.PhotoView.__enum__=t.entity.SolutionType,t.entity.SolutionType.MultiView=["MultiView",2],t.entity.SolutionType.MultiView.toString=f,t.entity.SolutionType.MultiView.__enum__=t.entity.SolutionType,t.entity.SolutionType.KeywordWatching=["KeywordWatching",3],t.entity.SolutionType.KeywordWatching.toString=f,t.entity.SolutionType.KeywordWatching.__enum__=t.entity.SolutionType,t.entity.SolutionType.Unknown=["Unknown",4],t.entity.SolutionType.Unknown.toString=f,t.entity.SolutionType.Unknown.__enum__=t.entity.SolutionType,t.entity.StampSet=function(){},e["albero.entity.StampSet"]=t.entity.StampSet,t.entity.StampSet.__name__=["albero","entity","StampSet"],t.entity.StampSet.prototype={__class__:t.entity.StampSet},t.entity.Talk=function(a){null!=a&&(this.id=a.talk_id,this.domainId=a.domain_id,this.type=this.typeOf(a.type),this.name=a.talk_name,this.iconUrl=a.icon_url,this.userIds=a.user_ids,this.updatedAt=a.updated_at,this.leftUsers=this.getUsers(a.left_users),this.groupTalkSettings=this.getGroupTalkSetting(a.settings))},e["albero.entity.Talk"]=t.entity.Talk,t.entity.Talk.__name__=["albero","entity","Talk"],t.entity.Talk.prototype={typeOf:function(a){switch(a){case 1:return t.entity.TalkType.PairTalk;case 2:return t.entity.TalkType.GroupTalk;default:return t.entity.TalkType.Unknown}},getUsers:function(a){if(null==a)return null;for(var b=new Array,c=0;c<a.length;){var d=a[c];++c,b.push(new t.entity.DomainUser(d))}return b},getGroupTalkSetting:function(a){return null==a?x.ds.Option.None:x.ds.Option.Some(new t.entity.GroupTalkSettings(a))},__class__:t.entity.Talk},t.entity.GroupTalkSettings=function(a){null!=a&&(this.allowDisplayPastMessages=!!a.allow_display_past_messages)},e["albero.entity.GroupTalkSettings"]=t.entity.GroupTalkSettings,t.entity.GroupTalkSettings.__name__=["albero","entity","GroupTalkSettings"],t.entity.GroupTalkSettings.createDefault=function(){var a=new t.entity.GroupTalkSettings;return a.allowDisplayPastMessages=!0,a},t.entity.GroupTalkSettings.prototype={__class__:t.entity.GroupTalkSettings},t.entity.TalkType=e["albero.entity.TalkType"]={__ename__:["albero","entity","TalkType"],__constructs__:["Unknown","PairTalk","GroupTalk"]},t.entity.TalkType.Unknown=["Unknown",0],t.entity.TalkType.Unknown.toString=f,t.entity.TalkType.Unknown.__enum__=t.entity.TalkType,t.entity.TalkType.PairTalk=["PairTalk",1],t.entity.TalkType.PairTalk.toString=f,t.entity.TalkType.PairTalk.__enum__=t.entity.TalkType,t.entity.TalkType.GroupTalk=["GroupTalk",2],t.entity.TalkType.GroupTalk.toString=f,t.entity.TalkType.GroupTalk.__enum__=t.entity.TalkType,t.entity.TalkPack=function(a,b){this.talk=a,this.status=b},e["albero.entity.TalkPack"]=t.entity.TalkPack,t.entity.TalkPack.__name__=["albero","entity","TalkPack"],t.entity.TalkPack.compareTalkOrderingTimestamp=function(a,b){var c=a.getTalkOrderingTimestamp(),d=b.getTalkOrderingTimestamp();return x.Int64.compare(c,d)},t.entity.TalkPack.compareTalkConsideredFavorite=function(a,b){var c=a.getTalkOrderInFavorites(),d=b.getTalkOrderInFavorites();return null!=c&&null!=d?t.entity.TalkPack.compareTalkOrderingTimestamp(a,b):null!=c?1:null!=d?-1:t.entity.TalkPack.compareTalkOrderingTimestamp(a,b)},t.entity.TalkPack.prototype={getTalkOrderingTimestamp:function(){return null!=this.status&&null!=this.status.talkOrderingTimestamp?this.status.talkOrderingTimestamp:this.talk.updatedAt},getTalkOrderInFavorites:function(){return null!=this.status?this.status.orderInFavorites:null},__class__:t.entity.TalkPack},t.entity.TalkPaneSelection=function(a,b){this.paneType=a,this.talkSelection=b},e["albero.entity.TalkPaneSelection"]=t.entity.TalkPaneSelection,t.entity.TalkPaneSelection.__name__=["albero","entity","TalkPaneSelection"],t.entity.TalkPaneSelection.toPanePrefix=function(a){switch(a[1]){case 0:return"";case 1:return"multi1-";case 2:return"multi2-";case 3:return"multi3-"}},t.entity.TalkPaneSelection.getPaneType=function(a){switch(a){case 0:return t.entity.PaneType.SingleTalkPane;case 1:return t.entity.PaneType.MultiTalkPane1;case 2:return t.entity.PaneType.MultiTalkPane2;case 3:return t.entity.PaneType.MultiTalkPane3;default:return null}},t.entity.TalkPaneSelection.getMultiPaneType=function(a){switch(a){case 0:return t.entity.PaneType.MultiTalkPane1;case 1:return t.entity.PaneType.MultiTalkPane2;case 2:return t.entity.PaneType.MultiTalkPane3;default:return t.entity.PaneType.MultiTalkPane1}},t.entity.TalkPaneSelection.prototype={__class__:t.entity.TalkPaneSelection},t.entity.TalkSelection=e["albero.entity.TalkSelection"]={__ename__:["albero","entity","TalkSelection"],__constructs__:["NotSelected","TalkSelected","AnnouncementsSelected"]},t.entity.TalkSelection.NotSelected=["NotSelected",0],t.entity.TalkSelection.NotSelected.toString=f,t.entity.TalkSelection.NotSelected.__enum__=t.entity.TalkSelection,t.entity.TalkSelection.TalkSelected=function(a,b){var c=["TalkSelected",1,a,b];return c.__enum__=t.entity.TalkSelection,c.toString=f,c},t.entity.TalkSelection.AnnouncementsSelected=["AnnouncementsSelected",2],t.entity.TalkSelection.AnnouncementsSelected.toString=f,t.entity.TalkSelection.AnnouncementsSelected.__enum__=t.entity.TalkSelection,t.entity.PaneType=e["albero.entity.PaneType"]={__ename__:["albero","entity","PaneType"],__constructs__:["SingleTalkPane","MultiTalkPane1","MultiTalkPane2","MultiTalkPane3"]},t.entity.PaneType.SingleTalkPane=["SingleTalkPane",0],t.entity.PaneType.SingleTalkPane.toString=f,t.entity.PaneType.SingleTalkPane.__enum__=t.entity.PaneType,t.entity.PaneType.MultiTalkPane1=["MultiTalkPane1",1],t.entity.PaneType.MultiTalkPane1.toString=f,t.entity.PaneType.MultiTalkPane1.__enum__=t.entity.PaneType,t.entity.PaneType.MultiTalkPane2=["MultiTalkPane2",2],t.entity.PaneType.MultiTalkPane2.toString=f,t.entity.PaneType.MultiTalkPane2.__enum__=t.entity.PaneType,t.entity.PaneType.MultiTalkPane3=["MultiTalkPane3",3],t.entity.PaneType.MultiTalkPane3.toString=f,t.entity.PaneType.MultiTalkPane3.__enum__=t.entity.PaneType,t.entity.TalkPushNotificationEvent=function(a){null!=a&&(this.domainId=a.domain_id,this.talkId=a.talk_id,this.version=a.version)},e["albero.entity.TalkPushNotificationEvent"]=t.entity.TalkPushNotificationEvent,t.entity.TalkPushNotificationEvent.__name__=["albero","entity","TalkPushNotificationEvent"],t.entity.TalkPushNotificationEvent.prototype={__class__:t.entity.TalkPushNotificationEvent},t.entity.TalkStatus=function(a){this.unreadCount=0,null!=a&&(this.id=a.talk_id,null!=a.unread_count?this.unreadCount=a.unread_count:this.unreadCount=0,this.maxMessageId=a.max_message_id,null!=a.max_message?this.maxMessage=new t.entity.Message(a.max_message):this.maxMessage=null,this.maxReadMessageId=a.max_read_message_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id,this.talkOrderingTimestamp=a.talk_ordering_timestamp,this.orderInFavorites=a.order_in_favorites,this.favoriteVersion=a.favorite_version,this.pushNotificationSetting=new t.entity.PushNotificationSetting(a.push_notification))},e["albero.entity.TalkStatus"]=t.entity.TalkStatus,t.entity.TalkStatus.__name__=["albero","entity","TalkStatus"],t.entity.TalkStatus.prototype={update:function(a){var b=this,c=!1;return this.needIdUpdate(this.maxEveryoneReadMessageId,a.maxEveryoneReadMessageId)&&(this.maxEveryoneReadMessageId=a.maxEveryoneReadMessageId,c=!0),t.OptionHelper.foreach(a.maxReadMessageId,function(a){b.needIdUpdate(b.maxReadMessageId,a)&&(b.maxReadMessageId=a,c=!0)}),c},needIdUpdate:function(a,b){return null!=b&&(null==a||x.Int64.compare(a,b)<0)},__class__:t.entity.TalkStatus},t.entity.TalkStatusHelper=function(){},e["albero.entity.TalkStatusHelper"]=t.entity.TalkStatusHelper,t.entity.TalkStatusHelper.__name__=["albero","entity","TalkStatusHelper"],t.entity.TalkStatusHelper.isNotificationDisabled=function(a){return null!=a&&null!=a.pushNotificationSetting&&!a.pushNotificationSetting.enabled},t.entity.TalkStatusHelper.isFavoriteTalk=function(a){return null!=a&&null!=a.orderInFavorites},t.entity.TalkStatusHelper.isUnreadMesasgeExisted=function(a){return null==a?!1:null==a.maxMessage?!1:null==a.maxReadMessageId?!0:x.Int64.compare(a.maxMessage.id,a.maxReadMessageId)>0},t.entity.TalkStatusUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id,this.maxReadMessageId=t.OptionHelper.option(a.max_read_message_id))},e["albero.entity.TalkStatusUpdate"]=t.entity.TalkStatusUpdate,t.entity.TalkStatusUpdate.__name__=["albero","entity","TalkStatusUpdate"],t.entity.TalkStatusUpdate.prototype={__class__:t.entity.TalkStatusUpdate},t.entity.UserIdentifier=function(a){null!=a&&(null!=a.user_id&&(this.userId=a.user_id),null!=a.email&&(this.email=a.email),null!=a.sub_email&&(this.subEmail=a.sub_email),null!=a.group_alias&&(this.groupAlias=a.group_alias),null!=a.signin_id&&(this.signinId=a.signin_id))},e["albero.entity.UserIdentifier"]=t.entity.UserIdentifier,t.entity.UserIdentifier.__name__=["albero","entity","UserIdentifier"],t.entity.UserIdentifier.prototype={__class__:t.entity.UserIdentifier},t.js={},t.js.Base64=function(){},e["albero.js.Base64"]=t.js.Base64,t.js.Base64.__name__=["albero","js","Base64"],t.js.Base64.initCodes=function(){for(var a=new Array,b=0,c=t.js.Base64.BASE64.length;c>b;){var d=b++;a[t.js.Base64.BASE64.charCodeAt(d)]=d}return a},t.js.Base64.encode=function(a){for(var b=a,c=0,d=b.length-2,e=new o,f=t.js.Base64.BASE64;d>c;){var g=b.get(c++),h=b.get(c++),i=b.get(c++);e.add(f.charAt(g>>2)),e.add(f.charAt(63&(g<<4|h>>4))),e.add(f.charAt(63&(h<<2|i>>6))),e.add(f.charAt(63&i))}if(c==d){var j=b.get(c++),k=b.get(c++);e.add(f.charAt(j>>2)),e.add(f.charAt(63&(j<<4|k>>4))),e.add(f.charAt(k<<2&63))}else if(c==d+1){var l=b.get(c++);e.add(f.charAt(l>>2)),e.add(f.charAt(l<<4&63))}var m=e.b,n=m.length%4;switch(n){case 2:m+="==";break;case 3:m+="="}return m},t.js.Base64.decode=function(a){var b=a.length-1;"="==a.charAt(b)&&("="==a.charAt(b-1)&&b--,a=i.substr(a,0,b));var c=a.length,d=a,e=t.js.Base64.CODES;null==e&&(e=t.js.Base64.initCodes(),t.js.Base64.CODES=e);var f,g=0,h=3&c;f=3*(c>>2)+(h>=2?h-1:0);for(var j=g+(c-h),k=x.io.Bytes.alloc(f),l=0;j>g;){var m=e[p.fastCodeAt(d,g++)],n=e[p.fastCodeAt(d,g++)];k.set(l++,m<<2|n>>4);var o=e[p.fastCodeAt(d,g++)];k.set(l++,n<<4|o>>2);var q=e[p.fastCodeAt(d,g++)];k.set(l++,o<<6|q)}if(h>=2){var r=e[p.fastCodeAt(d,g++)],s=e[p.fastCodeAt(d,g++)];if(k.set(l++,r<<2|s>>4),3==h){var u=e[p.fastCodeAt(d,g++)];k.set(l++,s<<4|u>>2)}}return k},t.js.LocalStorage=function(a){this.isDirty=!1,this.key=a},e["albero.js.LocalStorage"]=t.js.LocalStorage,t.js.LocalStorage.__name__=["albero","js","LocalStorage"],t.js.LocalStorage.getLocalStorage=function(){var a=null;return a=v.Browser.getLocalStorage()},t.js.LocalStorage.prototype={load:function(){var a=this.val();if(null==a||""==a)return null;var b=null;try{b=x.Unserializer.run(a),this.isDirty=!1}catch(c){u._w(u.dateStr(),c,"","","","")}return b},save:function(a){try{this.val(x.Serializer.run(a)),this.isDirty=!1}catch(b){u._w(u.dateStr(),b,"","","","")}},setDirtyFlag:function(){0==this.isDirty&&(this.val(""),this.isDirty=!0)},val:function(a){var b=t.js.LocalStorage.getLocalStorage();return null!=b&&(null==a?a=b.getItem(this.key):""==a?b.removeItem(this.key):b.setItem(this.key,a)),a},__class__:t.js.LocalStorage};var u=a.AlberoLog=function(){};e.AlberoLog=u,u.__name__=["AlberoLog"],u._nop=function(){},u.dateStr=function(){return"["+function(a){var b,c=new Date;return b=i.dateStr(c)}(this)+"] "},t.js.NFKCTextSearch=function(a,b,c){this.ignoreCase=b,this.normalizeFunc=c,b&&(a=a.toUpperCase()),this.normalizedPattern=c(a)},e["albero.js.NFKCTextSearch"]=t.js.NFKCTextSearch,t.js.NFKCTextSearch.__name__=["albero","js","NFKCTextSearch"],t.js.NFKCTextSearch.prototype={search:function(a){var b=new o,c=new Array;this.ignoreCase&&(a=a.toUpperCase()),this.normalize(a,b,c);for(var d,e=0,f=new Array,g=b.b;-1!=(d=g.indexOf(this.normalizedPattern,e));){e=d+this.normalizedPattern.length;for(var h=c[d],i=c[e-1],j=null,k=e,l=c.length;l>k;){var m=k++;if(j=c[m],i!=j)break;j=null}null==j&&(j=a.length),f.push(new t.js.HitSpan(h,j))}return f},normalize:function(a,b,c){for(var d=a.length,e=new o,f=0,g=0;d>g;){var h=g++,i=e.b.length,j=e.b,k=j+a.charAt(h),l=this.normalizeFunc(k);if(k!=l)if(p.startsWith(l,j)){b.add(j.substring(0,i)),e=new o,e.add(l.substring(i,l.length));for(var m=0;i>m;){m++;c.push(f)}f=h}else e=new o,null==l?e.b+="null":e.b+=""+l;else{b.b+=n.string(e),e=new o,e.add(a.charAt(h));for(var q=0;i>q;){q++;c.push(f)}f=h}}null==e.b?b.b+="null":b.b+=""+e.b;for(var r=0,s=e.b.length;s>r;){r++;c.push(f)}},__class__:t.js.NFKCTextSearch},t.js.HitSpan=function(a,b){this.start=a,this.end=b},e["albero.js.HitSpan"]=t.js.HitSpan,t.js.HitSpan.__name__=["albero","js","HitSpan"],t.js.HitSpan.prototype={__class__:t.js.HitSpan},t.js.TextCanonicalizer=function(){},e["albero.js.TextCanonicalizer"]=t.js.TextCanonicalizer,t.js.TextCanonicalizer.__name__=["albero","js","TextCanonicalizer"],t.js.TextCanonicalizer.canonicalize=function(a,b){return t.js.TextCanonicalizer.basicLatinAlphabetToUpperCase(t.js.TextCanonicalizer.hiraganaToKatakana(b(t.js.TextCanonicalizer.eraseInvisible(a))))},t.js.TextCanonicalizer.basicLatinAlphabetToUpperCase=function(a){return a.toUpperCase()},t.js.TextCanonicalizer.hiraganaToKatakana=function(a){for(var b=0,c="",d=0,e=a.length;e>d;){var f=d++,g=i.cca(a,f);g>=t.js.TextCanonicalizer.HIRAGANA_SMALL_A&&g<=t.js.TextCanonicalizer.HIRAGANA_NN&&(c+=a.substring(b,f),c+=String.fromCharCode(g+(t.js.TextCanonicalizer.KATAKANA_SMALL_A-t.js.TextCanonicalizer.HIRAGANA_SMALL_A)),b=f+1)}return c+=a.substring(b,a.length)},t.js.TextCanonicalizer.normalize=function(a){return a.normalize("NFKC")},t.js.TextCanonicalizer.assureNormalize=function(a){a(t.js.TextCanonicalizer.normalize)},t.js.TextCanonicalizer.eraseInvisible=function(a){var b=new h("[\\u0000-\\u0020　]","g");return b.replace(a,"")},t.js.WebSocket=function(a){this.ws=new WebSocket(a),J.websocketsbinary&&(this.ws.binaryType="arraybuffer"),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onerror=d(this,this.onError),this.ws.onclose=d(this,this.onClose)},e["albero.js.WebSocket"]=t.js.WebSocket,t.js.WebSocket.__name__=["albero","js","WebSocket"],t.js.WebSocket.prototype={onOpen:function(a){u._i(u.dateStr(),"WebSocket opened.","","","",""),null!=this.onopen&&this.onopen()},onMessage:function(a){if(null!=this.onmessage){var b=null;b=J.websocketsbinary?x.io.Bytes.ofData(new Uint8Array(a.data)):t.js.Base64.decode(a.data),this.onmessage(b)}},onError:function(a){u._e(u.dateStr(),"WebSocket error. event:",a,"","",""),null!=this.onerror&&this.onerror()},onClose:function(a){u._i(u.dateStr(),"WebSocket closed. event:%s reason:%s wasClean:%s",a.code,a.reason,a.wasClean,""),null!=this.onclose&&this.onclose(a.code,a.reason,a.wasClean)},close:function(){this.ws.close()},send:function(a){J.websocketsbinary?this.ws.send(new Uint8Array(a.b.slice()).buffer):this.ws.send(t.js.Base64.encode(a))},isClosed:function(){return null==this.ws||3==this.ws.readyState},__class__:t.js.WebSocket},t.mediator={},t.mediator.helper={},t.mediator.helper.DomainHelper=function(){},e["albero.mediator.helper.DomainHelper"]=t.mediator.helper.DomainHelper,t.mediator.helper.DomainHelper.__name__=["albero","mediator","helper","DomainHelper"],t.mediator.helper.DomainHelper.isSaveAllowedChanged=function(a,b){return t.mediator.helper.DomainHelper.isSaveAllowed(a)!=t.mediator.helper.DomainHelper.isSaveAllowed(b)},t.mediator.helper.DomainHelper.isForwardTypeChanged=function(a,b){return null==a||a.setting.allowForwardMessageType!=b.setting.allowForwardMessageType},t.mediator.helper.DomainHelper.isSolutionChanged=function(a,b){var c=t.mediator.helper.DomainHelper.getSolutionIds(a),d=t.mediator.helper.DomainHelper.getSolutionIds(b);if(null==c&&null==d)return!1;if(null==c||null==d)return!0;if(c.length!=d.length)return!0;for(var e=0,f=c.length;f>e;){var g=e++;if(c[g]!=d[g])return!0}return!1},t.mediator.helper.DomainHelper.getSolutionIds=function(a){return null==a||null==a.contract?null:a.contract.solutionIds},t.mediator.helper.DomainHelper.isSaveAllowed=function(a){return null==a?!0:null==a.setting.allowSaveAttachments?a.setting.allowSaveAttachmentsToDevice:null==electronHelper.electron?a.setting.allowSaveAttachments.web:a.setting.allowSaveAttachments.desktop},t.mediator.helper.DomainHelper.isChangedContractTreeEnabled=function(a,b){return t.entity.Domain.isChangedContractTreeEnabled(a,b)},t.mediator.helper.DomainHelper.isDepartmentEnabled=function(a){return t.entity.Domain.isDepartmentEnabled(a)},t.mediator.helper.DomainHelper.isAllowListUser=function(a){return t.entity.Domain.isAllowListUser(a)},t.mediator.helper.DomainHelper.isAllowReadAnnouncement=function(a){return null!=a&&!!a.role.allowReadAnnouncements},s.interfaces.IProxy=function(){},e["puremvc.interfaces.IProxy"]=s.interfaces.IProxy,s.interfaces.IProxy.__name__=["puremvc","interfaces","IProxy"],s.interfaces.IProxy.prototype={__class__:s.interfaces.IProxy},s.patterns.proxy={},s.patterns.proxy.Proxy=function(a,b){s.patterns.observer.Notifier.call(this),null!=a?this.proxyName=a:this.proxyName=s.patterns.proxy.Proxy.NAME,null!=b&&this.setData(b)},e["puremvc.patterns.proxy.Proxy"]=s.patterns.proxy.Proxy,s.patterns.proxy.Proxy.__name__=["puremvc","patterns","proxy","Proxy"],s.patterns.proxy.Proxy.__interfaces__=[s.interfaces.IProxy],s.patterns.proxy.Proxy.__super__=s.patterns.observer.Notifier,s.patterns.proxy.Proxy.prototype=b(s.patterns.observer.Notifier.prototype,{getProxyName:function(){return this.proxyName},setData:function(a){this.data=a},getData:function(){return this.data},onRegister:function(){},onRemove:function(){},__class__:s.patterns.proxy.Proxy}),t.proxy={},t.proxy.AlberoBroadcastProxy=function(){s.patterns.proxy.Proxy.call(this,"broadcast")},e["albero.proxy.AlberoBroadcastProxy"]=t.proxy.AlberoBroadcastProxy,t.proxy.AlberoBroadcastProxy.__name__=["albero","proxy","AlberoBroadcastProxy"],t.proxy.AlberoBroadcastProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AlberoBroadcastProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{handleNotification:function(a,b,c){var d=this;switch(a){case"notify_update_user":if(b instanceof Array&&null==b.__enum__){var e=new t.entity.DomainUser(b[1]);this.dataStore.setUserIfLatest(null,e)}else{var f=new t.entity.Me(b);u._d(u.dateStr(),"Current user updated. user:",f,"","",""),this.dataStore.setMe(f)}c();break;case"notify_update_domain_users":for(var g=b,h=0;h<g.length;){var i=g[h];++h;var j=this.dataStore.getDomain(i);null!=j&&j.setting.contactTreeEnabled&&this.departmentStore.clearDomainDepartmentUsers(i)}this.sendNotification(a,b),c();break;case"notify_update_department_tree":var k=b;this.departmentStore.clearDomainDepartment(k),this.api.getDepartmentTree(k),this.sendNotification(a,k),c();break;case"notify_update_department_users":var l=b;this.departmentStore.clearDomainDepartmentUsers(l),this.api.getUsers(l,this.dataStore.getFriendsOrAcquaintances(l).map(function(a){return a.id})),this.api.getMe(),this.sendNotification(a,l),c();break;case"notify_add_friend":var m=new t.entity.DomainUser(b[1]);this.dataStore.addFriend(m),this.sendNotification(a,m),c();break;case"notify_add_acquaintance":var n=new t.entity.DomainUser(b[1]);this.dataStore.addAcquaintance(n),this.sendNotification(a,n),c();break;case"notify_join_domain":var o=this.dataStore.setDomainIfLatest(new t.entity.Domain(b));t.mediator.helper.DomainHelper.isAllowReadAnnouncement(o)&&this.api.getAnnouncementStatus(o.id),this.sendNotification(a,[null,o]),c();break;case"notify_update_domain":var p=new t.entity.Domain(b),q=this.dataStore.getDomain(p.id),r=this.dataStore.setDomainIfLatest(p);if(null!=q&&t.mediator.helper.DomainHelper.isAllowReadAnnouncement(q)&&!t.mediator.helper.DomainHelper.isAllowReadAnnouncement(r)){this.dataStore.removeAnnouncementStatus(q.id);var s=new t.entity.AnnouncementStatusUpdate;s.domainId=r.id,this.sendNotification("notify_update_announcement_status",s),this.settings.clearSelectedTalkIfMatch(t.entity.TalkSelection.AnnouncementsSelected)}if(!t.mediator.helper.DomainHelper.isAllowReadAnnouncement(q)&&t.mediator.helper.DomainHelper.isAllowReadAnnouncement(r)&&this.api.getAnnouncementStatus(r.id),t.entity.Domain.isChangedContractTreeEnabled(q,r)&&!t.entity.Domain.isDepartmentEnabled(r)){var v=r.id;this.departmentStore.clearDomainDepartment(v),this.dataStore.clearUsersDepartments(v)}this.sendNotification(a,[q,r]),c();break;case"notify_add_domain_invite":var w=new t.entity.DomainInvite(b);this.dataStore.setDomainInvite(w),this.sendNotification(a,w),c();break;case"notify_create_pair_talk":case"notify_create_group_talk":var y=new t.entity.Talk(b);this.dataStore.setTalk(y),this.newTalkStatusByTalk(y),this.sendNotification(a,y),c();break;case"notify_add_talkers":var z=new t.entity.Talk(b);null==this.dataStore.getTalk(z.id)&&this.sendNotification("notify_add_talkers_including_me",z),this.dataStore.setTalk(z),this.sendNotification(a,z),c();break;case"notify_update_group_talk":case"notify_delete_talker":var A=new t.entity.Talk(b);this.dataStore.setTalk(A),this.sendNotification(a,A),c();break;case"notify_create_message":var B=new t.entity.Message(b),C=this.newTalkStatusByMessage(B);null!=C&&this.sendNotification("notify_update_local_talk_status",C);var D=B.type;switch(D[1]){case 17:this.sendNotification("phone_call_connected",B.content),this.sendNotification(a,B),c();break;case 7:case 9:case 11:x.Timer.delay(function(){var b=d.dataStore.getTalk(B.talkId);null!=b?d.sendNotification("ReloadData",t.command.ReloadDataType.Question(B.id,function(b){d.sendNotification(a,B),c()})):(d.sendNotification(a,B),c())},500);break;case 8:case 10:case 12:case 13:case 14:case 15:x.Timer.delay(function(){var b=B.content.in_reply_to,e=d.dataStore.getTalk(B.talkId);null!=e&&null!=d.dataStore.getQuestion(b)?d.sendNotification("ReloadData",t.command.ReloadDataType.Question(b,function(b){d.sendNotification(a,B),c()})):(d.sendNotification(a,B),c())},500);break;case 4:if(null!=B.content.file_id){var E=new t.entity.FileInfo;E.messageId=B.id,E.talkId=B.talkId,E.userId=B.userId,E.updatedAt=B.createdAt,E.id=B.content.file_id,E.name=B.content.name,E.contentType=B.content.content_type,E.contentSize=B.content.content_size,E.url=B.content.url,E.thumbUrl=B.content.thumbnail_url,this.fileInfoStore.setTalkFileInfo(E,!1),this.sendNotification("notify_create_attachment",E)}this.sendNotification(a,B),c();break;case 5:for(var F=B.content.files,G=0;G<F.length;){var H=F[G];++G;var I=new t.entity.FileInfo;I.messageId=B.id,I.talkId=B.talkId,I.userId=B.userId,I.updatedAt=B.createdAt,I.id=H.file_id,I.name=H.name,I.contentType=H.content_type,I.contentSize=H.content_size,I.url=H.url,I.thumbUrl=H.thumbnail_url,this.fileInfoStore.setTalkFileInfo(I,!1),this.sendNotification("notify_create_attachment",I)}this.sendNotification(a,B),c();break;case 0:var J=B.content,K=null,L=J.type;switch(L){case"delete_talker":K=J.deleted_user_id;break;case"hide_pair_talk":K=J.user_id}if(null==K)return this.sendNotification(a,B),void c();for(var M=B.talkId,N=this.dataStore.getQuestions(M,K),O=0;O<N.length;){var P=N[O];++O,P.closed=!0,this.sendNotification("notify_update_question",P)}this.sendNotification(a,B),c();break;default:this.sendNotification(a,B),c()}break;case"notify_delete_message":var Q=new t.entity.MessageDeletion(b),R=this.updateTalkStatusOnMessageDelete(Q);null!=R&&this.sendNotification("notify_update_local_talk_status",R),this.sendNotification(a,Q),c();break;case"notify_update_read_statuses":var S=new t.entity.MessageReadStatusesUpdate(b),T=this.updateTalkStatus(S);null!=T&&this.sendNotification("notify_update_local_talk_status",T),this.sendNotification(a,S),c();break;case"notify_update_talk_status":var U=new t.entity.TalkStatusUpdate(b),V=this.dataStore.getTalkStatus(U.talkId);null!=V&&V.update(U)&&(this.dataStore.setTalkStatus(V),this.sendNotification("notify_update_local_talk_status",V)),this.sendNotification(a,U),c();break;case"notify_create_announcement":var W=new t.entity.Announcement(b);this.sendNotification("notify_update_announcement_status",this.newAnnouncementStatus(W)),this.sendNotification(a,W),c();break;case"notify_delete_announcement":var X=b[0],Y=b[1],Z=this.dataStore.getAnnouncementStatus(X);null!=Z&&(null!=Z.maxReadAnnouncementId&&x.Int64.compare(Z.maxReadAnnouncementId,Y)<0&&(Z.unreadCount-=1,Z.unreadCount<0&&(Z.unreadCount=0)),null!=Z.maxAnnouncementId&&t.Int64Helper.eq(Z.maxAnnouncementId,Y)&&null!=Z.maxAnnouncement&&(Z.maxAnnouncement.type=t.entity.MessageType.deleted,Z.maxAnnouncement.content=""),this.dataStore.setAnnouncementStatus(Z)),this.sendNotification(a,b),c();break;case"notify_update_announcement_status":var $=new t.entity.AnnouncementStatusUpdate(b),_=this.dataStore.getAnnouncementStatus($.domainId);null==_&&(_=this.assureAnnouncementStatus($.domainId)),_.updateRead($),this.dataStore.setAnnouncementStatus(_),this.sendNotification(a,$),c();break;case"notify_delete_attachment":var aa=new t.entity.FileInfoDeletion(b);this.sendNotification(a,aa),c();break;case"notify_leave_domain":var ba=b;this.dataStore.removeDomain(ba),this.sendNotification(a,ba),c();break;case"notify_delete_domain_invite":var ca=b;this.dataStore.removeDomainInvite(ca),this.sendNotification(a,ca),c();break;case"notify_delete_friend":this.dataStore.removeFriend(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_acquaintance":this.dataStore.removeAcquaintance(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_talk":this.dataStore.removeTalk(b),this.dataStore.removeTalkStatus(b),this.sendNotification("brand_badge_changed"),this.settings.clearSelectedTalkIfMatch(t.entity.TalkSelection.TalkSelected(b,null)),this.sendNotification(a,b),c();break;case"notify_add_account_control_request":var da=new t.entity.AccountControlRequest(b);this.dataStore.setAccountControlRequest(da),this.sendNotification(a,da),c();break;case"notify_delete_account_control_request":var ea=t.Int64Helper.fromIntOrInt64(b);this.dataStore.removeAccountControlRequest(ea),this.sendNotification(a,ea),c();break;case"notify_join_account_control_group":var fa=new t.entity.AccountControlGroup(b);this.dataStore.setAccountControlGroup(fa),this.dataStore.removeAccountControlRequests(),this.sendNotification("brand_badge_changed"),this.sendNotification(a,fa),c();break;case"notify_update_account_control_group_partially":var ga=new t.entity.AccountControlGroupPartialUpdate(b);this.dataStore.updateAccountControlGroup(ga),this.sendNotification(a,ga),c();break;case"notify_leave_account_control_group":var ha=b;this.dataStore.removeAccountControlGroup(ha),this.sendNotification(a,ha),c();break;case"notify_add_favorite_talk":var ia=new t.entity.FavoriteTalkEvent(b);this.updateTalkStatusByFavoriteTalkEvent(ia),this.sendNotification(a,ia),c();break;case"notify_delete_favorite_talk":var ja=new t.entity.FavoriteTalkEvent(b);this.updateTalkStatusByFavoriteTalkEvent(ja),this.sendNotification(a,ja),c();break;case"notify_disable_push_notification":var ka=new t.entity.TalkPushNotificationEvent(b);this.updateTalkStatusByTalkPushNotificationEvent(!1,ka),this.sendNotification(a,ka),c();break;case"notify_enable_push_notification":var la=new t.entity.TalkPushNotificationEvent(b);this.updateTalkStatusByTalkPushNotificationEvent(!0,la),this.sendNotification(a,la),c();break;default:this.sendNotification(a,b),c()}},updateTalkStatusByFavoriteTalkEvent:function(a){var b=this.dataStore.getTalkStatus(a.talkId);if(null==b){var c=this.dataStore.getTalk(a.talkId);if(null==c)return void u._e(u.dateStr(),"talk not found on change favorite talk.","","","","");b=new t.entity.TalkStatus,b.id=a.talkId,b.talkOrderingTimestamp=c.updatedAt}(null==b.favoriteVersion||a.favoriteVersion>b.favoriteVersion)&&(b.favoriteVersion=a.favoriteVersion,
b.orderInFavorites=a.orderInFavorites,this.dataStore.setTalkStatus(b))},updateTalkStatusByTalkPushNotificationEvent:function(a,b){var c=this.dataStore.getTalkStatus(b.talkId);if(null==c){var d=this.dataStore.getTalk(b.talkId);if(null==d)return void u._e(u.dateStr(),"talk not found on change favorite talk.","","","","");c=new t.entity.TalkStatus,c.id=b.talkId,c.talkOrderingTimestamp=d.updatedAt}(null==c.pushNotificationSetting||b.version>c.pushNotificationSetting.version)&&(c.pushNotificationSetting=t.entity.PushNotificationSetting.createWithParams(a,b.version),this.dataStore.setTalkStatus(c))},newTalkStatusByTalk:function(a){var b=this.dataStore.getTalkStatus(a.id);return null==b&&(b=new t.entity.TalkStatus,b.id=a.id),null==b.talkOrderingTimestamp&&(b.talkOrderingTimestamp=a.updatedAt),this.dataStore.setTalkStatus(b),b},newTalkStatusByMessage:function(a){var b=this.dataStore.getTalkStatus(a.talkId);return null==b&&(b=new t.entity.TalkStatus,b.id=a.talkId),(null==b.maxMessageId||x.Int64.compare(b.maxMessageId,a.id)<0)&&(b.maxMessageId=a.id,b.maxMessage=a),a.isUnreadCountTarget&&(this.dataStore.isMe(a.userId)||b.unreadCount++,b.talkOrderingTimestamp=a.createdAt),this.dataStore.setTalkStatus(b),b},updateTalkStatusOnMessageDelete:function(a){var b=this.dataStore.getTalkStatus(a.talkId);return null!=b&&(null!=b.maxReadMessageId&&x.Int64.compare(b.maxReadMessageId,a.messageId)<0&&(b.unreadCount-=1,b.unreadCount<0&&(b.unreadCount=0)),null!=b.maxMessageId&&t.Int64Helper.eq(b.maxMessageId,a.messageId)&&null!=b.maxMessage&&(b.maxMessage.type=t.entity.MessageType.deleted),this.dataStore.setTalkStatus(b)),b},updateTalkStatus:function(a){var b=this;if(!j.exists(a.readUserIds,function(a){return b.dataStore.isMe(a)}))return null;var c=this.dataStore.getTalkStatus(a.talkId);if(null==c)return u._e(u.dateStr(),"talkStatus is not found.","","","",""),null;for(var d=a.messageIds[0],e=0,f=a.messageIds;e<f.length;){var g=f[e];++e,(null==c.maxReadMessageId||x.Int64.compare(c.maxReadMessageId,g)<0)&&(x.Int64.compare(d,g)<0&&(d=g),t.Int64Helper.contains(a.messageIdsExcludingUnreadCountTargets,g)||c.unreadCount--)}return(null==c.maxReadMessageId||x.Int64.compare(c.maxReadMessageId,d)<0)&&(c.maxReadMessageId=d,this.dataStore.setTalkStatus(c)),c},newAnnouncementStatus:function(a){var b=this.dataStore.getAnnouncementStatus(a.domainId);return null==b&&(b=new t.entity.AnnouncementStatus,b.domainId=a.domainId),(null==b.maxAnnouncementId||x.Int64.compare(b.maxAnnouncementId,a.id)<0)&&(b.maxAnnouncementId=a.id,b.maxAnnouncement=a),null==b.unreadCount&&(b.unreadCount=0),b.unreadCount++,this.dataStore.setAnnouncementStatus(b),b},assureAnnouncementStatus:function(a){var b=this.dataStore.getAnnouncementStatus(a);return null==b&&(b=new t.entity.AnnouncementStatus,b.domainId=a,b.unreadCount=0,this.dataStore.setAnnouncementStatus(b)),b},__class__:t.proxy.AlberoBroadcastProxy}),t.proxy.AlberoServiceProxy=function(){this.mockMsgId=new x.Int64(-1,-1),s.patterns.proxy.Proxy.call(this,"api"),this.updateReadStatusesTimers=new x.ds.StringMap,this.updateReadAnnouncementStatusesTimers=new x.ds.StringMap,this.createSessionCount=0},e["albero.proxy.AlberoServiceProxy"]=t.proxy.AlberoServiceProxy,t.proxy.AlberoServiceProxy.__name__=["albero","proxy","AlberoServiceProxy"],t.proxy.AlberoServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AlberoServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{getOSString:function(){var a="pc";return a="bot"},createAccessToken:function(a,b){var c,d,e=this,f=this.settings.getOs(),g=this.settings.getIDFV(),h=a.split("$");-1==a.indexOf("@")&&2==h.length?(c="create_access_token_by_id",d=[h[1],h[0],b,g,f,""]):(c="create_access_token",d=[a,b,g,f,""]),this.rpc.call(c,d,function(a){e.settings.setAccessToken(a),e.createSession(a)},function(a){e.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))})},authorizeDevice:function(a,b){var c=this.settings.getIDFV();this.rpc.call("authorize_device",[a,c],function(a){b()})},createSession:function(a){var b=this,c=[a,"1.94"];this.rpc.call("create_session",c,function(a){var c=new t.entity.PasswordExpiration(a.password_expiration),d=t.DateTimeHelper.nowAsInt64();if(null!=c.expiration&&x.Int64.compare(d,c.expiration)>0)return void b.sendNotification("password_expiration_overed");var e=b.settings.getPasswordWarningSkipUntil();(null==e||x.Int64.compare(d,e)>0)&&null!=c.warning&&x.Int64.compare(d,c.warning)>0&&(b.settings.setPasswordWarningSkipUntil(t.DateTimeHelper.oneDayAfterAsInt64()),b.sendNotification("password_expiration_warned")),b.dataRecoverd=a.notification&&b.dataStore.isMe(a.user.user_id),b.dataStore.setMe(new t.entity.Me(a.user)),b.settings.setConfiguration(new t.entity.Configuration(a.configuration));var f=function(){b.dataRecoverd=!0,b.sendNotification("data_recovered"),b.rpc.call("start_notification",[],function(a){var c=a;c||(b.dataStore.clear(!0),u._e(u.dateStr(),"start_notification failed.","","","",""))}),b.startUpdateLastUsedAtIfNeed()};b.dataRecoverd?(b.recoverDataNotifications(),f()):(b.dataStore.clear(!1),b.recoverData(f)),b.createSessionCount++},function(a){if(null!=a){if(401==a.code&&"expired password"==a.message)return void b.sendNotification("password_expiration_overed");if(401==a.code&&"deleted account"==a.message)return void b.sendNotification("SignOut");if(401==a.code&&"unauthorized device"==a.message)return void b.sendNotification("Device",t.command.DeviceAction.AUTHORIZE);b.rpc.onServerError("create_session",a)}b.settings.clearAccessToken(),b.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))})},recoverData:function(a){var b=this;this.rpc.call("reset_notification",[],function(c){var d=0,e=function(){d++,5==d&&a()};b.getDomains(function(){var a=b.dataStore.getDomains(),c=0,d=function(){c++,c==a.length&&e()};a.length>0?b.getAnnouncementStatuses(d):e();var f=0,g=function(){f++,2==f&&b.getTalks(e)};b.getFriends(g),b.getAcquaintances(g)}),b.getDomainInvites(e),b.getAccountControlRequests(e),b.getJoinedAccountControlGroup(e)})},recoverDataNotifications:function(){var a=t.ArrayHelper.sortAndReturn(this.dataStore.getDomains(),function(a,b){return x.Int64.compare(b.id,a.id)});this.sendDomainNotifications(a);for(var b=0;b<a.length;){var c=a[b];++b;var d=this.dataStore.getAnnouncementStatus(c.id);null==d&&(d=new t.entity.AnnouncementStatus,d.domainId=c.id,d.unreadCount=0,this.dataStore.setAnnouncementStatus(d)),this.sendAnnouncementStatusNotification(d);for(var e=0,f=this.dataStore.getFriends(c.id);e<f.length;){var g=f[e];++e,this.sendNotification("notify_add_friend",g)}for(var h=0,i=this.dataStore.getAcquaintances(c.id);h<i.length;){var j=i[h];++h,this.sendNotification("notify_add_acquaintance",j)}}this.sendTalkNotifications(this.dataStore.getTalks()),this.sendTalkStatusNotifications(this.dataStore.getTalkStatuses());for(var k=0,l=this.dataStore.getDomainInvites();k<l.length;){var m=l[k];++k,this.sendNotification("notify_add_domain_invite",m)}for(var n=0,o=this.dataStore.getAccountControlRequests();n<o.length;){var p=o[n];++n,this.sendNotification("notify_add_account_control_request",p)}var q=this.dataStore.getAccountControlGroup();null!=q&&this.sendNotification("notify_join_account_control_group",q)},sendDomainNotifications:function(a){a.reverse();for(var b=0;b<a.length;){var c=a[b];++b,this.sendNotification("notify_update_domain",[null,c])}},sendAnnouncementStatusNotification:function(a){var b=new t.entity.AnnouncementStatusUpdate;b.domainId=a.domainId,this.sendNotification("notify_update_announcement_status",b)},sendTalkNotification:function(a){var b;b=a.type==t.entity.TalkType.PairTalk?"notify_create_pair_talk":"notify_create_group_talk",this.sendNotification(b,a)},sendTalkNotifications:function(a){var b=this;j.iter(t.ArrayHelper.sortAndReturn(a.map(function(a){return b.dataStore.getTalkPack(a.id)}),t.entity.TalkPack.compareTalkConsideredFavorite),function(a){b.sendTalkNotification(a.talk)})},sendTalkStatusNotifications:function(a){for(var b=0;b<a.length;){var c=a[b];++b,this.sendNotification("notify_update_local_talk_status",c)}},deleteSession:function(){this.settings.clearSelectedStampTabId(),this.settings.clearDomainSelection(),this.settings.clearAccessToken(),this.rpc.restart()},updateUser:function(a,b,c,d,e){var f=this,g=function(a){f.sendNotification("update_user_errored",f.dataStore.me)},h=function(b){var c="update_user";f.rpc.call(c,[a,b,d,e],function(a){f.dataStore.setMe(new t.entity.Me(a)),f.sendNotification("update_user_responsed",f.dataStore.me)},function(a){g(a),f.rpc.onServerError(c,a)})};null!=c?h(c):null!=b?this.uploadFile(b,null,t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE,function(a){h(a.get_url)},g):h()},updateProfile:function(a){for(var b=this,c=new Array,d=0;d<a.length;){var e=a[d];++d;var f=new Array;f.push(e.domainId);for(var g=new Array,h=0,i=e.profileItemValues;h<i.length;){var j=i[h];++h,g.push({profile_item_id:j.profileItemId,value:j.value})}f.push(g),c.push(f)}var k="update_profile";this.rpc.call(k,[c],function(a){b.dataStore.setMe(new t.entity.Me(a)),b.sendNotification("update_profile_responsed",b.dataStore.me)},function(a){b.sendNotification("update_profile_errored",b.dataStore.me),b.rpc.onServerError(k,a)})},addFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("add_friend",[b,a.id])},deleteFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("delete_friend",[b,a.id])},getFriends:function(a){var b=this;this.rpc.call("get_friends",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;var f=(e[0],e[1]);j.iter(f,function(a){var c=new t.entity.DomainUser(a);b.dataStore.addFriend(c),b.sendNotification("notify_add_friend",c)})}null!=a&&a()})},getAcquaintances:function(a){var b=this;this.rpc.call("get_acquaintances",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;var f=e[1];j.iter(f,function(a){var c=new t.entity.DomainUser(a);b.dataStore.addAcquaintance(c),b.sendNotification("notify_add_acquaintance",c)})}null!=a&&a()})},getAllUsers:function(a){var b=this,c=this.settings.getSelectedDomainId(),d=40,e=14;this.rpc.call("get_domain_users",[c,e,d,a],function(a){var d,e=new Array,f=0;for(d=v.Boot.__cast(a.contents,Array);f<d.length;){var g=d[f];++f,e.push(new t.entity.DomainUser(g))}b.dataStore.setUsersIfLatest(c,e),b.sendNotification("get_domain_users_responsed",[c,a.marker,a.next_marker,e])})},getUsers:function(a,b){this._getUsers(a,b.slice())},_getUsers:function(a,b){var c=this,d=b.splice(0,100);0!=d.length&&this.rpc.call("get_users",[a,d],function(d){var e,f=new Array,g=0;for(e=v.Boot.__cast(d,Array);g<e.length;){var h=e[g];++g,f.push(new t.entity.DomainUser(h))}c.dataStore.setUsersIfLatest(a,f),c.sendNotification("get_users_responsed",[a,f]),c._getUsers(a,b)})},getProfile:function(a,b){var c=this,d="get_profile";this.rpc.call(d,[a,b],function(a){var b=new t.entity.Profile(a);c.sendNotification("get_profile_responsed",b)},function(a){403==a.code&&"invalid user"==a.message?null!=a.detail&&null!=a.detail.invalid_user_ids&&c.sendNotification("get_profile_errored",a.detail.invalid_user_ids):c.rpc.onServerError(d,a)})},searchDomainUsers:function(a,b){var c=this,d=this.settings.getSelectedDomainId(),e=40,f=14;this.rpc.call("search_domain_users",[d,a,f,e,b],function(b){var e,f=new Array,g=0;for(e=v.Boot.__cast(b.contents,Array);g<e.length;){var h=e[g];++g,f.push(new t.entity.DomainUser(h))}c.dataStore.setUsersIfLatest(d,f),c.sendNotification("get_domain_users_responsed",[d,b.marker,b.next_marker,f,a])})},getDepartmentTree:function(a){var b=this,c="get_department_tree";this.rpc.call(c,[a],function(c){j.iter(new t.entity.DepartmentList(c).departments,function(c){c.isRoot()&&b.departmentStore.setRootDepartmentId(a,c.id),b.departmentStore.setDepartment(c)});var d=b.settings.getSelectedDepartmentId(a);null!=d&&null==b.departmentStore.getDepartment(d)&&b.settings.setSelectedDepartmentId(a,null),b.sendNotification("get_department_tree_responsed",[a])},function(d){return 403==d.code&&"forbidden"==d.message?void b.sendNotification("get_department_tree_canceled",[a]):void b.rpc.onServerError(c,d)})},getDepartmentUsers:function(a,b){this._getDepartmentUsers(a,b,null)},getDepartmentAllUsers:function(a){var b=this,c=this.departmentStore.getDepartment(a);if(null!=c&&null!=c.userIds)return void this.sendNotification("department_user_ids_prepared",c.userIds);var d=new x.ds.StringMap,e=null;e=function(c,f,g){for(var h=0;h<g.length;){var i=g[h];++h;var j=t.Int64Helper.idStr(i.id);d.set(j,i.id)}if(null==f){for(var k=[],l=d.iterator();l.hasNext();){var m=l.next();k.push(m)}b.departmentStore.setDepartmentUsers(a,k),b.sendNotification("department_user_ids_prepared",k)}else b._getDepartmentUsers(a,f,e)},this._getDepartmentUsers(a,null,e)},_getDepartmentUsers:function(a,b,c){var d=this,e=this.settings.getSelectedDomainId(),f=100,g=this.departmentStore.getDepartment(a),h=null!=g&&null!=g.childrenIds,i="get_department_users";this.rpc.call(i,[e,a,h,f,b],function(b){var f=v.Boot.__cast(b.contents,Array).map(function(a){return new t.entity.DomainUser(a)});d.dataStore.setUsersIfLatest(e,f),d.sendNotification("get_department_users_responsed",[e,b.marker,b.next_marker,f,a]),null!=c&&c(b.marker,b.next_marker,f)},function(a){return 403==a.code&&"forbidden"==a.message?void d.sendNotification("get_department_users_canceled",[e]):void d.rpc.onServerError(i,a)})},getMe:function(){var a=this,b="get_me";this.rpc.call(b,[],function(b){a.dataStore.setMe(new t.entity.Me(b)),a.sendNotification("get_me_responsed")},function(c){a.rpc.onServerError(b,c)})},getDepartmentUserCount:function(a,b){var c=b.filter((z=this.departmentStore,d(z,z.needUserCountLoading)));this._getDepartmentUserCount(a,c)},_getDepartmentUserCount:function(a,b){var c=this,d=b.splice(0,100);if(0!=d.length){var e="get_department_user_count";j.iter(d,function(a){c.departmentStore.setUserCountLoading(a,!0)}),this.rpc.call(e,[a,d],function(e){for(var f=new t.entity.DepartmentUserCountList(e),g=0,h=f.departments;g<h.length;){var i=h[g];++g,c.departmentStore.setDepartmentUserCount(i)}c.sendNotification("get_department_user_count_responsed",{completed:d,remaining:b}),c._getDepartmentUserCount(a,b)},function(a){j.iter(d,function(a){c.departmentStore.setUserCountLoading(a,!1)}),c.rpc.onServerError(e,a)})}},getDomains:function(a){var b=this;this.rpc.call("get_domains",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newDomain(e)}b.sendDomainNotifications(b.dataStore.getDomains()),null!=a&&a()})},leaveDomain:function(a){var b=this;this.rpc.call("leave_domain",[a.id],function(a){b.dataStore.removeDomain(a)})},getDomainInvites:function(a){var b;b=null==a?function(a){}:function(b){a()},this._getDomainInvites(b)},_getDomainInvites:function(a){var b=this;this.rpc.call("get_domain_invites",[],function(c){for(var d=new Array,e=0;e<c.length;){var f=c[e];++e;var g=b.newDomainInvite(f);b.sendNotification("notify_add_domain_invite",g),d.push(g)}a(d)})},acceptDomainInvite:function(a){this.callApiReliable("accept_domain_invite",[a],function(a){})},deleteDomainInvite:function(a){this.callApiReliable("delete_domain_invite",[a],function(a){})},getAccountControlRequests:function(a){var b=this;this.rpc.call("get_account_control_requests",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.sendNotification("notify_add_account_control_request",b.newAccountControlRequest(e))}null!=a&&a()})},acceptAccountControlRequest:function(a){if(null!=a){var b=this.dataStore.getAccountControlRequest(a);null!=b&&this.rpc.call("accept_account_control_request",[b.id,b.version],function(a){})}},rejectAccountControlRequest:function(a){if(null!=a){var b=this.dataStore.getAccountControlRequest(a);null!=b&&this.rpc.call("reject_account_control_request",[b.id,b.version],function(a){})}},getJoinedAccountControlGroup:function(a){var b=this;this.rpc.call("get_joined_account_control_group",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.sendNotification("notify_join_account_control_group",b.newAccountControlGroup(e))}null!=a&&a()})},getTalks:function(a){var b=this;this.rpc.call("get_talks",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newTalk(e)}b.rpc.call("get_talk_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newTalkStatus(e)}b.sendTalkNotifications(b.dataStore.getTalks()),b.sendTalkStatusNotifications(b.dataStore.getTalkStatuses()),null!=a&&a()})})},getReadStatus:function(a,b){var c=this;this.rpc.call("get_read_status",[a,b],function(a){c.sendNotification("notify_get_message_status",new t.entity.MessageReadStatus(a))})},createGroupTalk:function(a,b,c,d){var e=this;if(null==a&&(a=this.settings.getSelectedDomainId()),0!=b.length){var f="create_group_talk";this.rpc.call(f,[a,b,c.allowDisplayPastMessages],function(a){var b=e.newTalk(a);e.sendNotification("notify_create_group_talk",b),e.selectTalk(b,d)},function(a){if(null!=a&&502==a.code&&null!=a.detail&&"talks"==a.detail.limit_target){var b=a.detail.limit_max;e.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.TalksCountOvered(b),a))}else if(null!=a&&502==a.code&&null!=a.detail&&"talkers"==a.detail.limit_target){var c=a.detail.limit_max;e.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.TalkersCountOvered(c),a))}else e.rpc.onServerError(f,a)})}},createPairTalk:function(a,b,c){var d=this;null==a&&(a=this.settings.getSelectedDomainId());var e="create_pair_talk";this.rpc.call(e,[a,b],function(a){var b=d.newTalk(a);d.sendNotification("notify_create_pair_talk",b),d.selectTalk(b,c)},function(a){if(null!=a&&502==a.code&&null!=a.detail&&"talks"==a.detail.limit_target){var b=a.detail.limit_max;d.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.TalksCountOvered(b),a))}else d.rpc.onServerError(e,a)})},selectTalk:function(a,b){var c;c=null==b?t.entity.PaneType.SingleTalkPane:b,null==a?this.settings.selectAnnouncement(t.entity.PaneType.SingleTalkPane):this.settings.selectTalk(t.entity.PaneType.SingleTalkPane,a,x.ds.Option.None)},updateGroupTalk:function(a,b,c,d){var e=this;if(a.type==t.entity.TalkType.GroupTalk){var f=function(a){e.sendNotification("notify_update_group_talk_ERRORED")},g=function(c){var d="update_group_talk";e.rpc.call(d,[a.id,b,c],function(a){e.sendNotification("notify_update_group_talk",e.newTalk(a))},function(a){f(a),e.rpc.onServerError(d,a)})};null!=d?g(d):null!=c?this.uploadFile(c,a.domainId,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON,function(a){g(a.get_url)},f):g()}},addTalkers:function(a,b,c){var d=this;if(a.type==t.entity.TalkType.PairTalk){var e=a.userIds.concat(b);t.Int64Helper.remove(e,this.dataStore.me.id);var f=this.settings.getSelectedDomainId();return void this.createGroupTalk(f,e,t.entity.GroupTalkSettings.createDefault(),c)}if(0!=b.length){var g="add_talkers";this.rpc.call(g,[a.id,b],function(a){d.sendNotification("notify_add_talkers",d.newTalk(a))},function(a){if(null!=a&&502==a.code&&null!=a.detail&&"talkers"==a.detail.limit_target){var b=a.detail.limit_max;d.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.TalkersCountOvered(b),a))}else d.rpc.onServerError(g,a)})}},deleteTalker:function(a,b){var c=this,d=null,e=null,f=this.dataStore.isMe(b);f&&(d=a,e=this.dataStore.getTalkStatus(a.id),this.dataStore.removeTalk(a.id),this.dataStore.removeTalkStatus(a.id)),this.rpc.call("delete_talker",[a.id,b],function(d){t.Int64Helper.remove(a.userIds,b),f||c.dataStore.setTalk(a),c.sendNotification("notify_delete_talker",a)},function(a){null!=d&&c.dataStore.setTalk(d),null!=e&&c.dataStore.setTalkStatus(e),c.sendNotification("error_occurred",a)})},getMessages:function(a,b,c,d){var e=this,f=20;null==b&&(b={sinceId:null,maxId:null}),null==c&&(c=t.entity.MessagesOrder.desc),this.rpc.call("get_messages",[a,f,b.sinceId,b.maxId,t.entity.MessagesOrderProc.orderToInt(c)],function(b){for(var f=new Array,g=0;g<b.length;){var h=b[g];++g,f.push(e.newMessage(h))}e.sendNotification("notify_get_messages",{talkId:a,messages:f,sortOrder:c,callerKey:d})})},createMessage:function(a,b,c){var d=this,e=this.newDummyMessage(a,b,c);if(null==this.dataStore.getTalk(a)){var f={code:400,message:"invalid talk_id (deleted talk)"};return u._w(u.dateStr(),"WARNING method: create_message",f,"","",""),void this.sendNotification("create_message_fail",[f,e])}this.sendNotification("create_message_start",e),this.rpc.call("create_message",[a,t.entity.Message.enumIndex(b),c],function(a){d.sendNotification("create_message_complete",[d.newMessage(a),e.id])},function(a){d.sendNotification("create_message_fail",[a,e]),null!=a&&409==a.code?d.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.SendingMessageConflicted,a)):d.sendNotification("error_occurred",a)})},forwardMessages:function(a,b,c){null==c&&(c=0);var d=this;if(!(c>=b.length)){var e=b[c],f=a.id,g=this.newDummyMessage(f,e.type,e.content);this.sendNotification("create_message_start",g),this.rpc.call("create_message",[f,t.entity.Message.enumIndex(e.type),e.content],function(e){d.sendNotification("create_message_complete",[d.newMessage(e),g.id]),d.forwardMessages(a,b,c+1)},function(a){d.sendNotification("create_message_fail",[a,g]),null!=a&&409==a.code?d.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.SendingMessageConflicted,a)):d.sendNotification("error_occurred",a)})}},deleteMessage:function(a,b){var c=this;this.rpc.call("delete_message",[a,b],function(d){var e=new t.entity.MessageDeletion;e.talkId=a,e.messageId=b,c.sendNotification("notify_delete_message",e)},function(a){if(null!=a){if(403==a.code&&"frozen domain"==a.message)return void c.sendNotification("error_occurred",a);if(409==a.code&&"conflict"==a.message)return void c.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.DeletingMessageConflicted,a));c.sendNotification("error_occurred",a)}})},updateReadStatuses:function(a,b){var c=this,d=this.dataStore.getTalkStatus(a);if(null!=d){if(null==b||this.canRegardReadCountZero(d,b)){if(!this.isUnreadMesasgeExisted(d))return;if(null==d.maxMessageId)return;d.maxReadMessageId=d.maxMessageId,d.unreadCount=0,this.dataStore.setTalkStatus(d)}else{var e=b.filter(function(a){return null==d.maxReadMessageId||x.Int64.compare(d.maxReadMessageId,a.id)<0});if(0==e.length)return;var f=e.filter(function(a){return a.isUnreadCountTarget&&!c.dataStore.isMe(a.userId)}).length;d.unreadCount-=f,d.unreadCount<0&&(d.unreadCount=0),d.maxReadMessageId=e[e.length-1].id,this.dataStore.setTalkStatus(d)}var g="_"+a.high+"_"+a.low,h=this.updateReadStatusesTimers.get(g);null!=h&&h.stop();var i=d.maxReadMessageId,j=x.Timer.delay(function(){c.updateReadStatusesTimers.remove(g);var b=c.dataStore.getTalkStatus(a);null!=b&&c.rpc.call("update_read_statuses",[a,i],function(b){var d=c.dataStore.getTalkStatus(a);null!=d&&t.Int64Helper.eq(d.maxReadMessageId,i)&&c.sendNotification("notify_update_local_talk_status",d)})},1e3);this.updateReadStatusesTimers.set(g,j)}},canRegardReadCountZero:function(a,b){if(0==b.length)return!1;var c=b[b.length-1].id;return t.Int64Helper.eq(c,a.maxMessageId)},upload:function(a,b,c){var d=this;t.js.TextCanonicalizer.assureNormalize(function(e){var f=e(c.name),g={content_type:c.type,content_size:c.size,name:f,file:c},h=d.newDummyMessage(b,t.entity.MessageType.file,g),i=function(a){d.sendNotification("create_message_fail",[a,h])},j=t.proxy.FileServiceProxy.getBlobFromUpdatableFile(c);d.uploadThumbnail(j,a,b,h,function(e){d.uploadFile(c,a,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE,function(a){var g={url:a.get_url,content_type:c.type,content_size:c.size,name:f,file_id:a.file_id};null!=e&&(g.thumbnail_url=e.get_url),d.createMessageReliable(b,t.entity.MessageType.file,g,h)},i)},i)})},uploadMulti:function(a,b,c,d){var e=this;t.js.TextCanonicalizer.assureNormalize(function(f){var g=e.newDummyMessage(b,t.entity.MessageType.textMultipleFile,{text:c,files:j.array(d.filter(function(a){return null!=a}).map(function(a){var b=f(a.name),c={content_type:a.type,content_size:a.size,name:b,file:a};return c}))});e.sendNotification("create_message_start",g);var h=function(a){e.sendNotification("create_message_fail",[a,g])},k=new Array,l=function(){if(k.length==d.length){var a={files:k};null!=c&&c.length>0&&(a.text=c),e.createMessageReliable(b,t.entity.MessageType.textMultipleFile,a,g)}},m=null;(m=function(c){if(c.hasNext()){var d=c.next(),g=t.proxy.FileServiceProxy.getBlobFromUpdatableFile(d);e.uploadThumbnail(g,a,b,null,function(b){e.uploadFile(d,a,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE,function(a){var e=f(d.name),g={url:a.get_url,content_type:d.type,content_size:d.size,name:e,file_id:a.file_id};null!=b&&(g.thumbnail_url=b.get_url),k.push(g),m(c)},h)},h)}else l()})(i.iter(d))})},createMessageReliable:function(a,b,c,d){var e=this;this.callApiReliable("create_message",[a,t.entity.Message.enumIndex(b),c],function(a){e.sendNotification("create_message_complete",[e.newMessage(a),d.id])},function(a){e.sendNotification("create_message_fail",[a,d]),null!=a&&409==a.code?e.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.SendingMessageConflicted,a)):e.sendNotification("error_occurred",a)},function(a){return 500==a.code&&"Internal Error (IllegalStateException)"==a.message})},uploadThumbnail:function(a,b,c,d,e,f){var g=this;this.fileService.createThumbnail(a,function(a){null!=d&&(d.content.thumbnail_file=a,g.sendNotification("create_message_start",d)),null!=a?g.uploadFile(a,b,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL,e,f):e(null)})},uploadFile:function(a,b,c,d,e){var f,g=this;switch(c[1]){case 0:f=0;break;case 1:f=1;break;case 2:f=2;break;case 3:f=4}t.js.TextCanonicalizer.assureNormalize(function(c){var h=c(a.name);g.rpc.call("create_upload_auth",[h,a.type,a.size,b,f],function(b){g.fileService.upload(b,a.type,a,function(){d(b)},e)},function(a){if(null!=a)if(502==a.code&&null!=a.detail){var b=a.detail.limit_max;g.sendNotification("error_occurred",t.proxy.ErrorConverter.toLocalError(t.entity.LocalErrorType.UploadSizeOvered(b),a))}else g.sendNotification("error_occurred",a);e(a)})})},deleteAttachment:function(a,b){this.rpc.call("delete_attachment",[a,b])},getAttachments:function(a,b){var c=this,d=20;null==b&&(b={sinceId:null,maxId:null}),this.rpc.call("get_attachments",[a,d,b.sinceId,b.maxId],function(b){for(var d=new Array,e=0;e<b.length;){var f=b[e];++e,d.push(c.newFileInfo(f))}c.sendNotification("get_file_responsed",{talkId:a,files:d})})},createAnnouncement:function(a,b,c){var d=this;if(null!=a||(a=this.settings.getSelectedDomainId(),null!=a)){var e=this.newDummyMessage(null,b,c);this.sendNotification("create_announcement_start",e),this.rpc.call("create_announcement",[a,t.entity.Message.enumIndex(b),c],function(a){d.sendNotification("create_announcement_complete",[d.newAnnouncement(a),e.id])},function(a){d.sendNotification("create_announcement_fail",e),d.sendNotification("error_occurred",a)})}},getAnnouncements:function(a,b,c){var d=this,e=20,f=this.settings.getSelectedDomainId();null!=f&&(null==a&&(a={sinceId:null,maxId:null}),this.rpc.call("get_announcements",[f,e,a.sinceId,a.maxId,t.entity.MessagesOrderProc.orderToInt(b)],function(a){for(var e=new Array,g=0;g<a.length;){var h=a[g];++g,e.push(new t.entity.Announcement(h))}d.sendNotification("notify_get_announcements",{domainId:f,announcements:e,sortOrder:b,callerKey:c})}))},getAnnouncementStatuses:function(a){var b=this;this.rpc.call("get_announcement_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;var f=b.newAnnouncementStatus(e);b.sendAnnouncementStatusNotification(f),null!=a&&a()}})},getAnnouncementStatus:function(a,b){var c=this;this.rpc.call("get_announcement_status",[a],function(a){var d=c.newAnnouncementStatus(a);c.sendAnnouncementStatusNotification(d),null!=b&&b()})},updateAnnouncementReadStatus:function(a,b){var c=this,d=this.dataStore.getAnnouncementStatus(a);if(null!=d){if(null==b||this.canRegardAnnouncementReadCountZero(d,b)){if(!this.isUnreadAnnouncementExisted(d))return;if(null==d.maxAnnouncementId)return;d.maxReadAnnouncementId=d.maxAnnouncementId,d.unreadCount=0,this.dataStore.setAnnouncementStatus(d)}else{var e=b.filter(function(a){return null==d.maxReadAnnouncementId||x.Int64.compare(d.maxReadAnnouncementId,a)<0});if(0==e.length)return;d.unreadCount-=e.length,d.unreadCount<0&&(d.unreadCount=0),d.maxReadAnnouncementId=e[e.length-1],this.dataStore.setAnnouncementStatus(d)}var f="_"+a.high+"_"+a.low,g=this.updateReadAnnouncementStatusesTimers.get(f);null!=g&&g.stop();var h=d.maxReadAnnouncementId;g=x.Timer.delay(function(){c.updateReadAnnouncementStatusesTimers.remove(f),c.rpc.call("update_announcement_status",[a,h],function(b){var d=c.dataStore.getAnnouncementStatus(a);null!=d&&t.Int64Helper.eq(d.maxReadAnnouncementId,h)&&c.sendAnnouncementStatusNotification(d)})},1e3),this.updateReadAnnouncementStatusesTimers.set(f,g)}},canRegardAnnouncementReadCountZero:function(a,b){if(0==b.length)return!1;var c=b[b.length-1];return t.Int64Helper.eq(c,a.maxAnnouncementId)},getQuestions:function(a,b,c,d){var e=this,f=20,g=this.settings.getSelectedDomainId(),h=null;null!=a&&(g=a.domainId,h=a.id);var i;switch(b[1]){case 0:i=0;break;case 1:i=1}var j;switch(c[1]){case 0:j=!0;break;case 1:j=!1;break;case 2:j=null}null==d&&(d={sinceId:null,maxId:null}),this.rpc.call("get_actions",[g,h,i,j,f,d.sinceId,d.maxId],function(a){for(var d=new Array,f=0;f<a.length;){var i=a[f];++f,d.push(e.newQuestion(i))}e.sendNotification("get_questions_responsed",{domainId:g,talkId:h,questions:d,fromType:b,filter:c})})},getQuestion:function(a,b){var c=this;this.callApiReliable("get_action",[a],function(a){var d=c.newQuestion(a);c.sendNotification("notify_update_question",d),null!=b&&b(d)})},search:function(a,b,c,d){var e=this;this.searchService.prepareForSearching(a,c);var f=a.getQueryText(),g=function(f){return 400==f.code&&null!=c?void e.search(a,b,null,d):void e.sendNotification("error_occurred",f)},h=a.searchType;switch(h[1]){case 0:this.rpc.call("search_messages",[a.domainId,a.talkId,f,b,c],function(b){e.searchService.isRecentParams(a)&&e.searchService.isSearching()&&e.searchService.saveSearchMessagesResult(new t.entity.SearchMessagesResult(b)),null!=d&&d()},function(a){e.searchService.notifySearchMessagesFail(),g(a)});break;case 1:this.rpc.call("search_attachments",[a.domainId,a.talkId,f,b,c],function(b){e.searchService.isRecentParams(a)&&e.searchService.isSearching()&&e.searchService.saveSearchAttachmentsResult(new t.entity.SearchAttachmentsResult(b)),null!=d&&d()},function(a){e.searchService.notifySearchAttachmentsFail(),g(a)})}},startUpdateLastUsedAtIfNeed:function(){if(null==this.lastUsedExpiredAtTimer){var a,b=this.settings.getLastUsedExpiredAt();a=null==b?0:n["int"](t.Int64Helper.toFloat(b)-(new Date).getTime()),0>=a?(this.updateLastUsedAt(),this.lastUsedExpiredAtTimer=new x.Timer(36e5),this.lastUsedExpiredAtTimer.run=d(this,this.updateLastUsedAt)):x.Timer.delay(d(this,this.startUpdateLastUsedAtIfNeed),a)}},updateLastUsedAt:function(){var a=this;this.rpc.call("update_last_used_at",[],function(b){a.settings.setLastUsedExpiredAt(t.DateTimeHelper.afterAsInt64(36e5))})},addFavoriteTalk:function(a,b){this.rpc.call("add_favorite_talk",[a,b])},deleteFavoriteTalk:function(a,b){this.rpc.call("delete_favorite_talk",[a,b])},disablePushNotification:function(a,b){this.rpc.call("disable_push_notification",[a,b])},enablePushNotification:function(a,b){this.rpc.call("enable_push_notification",[a,b])},getSolutions:function(a,b){var c=this;this.rpc.call("get_solutions",[a,b],function(a){var b,d=0;for(b=v.Boot.__cast(a,Array);d<b.length;){var e=b[d];++d,c.solutionsStore.setSolution(new t.entity.Solution(e))}c.sendNotification("solutions_loaded")})},isUnreadMesasgeExisted:function(a){return t.entity.TalkStatusHelper.isUnreadMesasgeExisted(a)},isUnreadAnnouncementExisted:function(a){return t.entity.AnnouncementStatusHelper.isUnreadAnnouncementExisted(a)},newDomain:function(a){
return this.dataStore.setDomainIfLatest(new t.entity.Domain(a))},newDomainInvite:function(a){return this.dataStore.setDomainInvite(new t.entity.DomainInvite(a))},newTalk:function(a){return this.dataStore.setTalk(new t.entity.Talk(a))},newTalkStatus:function(a){return this.dataStore.setTalkStatus(new t.entity.TalkStatus(a))},newMessage:function(a){return new t.entity.Message(a)},newDummyMessage:function(a,b,c){var d=new t.entity.Message;return d.id=this.mockMsgId,d.userId=this.dataStore.me.id,d.talkId=a,d.type=b,d.content=c,this.mockMsgId=t.Int64Helper.decrement(this.mockMsgId),d},newQuestion:function(a){return this.dataStore.setQuestion(new t.entity.Question(a))},newFileInfo:function(a){var b=new t.entity.FileInfo(a);return this.fileInfoStore.setTalkFileInfo(b,!0),b},newAnnouncement:function(a){return new t.entity.Announcement(a)},newAnnouncementStatus:function(a){return this.dataStore.setAnnouncementStatus(new t.entity.AnnouncementStatus(a))},newAccountControlRequest:function(a){return this.dataStore.setAccountControlRequest(new t.entity.AccountControlRequest(a))},newAccountControlGroup:function(a){return this.dataStore.setAccountControlGroup(new t.entity.AccountControlGroup(a))},callApiReliable:function(a,b,c,d,e){var f=this;null==e&&(e=function(a){return 404==a.code});var g=null;(g=function(h){f.rpc.call(a,b,c,function(b){return e(b)&&0!=h?void x.Timer.delay(function(){g(h-1)},1e3):void(null==d?f.rpc.onServerError(a,b):d(b))})})(3)},__class__:t.proxy.AlberoServiceProxy}),t.proxy._AlberoServiceProxy={},t.proxy._AlberoServiceProxy.UploadUseType=e["albero.proxy._AlberoServiceProxy.UploadUseType"]={__ename__:["albero","proxy","_AlberoServiceProxy","UploadUseType"],__constructs__:["PROFILE_IMAGE","MESSAGE","TALK_ICON","THUMBNAIL"]},t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE=["PROFILE_IMAGE",0],t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE=["MESSAGE",1],t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON=["TALK_ICON",2],t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL=["THUMBNAIL",3],t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy.AppStateProxy=function(){s.patterns.proxy.Proxy.call(this,"appState")},e["albero.proxy.AppStateProxy"]=t.proxy.AppStateProxy,t.proxy.AppStateProxy.__name__=["albero","proxy","AppStateProxy"],t.proxy.AppStateProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AppStateProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{start:function(){this.updateLastActivityAt(),this.checkInactiveInterval()},activateAppIfNeed:function(){this.updateLastActivityAt(),this.appState==t.AppState.Inactive&&this.setAppState(t.AppState.Active)},setAppState:function(a){this.appState=a,this.sendNotification("app_state_changed",this.appState)},updateLastActivityAt:function(){this.lastActivityAt=new Date},checkInactiveInterval:function(){var a=this;this.checkInactive(),x.Timer.delay(function(){a.checkInactiveInterval()},500)},checkInactive:function(){if(this.appState!=t.AppState.Inactive){var a=(new Date).getTime()-this.lastActivityAt.getTime();2e3>a||this.setAppState(t.AppState.Inactive)}},__class__:t.proxy.AppStateProxy}),t.proxy.DataStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"dataStore")},e["albero.proxy.DataStoreProxy"]=t.proxy.DataStoreProxy,t.proxy.DataStoreProxy.__name__=["albero","proxy","DataStoreProxy"],t.proxy.DataStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.DataStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{onRegister:function(){this.init()},setMe:function(a){this.me=a;for(var b=0,c=this.getDomains();b<c.length;){var d=c[b];++b,this.sendNotification("notify_update_user",this.me.toDomainUser(d.id))}this.sendNotification("current_user_changed",a),this.storage.setDirtyFlag()},getMe:function(){return this.me},isMe:function(a){return null!=this.me&&t.Int64Helper.eq(this.me.id,a)},getFriendsOrAcquaintances:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();(0==e.type||1==e.type)&&c.push(e.user)}return c},getFriends:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();0==e.type&&c.push(e.user)}return c},getAcquaintances:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();1==e.type&&c.push(e.user)}return c},isFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);return null!=d&&0==d.type}return!1},addFriend:function(a){var b=this.ensureDomainUserMap(a.domainId),c=t.Int64Helper.idStr(a.id);return b.set(c,{type:0,user:a}),this.storage.setDirtyFlag(),a},addAcquaintance:function(a){var b=this.ensureDomainUserMap(a.domainId),c=t.Int64Helper.idStr(a.id);return b.set(c,{type:1,user:a}),this.storage.setDirtyFlag(),a},ensureDomainUserMap:function(a){var b="_"+a.high+"_"+a.low,c=this.users.get(b);return null==c&&(c=new x.ds.StringMap,this.users.set(b,c)),c},setUserIfLatest:function(a,b){null==a&&(a=this.ensureDomainUserMap(b.domainId));var c=t.Int64Helper.idStr(b.id),d=a.get(c);if(null!=d){var e=x.Int64.compare(b.updatedAt,d.user.updatedAt);(e>1||2==d.type&&0!=e)&&(d.user=b,this.sendNotification("notify_update_user",b))}else a.set(c,{type:2,user:b});this.storage.setDirtyFlag()},isDepartmentsChanged:function(a,b){return!t.Int64Helper.eqArray(a.departments,b.departments)},setUsersIfLatest:function(a,b){for(var c=this.ensureDomainUserMap(a),d=0;d<b.length;){var e=b[d];++d,this.setUserIfLatest(c,e)}},clearUsersDepartments:function(a){var b=this.users.get("_"+a.high+"_"+a.low);if(null!=b)for(var c=b.iterator();c.hasNext();){var d=c.next();d.user.departments=null,this.sendNotification("notify_update_user",d.user)}this.storage.setDirtyFlag()},removeFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);null!=d&&(d.type=2)}this.storage.setDirtyFlag()},removeAcquaintance:function(a,b){this.removeFriend(a,b)},getUser:function(a,b){if(null==b)return null;if(0==(b.high|b.low))return null;if(null!=this.me&&t.Int64Helper.eq(this.me.id,b))return this.me.toDomainUser(a);var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);if(null!=d)return d.user}return null},getUsers:function(a,b){var c=this,d=function(a,b){var d=c.users.get("_"+a.high+"_"+a.low);if(null!=d){if(null!=b)return b.map(function(b){if(0==(b.high|b.low))return null;if(t.Int64Helper.eq(c.me.id,b))return c.me.toDomainUser(a);var e=d.get("_"+b.high+"_"+b.low);return null!=e?e.user:null});for(var e=new Array,f=d.iterator();f.hasNext();)e.push(f.next().user);return e}return new Array};if(null!=a)return d(a,b);for(var e=this.domains.iterator(),f=null;e.hasNext();)f=null==f?d(e.next().id,b):f.concat(d(e.next().id,b));return f},getTalk:function(a){return this.talks.get("_"+a.high+"_"+a.low)},getTalkPack:function(a){var b="_"+a.high+"_"+a.low;return new t.entity.TalkPack(this.talks.get(b),this.talkStatuses.get(b))},getValidPairTalk:function(a,b){var c=this;return null==this.me?null:j.find(this.getTalks(),function(d){return r.enumEq(d.type,t.entity.TalkType.PairTalk)&&t.Int64Helper.eq(d.domainId,b)&&j.exists(d.userIds,function(b){return null!=b&&null!=a&&b.high==a.high&&b.low==a.low})&&j.exists(d.userIds,function(a){return t.Int64Helper.eq(a,c.me.id)})?!0:!1})},setTalk:function(a){var b=t.Int64Helper.idStr(a.id);if(this.talks.set(b,a),null!=a.leftUsers)for(var c=this.ensureDomainUserMap(a.domainId),d=0,e=a.leftUsers;d<e.length;){var f=e[d];++d;var g=t.Int64Helper.idStr(f.id),h=c.get(g);null!=h?2==h.type&&x.Int64.compare(f.updatedAt,h.user.updatedAt)>0&&(h.user=f,this.sendNotification("notify_update_user",f)):(c.set(g,{type:2,user:f}),this.sendNotification("notify_update_user",f))}return this.storage.setDirtyFlag(),a},getTalks:function(){for(var a=new Array,b=this.talks.keys();b.hasNext();){var c=b.next();a.push(this.talks.get(c))}return a},setTalks:function(a){for(var b=0;b<a.length;){var c=a[b];++b,this.setTalk(c)}},removeTalk:function(a){if(null!=this.domainUnreadCounts){var b=this.talks.get("_"+a.high+"_"+a.low);if(null!=b){var c=t.Int64Helper.idStr(b.domainId);this.domainUnreadCounts.remove(c)}}if(null!=this.questions)for(var d=this.getQuestions(a),e=0;e<d.length;){var f=d[e];++e;var g=t.Int64Helper.idStr(f.id);this.questions.remove(g)}this.talks.remove("_"+a.high+"_"+a.low),this.storage.setDirtyFlag()},getTalkStatuses:function(){for(var a=new Array,b=this.talkStatuses.keys();b.hasNext();){var c=b.next();this.talks.exists(c)&&a.push(this.talkStatuses.get(c))}return a},getTalkStatus:function(a){return this.talkStatuses.get("_"+a.high+"_"+a.low)},setTalkStatus:function(a){var b=t.Int64Helper.idStr(a.id);if(null!=this.domainUnreadCounts){var c=this.talks.get(b);if(null!=c){var d=t.Int64Helper.idStr(c.domainId);this.domainUnreadCounts.remove(d)}}return this.talkStatuses.set(b,a),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeTalkStatus:function(a){var b="_"+a.high+"_"+a.low;if(null!=this.domainUnreadCounts){var c=this.talks.get(b);if(null!=c){var d=t.Int64Helper.idStr(c.domainId);this.domainUnreadCounts.remove(d)}}this.talkStatuses.remove(b),this.storage.setDirtyFlag()},getDomains:function(){for(var a=new Array,b=this.domains.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},getDomain:function(a){return this.domains.get("_"+a.high+"_"+a.low)},setDomainIfLatest:function(a){var b=t.Int64Helper.idStr(a.id),c=this.domains.get(b);return null==c||x.Int64.compare(a.updatedAt,c.updatedAt)>=0?(this.domains.set(b,a),this.storage.setDirtyFlag(),a):c},removeDomain:function(a){this.domains.remove("_"+a.high+"_"+a.low),this.storage.setDirtyFlag();for(var b=this.getTalks().filter(function(b){return t.Int64Helper.eq(b.domainId,a)}),c=0;c<b.length;){var d=b[c];++c,this.removeTalk(d.id),this.removeTalkStatus(d.id)}},getUnreadCount:function(){for(var a=0,b=this.domains.keys();b.hasNext();){var c=b.next();a+=this._getDomainUnreadCount(c)}return a+=this.getDomainInvitesCount()},_getDomainUnreadCount:function(a){if(null!=this.domainUnreadCounts&&this.domainUnreadCounts.exists(a))return this.domainUnreadCounts.get(a);null==this.domainUnreadCounts&&(this.domainUnreadCounts=new x.ds.StringMap);for(var b=0,c=this.talkStatuses.iterator();c.hasNext();){var d=c.next();if(null!=d.unreadCount&&0!=d.unreadCount){var e,f=t.Int64Helper.idStr(d.id);e=this.talks.get(f),null!=e&&t.Int64Helper.idStr(e.domainId)==a&&(b+=d.unreadCount)}}var g=this.announcementStatuses.get(a);if(null!=g&&null!=g.unreadCount){var h=this.domains.get(a);null!=h&&h.role.allowReadAnnouncements&&(b+=g.unreadCount)}return this.domainUnreadCounts.set(a,b),b},getDomainUnreadCount:function(a){return null==a?0:this._getDomainUnreadCount("_"+a.high+"_"+a.low)},getDomainInvites:function(){for(var a=new Array,b=this.domainInvites.keys();b.hasNext();){var c=b.next();a.push(this.domainInvites.get(c))}return a},getDomainInvitesCount:function(){var a=0;if(null==this.accountControlGroup)for(var b=this.domainInvites.iterator();b.hasNext();){var c=b.next();(null==c.accountControlRequestId||null==this.getAccountControlRequest(c.accountControlRequestId))&&a++}else for(var d=this.domainInvites.iterator();d.hasNext();){d.next();a++}return a},getDomainInvite:function(a){return this.domainInvites.get("_"+a.high+"_"+a.low)},setDomainInvite:function(a){var b=t.Int64Helper.idStr(a.id);return this.domainInvites.set(b,a),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeDomainInvite:function(a){this.domainInvites.remove("_"+a.high+"_"+a.low),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},getQuestions:function(a,b){var c=[];if(null!=this.questions)for(var d=this.questions.iterator();d.hasNext();){var e=d.next();t.Int64Helper.eq(e.talkId,a)&&(null==b||t.Int64Helper.eq(b,e.userId))&&c.push(e)}return c},getQuestion:function(a){return this.questions.get("_"+a.high+"_"+a.low)},setQuestion:function(a){return a},getAnnouncementStatus:function(a){return this.announcementStatuses.get("_"+a.high+"_"+a.low)},setAnnouncementStatus:function(a){var b=t.Int64Helper.idStr(a.domainId);return this.announcementStatuses.set(b,a),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeAnnouncementStatus:function(a){var b="_"+a.high+"_"+a.low;this.announcementStatuses.remove(b),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},getAccountControlRequests:function(){for(var a=new Array,b=this.accountControlRequests.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},getAccountControlRequest:function(a){var b="_"+a.high+"_"+a.low;return this.accountControlRequests.get(b)},setAccountControlRequest:function(a){var b=t.Int64Helper.idStr(a.id),c=this.accountControlRequests.get(b);return null!=c&&c.version>a.version?c:(this.accountControlRequests.set(b,a),this.storage.setDirtyFlag(),a)},removeAccountControlRequest:function(a){var b="_"+a.high+"_"+a.low;this.accountControlRequests.remove(b),this.storage.setDirtyFlag()},removeAccountControlRequests:function(){this.accountControlRequests=new x.ds.StringMap,this.storage.setDirtyFlag()},getAccountControlGroup:function(){return this.accountControlGroup},setAccountControlGroup:function(a){return this.accountControlGroup=a,this.storage.setDirtyFlag(),this.accountControlGroup},updateAccountControlGroup:function(a){if(null!=this.accountControlGroup&&t.Int64Helper.eq(this.accountControlGroup.id,a.id)){var b=a.group;null!=b&&this.accountControlGroup.group.version<b.version&&(this.accountControlGroup.group=b,this.storage.setDirtyFlag());var c=a.profilePolicy;null!=c&&this.accountControlGroup.profilePolicy.version<c.version&&(this.accountControlGroup.profilePolicy=c,this.storage.setDirtyFlag())}},removeAccountControlGroup:function(a){null!=this.accountControlGroup&&t.Int64Helper.eq(this.accountControlGroup.id,a)&&(this.accountControlGroup=null,this.storage.setDirtyFlag())},clear:function(a){this.users=new x.ds.StringMap,this.talks=new x.ds.StringMap,this.talkStatuses=new x.ds.StringMap,this.domains=new x.ds.StringMap,this.domainInvites=new x.ds.StringMap,this.questions=new x.ds.StringMap,this.announcementStatuses=new x.ds.StringMap,this.accountControlRequests=new x.ds.StringMap,this.accountControlGroup=null,a&&(this.me=null),this.storage.setDirtyFlag()},init:function(){this.storage=new t.js.LocalStorage("dataStore");var a=this.storage.load();if(null!=a){var b=a.shift();if("1.94_1"==b)return this.me=a.shift(),this.users=a.shift(),this.talks=a.shift(),this.talkStatuses=a.shift(),this.domains=a.shift(),this.domainInvites=a.shift(),this.questions=a.shift(),this.announcementStatuses=a.shift(),this.accountControlRequests=a.shift(),this.accountControlGroup=a.shift(),void u._d(u.dateStr(),"dataStore is loaded.","","","","")}this.clear(!0),u._d(u.dateStr(),"dataStore is initialized.","","","","")},saveIfNeeded:function(){this.storage.isDirty&&(this.storage.save(["1.94_1",this.me,this.users,this.talks,this.talkStatuses,this.domains,this.domainInvites,this.questions,this.announcementStatuses,this.accountControlRequests,this.accountControlGroup]),u._d(u.dateStr(),"dataStore is saved.","","","",""))},__class__:t.proxy.DataStoreProxy}),t.proxy.DepartmentStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"departmentStore"),this.departmentMap=new x.ds.StringMap,this.rootDepartmentIdMap=new x.ds.StringMap},e["albero.proxy.DepartmentStoreProxy"]=t.proxy.DepartmentStoreProxy,t.proxy.DepartmentStoreProxy.__name__=["albero","proxy","DepartmentStoreProxy"],t.proxy.DepartmentStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.DepartmentStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{getDepartment:function(a){return null==a?null:this.departmentMap.get("_"+a.high+"_"+a.low)},setDepartment:function(a){if(null!=a.parentId){var b=this.getDepartment(a.parentId);null!=b&&(b.addChild(a.id),a.depth=b.depth+1)}var c=t.Int64Helper.idStr(a.id);this.departmentMap.set(c,a)},clearDomainDepartment:function(a){var b=this,c="_"+a.high+"_"+a.low,d=this.rootDepartmentIdMap.get(c);null!=d&&(j.iter(this.getDepartmentsDescendantOrSelf(d),function(a){var c=t.Int64Helper.idStr(a.id);b.departmentMap.remove(c)}),this.rootDepartmentIdMap.remove(c))},getRootDepartmentId:function(a){return this.rootDepartmentIdMap.get("_"+a.high+"_"+a.low)},setRootDepartmentId:function(a,b){this.rootDepartmentIdMap.set("_"+a.high+"_"+a.low,b)},setDepartmentUserCount:function(a){var b=this.getDepartment(a.departmentId);null!=b&&(b.userCount=a,b.userCountLoading=!1)},setUserCountLoading:function(a,b){var c=this.getDepartment(a);null!=c&&(c.userCountLoading=b)},needUserCountLoading:function(a){var b=this.getDepartment(a);return null==b?!0:null!=b.userCount||b.userCountLoading?!1:!0},clearDomainDepartmentUsers:function(a){var b=this.getRootDepartmentId(a);null!=b&&(j.iter(this.getDepartmentsDescendantOrSelf(b),function(a){a.userCount=null,a.userIds=null,a.userCountLoading=!1}),this.sendNotification("department_user_count_cleared",a))},setDepartmentUsers:function(a,b){var c=this.getDepartment(a);null!=c&&(c.userIds=b)},getDepartmentPath:function(a){return this.getDepartmentsAncestorOrSelf(a)},getDepartmentPathWithoutRoot:function(a){return this.getDepartmentPath(a).filter(function(a){return!a.isRoot()})},getDepartmentsAncestorOrSelf:function(a){var b=[];return this._getDepartmentsAncestorOrSelf(a,b),b},_getDepartmentsAncestorOrSelf:function(a,b){var c=this.getDepartment(a);null!=c&&(null!=c.parentId&&this._getDepartmentsAncestorOrSelf(c.parentId,b),b.push(c))},getDepartmentsDescendantOrSelf:function(a){var b=[];return this._getDepartmentsDescendantOrSelf(a,b),b},_getDepartmentsDescendantOrSelf:function(a,b){var c=this,d=this.getDepartment(a);null!=d&&(b.push(d),null!=d.childrenIds&&j.iter(d.childrenIds,function(a){c._getDepartmentsDescendantOrSelf(a,b)}))},__class__:t.proxy.DepartmentStoreProxy}),t.proxy.FeaturesProxy=function(){s.patterns.proxy.Proxy.call(this,"features")},e["albero.proxy.FeaturesProxy"]=t.proxy.FeaturesProxy,t.proxy.FeaturesProxy.__name__=["albero","proxy","FeaturesProxy"],t.proxy.FeaturesProxy.__super__=s.patterns.proxy.Proxy,t.proxy.FeaturesProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{canSendMessageOnMultiView:function(a){return this.settings.isOnPremises()||this.selectedDomainHasSolution(a,t.entity.SolutionType.MultiView)},canDetectKeyword:function(a){return this.settings.isOnPremises()||this.selectedDomainHasSolution(a,t.entity.SolutionType.KeywordWatching)},selectedDomainHasSolution:function(a,b){if(null==a)return!1;var c=this.dataStore.getDomain(a);return null==c||null==c.contract||null==c.contract.solutionIds?!1:j.exists(c.contract.solutionIds,function(a){return t.entity.Solution.getSolutionType(a)==b})},__class__:t.proxy.FeaturesProxy}),t.proxy.FileInfoStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"fileInfoStore"),this.fileInfosMap=new x.ds.StringMap,this.stagedFileInfosMaxId=0},e["albero.proxy.FileInfoStoreProxy"]=t.proxy.FileInfoStoreProxy,t.proxy.FileInfoStoreProxy.__name__=["albero","proxy","FileInfoStoreProxy"],t.proxy.FileInfoStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.FileInfoStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{ensureStagedFileInfos:function(a,b){var c="staged_"+("_"+a.high+"_"+a.low)+t.entity.TalkPaneSelection.toPanePrefix(b),d=this.fileInfosMap.get(c);return null==d&&(d=new Array,this.fileInfosMap.set(c,d)),d},getStagedFileInfo:function(a,b,c){return this.getFileInfo(this.ensureStagedFileInfos(a,b),null,c)},createStagedFileInfo:function(a,b,c){var d=new t.entity.FileInfo;return d.id=x.Int64.make(0,++this.stagedFileInfosMaxId),d.talkId=a,null!=b&&(d.contentType=b.type,d.contentSize=b.size,d.url=URL.createObjectURL(t.proxy.FileServiceProxy.getBlobFromUpdatableFile(b)),d.file=b,d.name=b.name),null!=c&&(d.thumbUrl=URL.createObjectURL(c.blob)),d},ensureTalkFileInfos:function(a){var b="_"+a.high+"_"+a.low,c=this.fileInfosMap.get(b);return null==c&&(c=new Array,this.fileInfosMap.set(b,c)),c},getTalkFileInfo:function(a,b,c){return this.getFileInfo(this.ensureTalkFileInfos(a),b,c)},setTalkFileInfo:function(a,b){var c=this.ensureTalkFileInfos(a.talkId);b?c.push(a):c.unshift(a)},deleteFile:function(a){var b=this.getTalkFileInfo(a.talkId,a.messageId,a.fileId);null!=b&&(b.deleted=!0)},getFileInfo:function(a,b,c){return j.find(a,function(a){var d=null==a.messageId&&null==b||t.Int64Helper.eq(a.messageId,b);return d&&t.Int64Helper.eq(a.id,c)})},__class__:t.proxy.FileInfoStoreProxy}),t.proxy.FileServiceProxy=function(){s.patterns.proxy.Proxy.call(this,"fileService"),this.validHost=this.getValidHost()},e["albero.proxy.FileServiceProxy"]=t.proxy.FileServiceProxy,t.proxy.FileServiceProxy.__name__=["albero","proxy","FileServiceProxy"],t.proxy.FileServiceProxy.createByteSizeStringWithUnit=function(a){return t.FileHelper.createByteSizeStringWithUnit(a)},t.proxy.FileServiceProxy.convertUploadableFile=function(a){if(null==a)return a;var b=!1,c=a.name;t.StringHelper.isEmtpy(c)&&(c="clipboard_"+t.DateTimeHelper.getDateStringForFile()+".png",b=!0);var d=a.type;if(t.StringHelper.isEmtpy(d)&&(d=t.proxy.FileServiceProxy.getContentTypeByFileName(c),b=!0),!b)return a;var e={name:c,type:d,file:c,blob:a,size:a.size};return e},t.proxy.FileServiceProxy.getBlobFromUpdatableFile=function(a){return null==a.blob?a:a.blob},t.proxy.FileServiceProxy.getContentTypeByFileName=function(a){var b=t.proxy.FileServiceProxy.getExtension(a);switch(b){case"txt":return"text/plain";case"htm":case"html":return"text/html";case"xml":return"text/xml";case"gif":return"image/gif";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"pdf":return"application/pdf";case"xlsm":return"application/vnd.ms-excel.sheet.macroenabled.12";case"docm":return"application/vnd.ms-word.document.macroenabled.12";case"pptm":return"application/vnd.ms-powerpoint.presentation.macroenabled.12";default:return"application/octet-stream"}},t.proxy.FileServiceProxy.getExtension=function(a){if(null==a)return"";var b=a.split("."),c=b.length;return 0==c?"":b[c-1]},t.proxy.FileServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.FileServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{getValidHost:function(){return"https://"+B.host},downloadUrl:function(a,b){if(null==b&&(b=!1),null==a||0==a.length)return"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(p.startsWith(a,this.validHost)){var c=this.settings.getAccessToken(),d=a;return d+=-1!=a.indexOf("?")?"&":"?",d+="Authorization=ALB%20"+c,b&&(d+="&download=true"),d}return a},download:function(a,b,c){},upload:function(a,b,c,d,e){for(var f=this,g={},h=0,i=m.fields(a.post_form);h<i.length;){var j=i[h];++h;var k=j,l=m.field(a.post_form,j);g[k]=l}var n=a.post_url,o={};K.upload({url:n,headers:o,data:g,files:{file:c},complete:function(a,b){return a?void f.uploadFailed(b,e):void d()},cache:!0})},uploadFailed:function(a,b){this.sendNotification("error_occurred",{message:"ファイルの送信に失敗しました。"}),b(null)},createDummyFile:function(a,b,c){var d=p.replace(a,"/","\\").split("\\");if(0==d.length)return null;var e=d[d.length-1];if(null!=b&&(e=b),0==e.length)return null;var f=t.proxy.FileServiceProxy.getContentTypeByFileName(e);null!=c&&(f=c);var g=1;return{name:e,size:g,type:f}},createThumbnail:function(a,b){b(p.startsWith(a.type,"video/")?null:p.startsWith(a.type,"image/")?null:null)},captureVideo:function(a,b,c){var d=a.width,e=a.height,f=b.videoWidth,g=b.videoHeight;f>g?f>d&&(g*=d/f,f=d):g>e&&(f*=e/g,g=e),1>g&&(g=1),1>f&&(f=1);var h=0,i=0;a.height=0|g,a.width=0|f;var j=a.getContext("2d");j.drawImage(b,h,i,f,g),a.toBlob(function(a){u._d(u.dateStr(),"captureVideo blob callback","","","","");var b={name:"thumb.png",type:"image/png",file:"thumb.png",blob:a,size:a.size};c(b)})},normalizeImage:function(a,b,c){var d=a.width,e=a.height,f=b.width,g=b.height;f>g?f>d&&(g*=d/f,f=d):g>e&&(f*=e/g,g=e),1>g&&(g=1),1>f&&(f=1);a.height=0|g,a.width=0|f,this.drawImageWithAntialias(a,b);try{a.toBlob(function(a){var b={name:"thumb.png",type:"image/png",file:"thumb.png",blob:a,size:a.size};c(b)})}catch(h){u._e(u.dateStr(),"failed to create thumbnail. error:",h,"","",""),c(null)}},drawImageWithAntialias:function(a,b){var c=a.width,d=a.height,e=0|b.width,f=0|b.height;1>e&&(e=1),1>f&&(f=1),u._d(u.dateStr(),"drawImageWithAntialias",e,c,f,d);var g=window.document.createElement("canvas"),h=g.getContext("2d");g.width=e,g.height=f,h.drawImage(b,0,0);var i=window.document.createElement("canvas"),j=i.getContext("2d");i.width=e,i.height=f;for(var k=this.getOptSize(e,c),l=this.getOptSize(f,d);k>c||l>d;)u._d(u.dateStr(),"downsize",e,k,f,l),j.clearRect(0,0,e,f),j.drawImage(g,0,0,e,f,0,0,k,l),h.clearRect(0,0,e,f),h.drawImage(i,0,0,k,l,0,0,k,l),e=k,k=this.getOptSize(e,c),f=l,l=this.getOptSize(f,d);var m=a.getContext("2d");m.drawImage(g,0,0,e,f,0,0,c,d)},getOptSize:function(a,b){return b*Math.ceil(Math.log(a/b)/Math.log(2))},__class__:t.proxy.FileServiceProxy}),t.proxy.KeywordWatcherProxy=function(){s.patterns.proxy.Proxy.call(this,"keywordWatcher")},e["albero.proxy.KeywordWatcherProxy"]=t.proxy.KeywordWatcherProxy,t.proxy.KeywordWatcherProxy.__name__=["albero","proxy","KeywordWatcherProxy"],t.proxy.KeywordWatcherProxy.__super__=s.patterns.proxy.Proxy,t.proxy.KeywordWatcherProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{reserveOnNormalizedKeywordPrepared:function(a){var b=this;t.js.TextCanonicalizer.assureNormalize(function(c){var d=b.settings.getBrowserSettings().keywordWatchingText;if(b.cachedKeyword!=d){b.cachedKeyword=d,b.cachedNormalizedKeywordsMap=new x.ds.StringMap;for(var e=0,f=t.proxy.KeywordParser.KEYWORD_TYPE_STRINGS;e<f.length;){var g=f[e];++e;var h=new Array;b.cachedNormalizedKeywordsMap.set(g,h)}for(var i=0,j=t.proxy.KeywordParser.parse(d);i<j.length;){var k=j[i];++i,b.cachedNormalizedKeywordsMap.get(k.type).push(new t.js.NFKCTextSearch(k.word,!0,c))}}a(b.cachedNormalizedKeywordsMap)})},addkeywordDetection:function(a,b,c){null==this.detectedDomainTalkIdStrings&&(this.detectedDomainTalkIdStrings=new x.ds.StringMap);var d=this.getKey(a,b);if(null!=d)if(this.hasKeywordDetection(a,b))this.detectedDomainTalkIdStrings.set(d,c);else{this.detectedDomainTalkIdStrings.set(d,c);var e=this.settings.getBrowserSettings().keywordWatchingEmphasis;this.sendNotification("keyword_detaction_updated",{domainId:a,talkId:b,detected:!0,emphasis:e})}},readKeywordDetection:function(a,b,c){var d=this.settings.getBrowserSettings().keywordWatchingEmphasis;if(!d){var e=this.getDetectId(a,b);null!=e&&x.Int64.compare(c,e)>=0&&this.removeKeywordDetection(a,b)}},removeKeywordDetection:function(a,b){if(null!=this.detectedDomainTalkIdStrings){var c=this.getKey(a,b);if(null!=c){this.detectedDomainTalkIdStrings.remove(c);var d=this.settings.getBrowserSettings().keywordWatchingEmphasis;this.sendNotification("keyword_detaction_updated",{domainId:a,talkId:b,detected:!1,emphasis:d})}}},removeKeywordDetectionAll:function(){if(null!=this.detectedDomainTalkIdStrings)for(var a=this.settings.getBrowserSettings().keywordWatchingEmphasis,b=this.detectedDomainTalkIdStrings.keys();b.hasNext();){var c=b.next();if(p.startsWith(c,"talk_")){var d=c.substring("talk_".length),e=t.Int64Helper.makeFromIdStr(d);this.sendNotification("keyword_detaction_updated",{domainId:null,talkId:e,detected:!1,emphasis:a})}else if(p.startsWith(c,"announcement_")){var f=c.substring("announcement_".length),g=t.Int64Helper.makeFromIdStr(f);this.sendNotification("keyword_detaction_updated",{domainId:g,talkId:null,detected:!1,emphasis:a})}this.detectedDomainTalkIdStrings.remove(c)}},getDetectId:function(a,b){if(null==this.detectedDomainTalkIdStrings)return null;var c=this.getKey(a,b);return null==c?null:this.detectedDomainTalkIdStrings.get(c)},hasKeywordDetection:function(a,b){return null!=this.getDetectId(a,b)},getKey:function(a,b){return null==a&&null==b?null:null!=b?"talk_"+("_"+b.high+"_"+b.low):"announcement_"+("_"+a.high+"_"+a.low)},__class__:t.proxy.KeywordWatcherProxy});var v={};v.Boot=function(){},e["js.Boot"]=v.Boot,v.Boot.__name__=["js","Boot"],v.Boot.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__},v.Boot.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+v.Boot.__string_rec(a[g],b):v.Boot.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0;h>j;){var k=j++;i+=(k>0?",":"")+v.Boot.__string_rec(a[k],b)}return i+="]"}var l;try{l=a.toString}catch(m){return"???"}if(null!=l&&l!=Object.toString){var n=a.toString();if("[object Object]"!=n)return n}var o=null,p="{\n";b+="	";var q=null!=a.hasOwnProperty;for(var o in a)(!q||a.hasOwnProperty(o))&&"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=p.length&&(p+=", \n"),p+=b+o+" : "+v.Boot.__string_rec(a[o],b));return b=b.substring(1),p+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},v.Boot.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||v.Boot.__interfLoop(g,b))return!0}return v.Boot.__interfLoop(a.__super__,b)},v.Boot.__instanceof=function(a,b){if(null==b)return!1;switch(b){case D:return(0|a)===a;case F:return"number"==typeof a;case G:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case E:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(v.Boot.__interfLoop(v.Boot.getClass(a),b))return!0}return b==H&&null!=a.__name__?!0:b==I&&null!=a.__ename__?!0:a.__enum__==b}},v.Boot.__cast=function(a,b){if(v.Boot.__instanceof(a,b))return a;throw"Cannot cast "+n.string(a)+" to "+n.string(b)},t.proxy.KeywordParser=function(){},e["albero.proxy.KeywordParser"]=t.proxy.KeywordParser,t.proxy.KeywordParser.__name__=["albero","proxy","KeywordParser"],t.proxy.KeywordParser.parse=function(a){for(var b=p.htmlEscape(a,!0),c="&SPACE",d="&FULL_PITCH_SPACE",e=new h("&quot;(.*?)&quot;","g").map(b,function(a){var b=a.matched(1);return b=p.replace(b," ",c),b=p.replace(b,"　",d)}),f=new Array,g=0,i=new h("[ 　]","g").split(e);g<i.length;){var j=i[g];++g,null!=j&&0!=j.length&&(j=p.replace(j,c," "),j=p.replace(j,d,"　"),f.push(t.proxy.KeywordParser.createParsedKeyword(j)))}return f},t.proxy.KeywordParser.createParsedKeyword=function(a){var b=new h("\\[type:([A-Za-z]+)\\](.*)","g");if(b.match(a)){var c=b.matched(1),d=b.matched(2),e=t.proxy.KeywordParser.getKeywordTypeStringByMessageTypeString(c);if("keyword_type_normal"!=e&&-1!=i.indexOf(t.proxy.KeywordParser.KEYWORD_TYPE_STRINGS,e,0))return new t.proxy.ParsedKeyword(e,d)}return new t.proxy.ParsedKeyword("keyword_type_normal",a)},t.proxy.KeywordParser.getKeywordTypeString=function(a){return null!=a?t.proxy.KeywordParser.getKeywordTypeStringByMessageTypeString(t.entity.Message.typeString(a)):"keyword_type_normal"},t.proxy.KeywordParser.getKeywordTypeStringByMessageTypeString=function(a){return null!=a?"keyword_type_"+a:"keyword_type_normal"},t.proxy.ParsedKeyword=function(a,b){
this.type=a,this.word=b},e["albero.proxy.ParsedKeyword"]=t.proxy.ParsedKeyword,t.proxy.ParsedKeyword.__name__=["albero","proxy","ParsedKeyword"],t.proxy.ParsedKeyword.prototype={__class__:t.proxy.ParsedKeyword},t.proxy.MsgPackRpcProxy=function(){this.connectionStatus=t.ConnectionStatus.Ok,s.patterns.proxy.Proxy.call(this,"rpc"),this.responseHandlers=new x.ds.IntMap,this.errorHandler=d(this,this.onServerError),this.connectionKeeper=new t.proxy._MsgPackRpcProxy.ConnectionKeeper(d(this,this.ping))},e["albero.proxy.MsgPackRpcProxy"]=t.proxy.MsgPackRpcProxy,t.proxy.MsgPackRpcProxy.__name__=["albero","proxy","MsgPackRpcProxy"],t.proxy.MsgPackRpcProxy.__super__=s.patterns.proxy.Proxy,t.proxy.MsgPackRpcProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{initWebSocket:function(){null==this.ws&&(this.ws=new t.js.WebSocket(B.endpoint),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onclose=d(this,this.onClose))},finishWebSocket:function(){null!=this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.close(),this.ws=null)},onRegister:function(){this.initWebSocket(),this.connectionKeeper.start()},onRemove:function(){this.connectionKeeper.stop(),this.finishWebSocket()},onOpen:function(){this.connectionStatus=t.ConnectionStatus.Ok,this.connectionKeeper.setConnected(!0),this.sendNotification("SignIn")},onMessage:function(a){var b,c=this,d=new y.Decoder(a,!0).getResult();if(b=v.Boot.__cast(d[0],D),1==b&&4==d.length){var e;e=v.Boot.__cast(d[1],D);var f=d[2],g=d[3],h=this.responseHandlers.get(e);if(null==h)return void u._e(u.dateStr(),"No ResponseHandler prepared. msgId:%s error:%s result:",e,f,g,"");if(null==f){var i=h.onSuccess;null!=i&&i(g)}else{u._e(u.dateStr(),"Receive Error Response. method:",h.method," error:",f,"");var j=h.onError;null!=j?j(f):null!=this.errorHandler&&this.errorHandler(h.method,f)}this.responseHandlers.remove(e)}else if(0==b&&4==d.length){var k;k=v.Boot.__cast(d[1],D);var l;l=v.Boot.__cast(d[2],String);var m;m=v.Boot.__cast(d[3],Array);for(var n=0;n<m.length;){var o=m[n];++n,this.broadcast.handleNotification(l,o,function(){c.ws.send(new y.Encoder([1,k,null,!0]).getBytes())})}}},onClose:function(a,b,c){u._i(u.dateStr(),"onClose. code:"+a+", reason:"+b+", wasClean:"+(null==c?"null":""+c),"","","",""),1001==a&&c||(1e3!=a&&1005!=a||"concurrent access"!=b?1e3!=a&&1005!=a||"forcibly closed"!=b?this.connectionStatus=t.ConnectionStatus.Error:this.connectionStatus=t.ConnectionStatus.ForcibliyClosedError:this.connectionStatus=t.ConnectionStatus.ConcurrentAccessError,this.connectionStatus==t.ConnectionStatus.ForcibliyClosedError?this.sendNotification("SignOut"):this.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))),this.finishWebSocket(),this.connectionKeeper.setConnected(!1)},restart:function(a){null==a&&(a=500);var b=this;this.finishWebSocket();for(var c=this.responseHandlers.keys();c.hasNext();){var d=c.next();this.responseHandlers.remove(d)}x.Timer.delay(function(){b.initWebSocket()},a)},call:function(a,b,c,d){if(null==this.ws)return void u._e(u.dateStr(),"disconnected. data:",this.data,"","","");null==b&&(b=[]);var e=t.proxy.MsgPackRpcProxy.lastMsgId++,f=new t.proxy._MsgPackRpcProxy.ResponseHandler(a,c,d);this.responseHandlers.set(e,f);var g=[0,e,a,b],h=new y.Encoder(g).getBytes();this.ws.send(h)},ping:function(){var a=this.connectionStatus;switch(a[1]){case 2:case 3:return}null==this.ws||this.ws.isClosed()?this.restart():this.connectionKeeper.isConnected()&&this.ws.send(x.io.Bytes.alloc(0))},onServerError:function(a,b){if(this.sendNotification("error_occurred",b),503==b.code&&"service temporarily unavailable"==b.message){var c=b.detail.retry_after;this.restart(1e3*c)}"invalid session"==b.message&&this.restart()},__class__:t.proxy.MsgPackRpcProxy}),t.proxy._MsgPackRpcProxy={},t.proxy._MsgPackRpcProxy.ConnectionKeeper=function(a){this.connected=!1,this.ping=a},e["albero.proxy._MsgPackRpcProxy.ConnectionKeeper"]=t.proxy._MsgPackRpcProxy.ConnectionKeeper,t.proxy._MsgPackRpcProxy.ConnectionKeeper.__name__=["albero","proxy","_MsgPackRpcProxy","ConnectionKeeper"],t.proxy._MsgPackRpcProxy.ConnectionKeeper.prototype={start:function(){},stop:function(){this.deleteTimer()},setConnected:function(a){(this.connected!=a||null==this.timer)&&(this.connected=a,this.resetTimer())},isConnected:function(){return this.connected},resetTimer:function(){var a=this;if(this.deleteTimer(),this.connected)this.timer=new x.Timer(45e3),this.timer.run=this.ping;else{var b=null;b=function(c){var d=n["int"](Math.min(2*c,45e3));return function(){a.ping(),a.timer=x.Timer.delay(b(d),c)}},b(3e3)()}},deleteTimer:function(){null!=this.timer&&(this.timer.stop(),this.timer=null)},__class__:t.proxy._MsgPackRpcProxy.ConnectionKeeper},t.proxy._MsgPackRpcProxy.ResponseHandler=function(a,b,c){this.method=a,this.onSuccess=b,this.onError=c},e["albero.proxy._MsgPackRpcProxy.ResponseHandler"]=t.proxy._MsgPackRpcProxy.ResponseHandler,t.proxy._MsgPackRpcProxy.ResponseHandler.__name__=["albero","proxy","_MsgPackRpcProxy","ResponseHandler"],t.proxy._MsgPackRpcProxy.ResponseHandler.prototype={__class__:t.proxy._MsgPackRpcProxy.ResponseHandler},t.proxy.Error=function(a){this.code=a.code,this.message=a.message,this.detail=a.detail},e["albero.proxy.Error"]=t.proxy.Error,t.proxy.Error.__name__=["albero","proxy","Error"],t.proxy.Error.prototype={__class__:t.proxy.Error},t.proxy.ErrorConverter=function(){},e["albero.proxy.ErrorConverter"]=t.proxy.ErrorConverter,t.proxy.ErrorConverter.__name__=["albero","proxy","ErrorConverter"],t.proxy.ErrorConverter.toLocalError=function(a,b){return{code:b.code,message:b.message,detail:b.detail,localErrorType:a}},t.proxy.RoutingProxy=function(){s.patterns.proxy.Proxy.call(this,"routing")},e["albero.proxy.RoutingProxy"]=t.proxy.RoutingProxy,t.proxy.RoutingProxy.__name__=["albero","proxy","RoutingProxy"],t.proxy.RoutingProxy.__super__=s.patterns.proxy.Proxy,t.proxy.RoutingProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{onRegister:function(){},init:function(){null==this.router&&(this.router=new t.proxy._RoutingProxy.LocalRouter(this,this.settings,this.dataStore),this.router.start())},forward:function(a){this.init(),this.router.forward(a)},redirect:function(a,b){this.init(),this.router.redirect(a,b)},back:function(){null!=this.router&&this.router.back()},stop:function(){null!=this.router&&this.router.started&&this.router.stop()},__class__:t.proxy.RoutingProxy}),t.proxy._RoutingProxy={},t.proxy._RoutingProxy.LocalRouter=function(a,b,c){this.proxy=a,this.settings=b,this.dataStore=c,this.started=!1},e["albero.proxy._RoutingProxy.LocalRouter"]=t.proxy._RoutingProxy.LocalRouter,t.proxy._RoutingProxy.LocalRouter.__name__=["albero","proxy","_RoutingProxy","LocalRouter"],t.proxy._RoutingProxy.LocalRouter.prototype={notify:function(a){var b=this.getDomainId(a);this.settings.setSelectedDomainId(b),this.proxy.sendNotification("current_page_changed",a)},start:function(){this.started=!0},forward:function(a){switch(a[1]){case 0:break;default:this.notify(a)}},redirect:function(a,b){},redirectWithHash:function(){},back:function(){this.notify(this.prev)},stop:function(){this.started=!1},getDomainId:function(a){switch(a[1]){case 2:var b=a[2];return b;case 3:var c=a[2];return c;case 4:var d=a[2];return d;case 5:var e=a[2];return e;case 6:var f=a[2];return f;case 10:var g=a[2];return g;default:return null}},parseFragment:function(a){if(null==a)return null;var b=a.split("/");if(""!=b[0])return null;if(2==b.length){if(""==b[1])return t.Urls.domains;if("settings"==b[1]){var c=this.settings.getLastSelectedDomainId();if(null!=c&&null!=this.dataStore.getDomain(c))return t.History.replaceState("settings",null,"#"+this.toFragment(t.Urls.settings(c))),t.Urls.settings(c);var d=t.proxy.LocalRouterHelper.getOldestDomain(this.dataStore.getDomains());return null!=d?(t.History.replaceState("settings",null,"#"+this.toFragment(t.Urls.settings(d.id))),t.Urls.settings(d.id)):t.Urls.settings(null)}if(b[1]==n.string(t.Urls.error))return t.Urls.error;if(b[1]==n.string(t.Urls.loading))return t.Urls.loading;if("environment"==b[1]){var e=this.settings.getLastSelectedDomainId();if(null!=e&&null!=this.dataStore.getDomain(e))return t.History.replaceState("environment",null,"#"+this.toFragment(t.Urls.environment(e))),t.Urls.environment(e);var f=t.proxy.LocalRouterHelper.getOldestDomain(this.dataStore.getDomains());return null!=f?(t.History.replaceState("environment",null,"#"+this.toFragment(t.Urls.environment(f.id))),t.Urls.environment(f.id)):t.Urls.environment(null)}}else if(3==b.length){var g=t.Int64Helper.parse(b[1]);if(null!=g){if(""==b[2])return t.Urls.domain(g);if("members"==b[2])return t.Urls.members(g);if("talks"==b[2])return this.settings.isMultiViewMode()?t.Urls.talks(g,t.TalkUrlParam.multi):t.Urls.talks(g,t.TalkUrlParam.single);if("actions"==b[2])return t.Urls.actions(g);if("settings"==b[2])return t.Urls.settings(g);if("environment"==b[2])return t.Urls.environment(g)}}else if(4==b.length){var h=t.Int64Helper.parse(b[1]);if(null!=h&&"talks"==b[2]){if("multi"==b[3])return t.Urls.talks(h,t.TalkUrlParam.multi);if("single"==b[3])return t.Urls.talks(h,t.TalkUrlParam.single)}}return null},toFragment:function(a){switch(a[1]){case 1:return"/";case 8:case 9:return"/"+n.string(a);case 2:var b=a[2];return"/"+b.toString()+"/";case 3:var c=a[2];return"/"+c.toString()+"/members";case 4:var d=a[3],e=a[2];switch(d[1]){case 0:return"/"+e.toString()+"/talks/multi";case 1:return"/"+e.toString()+"/talks/single";case 2:return this.settings.isMultiViewMode()?"/"+e.toString()+"/talks/multi":"/"+e.toString()+"/talks/single"}break;case 5:var f=a[2];return"/"+f.toString()+"/actions";case 6:var g=a[2];return null==g&&(g=this.settings.getLastSelectedDomainId()),null!=g?"/"+g.toString()+"/settings":"/settings";case 10:var h=a[2];return null==h&&(h=this.settings.getLastSelectedDomainId()),null!=h?"/"+h.toString()+"/environment":"/environment";default:return null}},__class__:t.proxy._RoutingProxy.LocalRouter},t.proxy.LocalRouterHelper=function(){},e["albero.proxy.LocalRouterHelper"]=t.proxy.LocalRouterHelper,t.proxy.LocalRouterHelper.__name__=["albero","proxy","LocalRouterHelper"],t.proxy.LocalRouterHelper.getOldestDomain=function(a){if(null!=a&&a.length>0){for(var b=null,c=0;c<a.length;){var d=a[c];++c,(null==b||x.Int64.compare(b.id,d.id)>0)&&(b=d)}return b}return null},t.proxy.SearchServiceProxy=function(){s.patterns.proxy.Proxy.call(this,"searchService")},e["albero.proxy.SearchServiceProxy"]=t.proxy.SearchServiceProxy,t.proxy.SearchServiceProxy.__name__=["albero","proxy","SearchServiceProxy"],t.proxy.SearchServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.SearchServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{isSearching:function(){return this.searching},clearSearching:function(){this.searching=!1},isRecentParams:function(a){return null==this.recentParams||null==a?!1:this.recentParams.eq(a)},clearRecentParams:function(){this.recentParams=null},clearEditingParams:function(){this.editingParams=null},saveParams:function(a){this.editingParams=a,this.recentParams=a.copy()},updateTalkIdParam:function(a){this.assureParams(),this.editingParams.talkId=a},updateSearchTypeParam:function(a){this.assureParams(),this.editingParams.searchType=a},updateFromUserIdParam:function(a){this.assureParams(),this.editingParams.fromUserId=a},updateKeywordParam:function(a){this.assureParams(),this.editingParams.keyword=a},updateDomainIdParam:function(a){this.assureParams(),this.editingParams.domainId=a},updateSinceTextParam:function(a){this.assureParams(),this.editingParams.sinceText=a},updateUntilTextParam:function(a){this.assureParams(),this.editingParams.untilText=a},assureParams:function(){if(null==this.editingParams){var a={domain_id_str:t.Int64Helper.idStr(this.settings.getSelectedDomainId())};this.editingParams=new t.entity.SearchParams(a)}},prepareForSearching:function(a,b){this.searching=!0,null==b&&this.sendNotification("notify_search_prepare",{searching:!0,params:a})},notifySearchMessagesFail:function(){this.searching=!1,this.sendNotification("notify_search_messages_fail",{})},notifySearchAttachmentsFail:function(){this.searching=!1,this.sendNotification("notify_search_attachments_fail",{})},saveSearchMessagesResult:function(a){null==this.contextMap&&(this.contextMap=new x.ds.StringMap),this.messagesNextMarker=a.nextMarker,null==a.marker&&(this.hitMessageIdSet=new x.ds.StringMap);for(var b=0,c=a.contents;b<c.length;){var d=c[b];++b;var e=t.Int64Helper.idStr(d.messages[0].id);this.contextMap.set(e,d),this.hitMessageIdSet=j.fold(d.messages,function(a,b){if(a.hit){var c=t.Int64Helper.idStr(a.id);b.set(c,1)}return b},this.hitMessageIdSet)}this.searching=!1,this.sendNotification("notify_search_messages",a)},saveSearchAttachmentsResult:function(a){null==this.attachmentsMap&&(this.attachmentsMap=new x.ds.StringMap),this.attachmentsNextMarker=a.nextMarker;for(var b=0,c=a.contents;b<c.length;){var d=c[b];++b;var e=t.Int64Helper.idStr(d.id);this.attachmentsMap.set(e,d)}this.searching=!1,this.sendNotification("notify_search_attachments",a)},getHitContext:function(a){return this.contextMap.get(a)},getFileInfo:function(a){return this.attachmentsMap.get(a)},isHitMessage:function(a){return this.hitMessageIdSet.exists("_"+a.high+"_"+a.low)},reserveOnNormalizedKeywordPrepared:function(a){var b=this;null!=this.recentParams&&null!=this.recentParams.keyword&&t.js.TextCanonicalizer.assureNormalize(function(c){var d;if(d=null==b.recentParams?"":b.recentParams.keyword,b.cachedKeyword!=d){b.cachedKeyword=d,null==b.cachedNormalizedKeywords?b.cachedNormalizedKeywords=new Array:b.cachedNormalizedKeywords.splice(0,b.cachedNormalizedKeywords.length);for(var e=new h("[ 　]","g").split(p.htmlEscape(d,!0)),f=0;f<e.length;){var g=e[f];++f,null!=g&&0!=g.length&&b.cachedNormalizedKeywords.push(new t.js.NFKCTextSearch(g,!0,c))}}a(b.cachedNormalizedKeywords)})},__class__:t.proxy.SearchServiceProxy}),t.proxy.SettingsProxy=function(){this.selectedDomainId=null,this.remember=!0,s.patterns.proxy.Proxy.call(this,"settings")},e["albero.proxy.SettingsProxy"]=t.proxy.SettingsProxy,t.proxy.SettingsProxy.__name__=["albero","proxy","SettingsProxy"],t.proxy.SettingsProxy.__super__=s.patterns.proxy.Proxy,t.proxy.SettingsProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{onRegister:function(){this.loadBrowserSettings()},setAccessTokenRemember:function(a){this.remember=a},setAccessToken:function(a){this.remember&&(this.accessToken=a,this.sendNotification("access_token_changed",a))},getAccessToken:function(){return null==this.accessToken&&(this.accessToken=B.accessToken),this.accessToken},clearAccessToken:function(){this.accessToken=null},getOs:function(){return"bot"},getIDFV:function(){var a=t.StorageHelper.getItem("idfv");return(null==a||""==a)&&(a=t.StringHelper.randomString(),t.StorageHelper.setItem("idfv",a)),a},setConfiguration:function(a){this.configuration=a,this.sendNotification("configuration_changed",a)},getConfiguration:function(){return this.configuration},setSelectedDomainId:function(a){t.Int64Helper.eq(this.selectedDomainId,a)||(null!=a?(t.StorageHelper.setItem("selected_domain_id_h",null==a.high?"null":""+a.high),t.StorageHelper.setItem("selected_domain_id_l",null==a.low?"null":""+a.low)):(t.StorageHelper.removeItem("selected_domain_id_h"),t.StorageHelper.removeItem("selected_domain_id_l")),this.selectedDomainId=a,this.sendNotification("domain_selection_changed",a))},getLastSelectedDomainId:function(){var a,b=t.StorageHelper.getItemAsInt("selected_domain_id_h"),c=t.StorageHelper.getItemAsInt("selected_domain_id_l");return a=null!=b&&null!=c?new x.Int64(b,c):null},getSelectedDomainId:function(){return this.selectedDomainId},clearDomainSelection:function(){this.selectedDomainId=null,t.StorageHelper.removeItem("selected_domain_id_h"),t.StorageHelper.removeItem("selected_domain_id_l")},clearSelectedTalkIfMatch:function(a){for(var b=this,c=[t.entity.PaneType.SingleTalkPane,t.entity.PaneType.MultiTalkPane1,t.entity.PaneType.MultiTalkPane2,t.entity.PaneType.MultiTalkPane3].filter(function(c){var d=b.getTalkSelection(c);switch(a[1]){case 1:var e=(a[3],a[2]);switch(d[1]){case 1:var f=(d[3],d[2]);return null!=e&&null!=f&&e.high==f.high&&e.low==f.low;default:return!1}break;case 2:return t.entity.TalkSelection.AnnouncementsSelected==d;default:return!1}}),d=0;d<c.length;){var e=c[d];++d,this.clearSelectedTalk(e)}},clearSelectedTalk:function(a){if(null==a&&(a=t.entity.PaneType.SingleTalkPane),this.hasSelectedTalkOrAnnouncements(a)){var b,c=t.Int64Helper.idStr(this.selectedDomainId);b=this.paneTalkSelections.get(c),b.remove(a),this.sendNotification("talk_selection_changed",new t.entity.TalkPaneSelection(a,t.entity.TalkSelection.NotSelected))}},selectTalk:function(a,b,c){var d=t.Int64Helper.idStr(b.domainId);if(null==d)return!1;var e=this.assureTalkSelectionMap(d),f=t.entity.TalkSelection.TalkSelected(b.id,c);return e.set(a,f),t.Int64Helper.eq(b.domainId,this.selectedDomainId)?(this.sendNotification("talk_selection_changed",new t.entity.TalkPaneSelection(a,f)),!0):!1},selectAnnouncement:function(a){if(null==this.selectedDomainId)return!1;var b=t.Int64Helper.idStr(this.selectedDomainId),c=this.assureTalkSelectionMap(b);return c.set(a,t.entity.TalkSelection.AnnouncementsSelected),this.sendNotification("talk_selection_changed",new t.entity.TalkPaneSelection(a,t.entity.TalkSelection.AnnouncementsSelected)),!0},reselectTalk:function(a,b){var c=this.assureTalkSelectionMap("_"+a.high+"_"+a.low),d=c.get(b);return null==d&&(d=t.entity.TalkSelection.NotSelected),this.sendNotification("talk_selection_changed",new t.entity.TalkPaneSelection(b,d)),!0},hasSelectedTalkOrAnnouncements:function(a){null==a&&(a=t.entity.PaneType.SingleTalkPane);var b=this.getTalkSelectionMap();if(null==b)return!1;var c=b.get(a);return c!=t.entity.TalkSelection.NotSelected},hasSelectedTalk:function(a){null==a&&(a=t.entity.PaneType.SingleTalkPane);var b=this.getTalkSelectionMap();if(null==b)return!1;var c=b.get(a);if(null==c)return!1;switch(c[1]){case 0:return!1;default:return!0}},getTalkSelectionMap:function(){if(null==this.paneTalkSelections)return null;if(null==this.selectedDomainId)return null;var a=t.Int64Helper.idStr(this.selectedDomainId);return this.paneTalkSelections.get(a)},assureTalkSelectionMap:function(a){null==this.paneTalkSelections&&(this.paneTalkSelections=new x.ds.StringMap);var b=this.paneTalkSelections.get(a);return null==b&&(b=new x.ds.EnumValueMap,this.paneTalkSelections.set(a,b)),b},getSelectedTalkId:function(){var a=this.getTalkSelection(t.entity.PaneType.SingleTalkPane);switch(a[1]){case 1:var b=(a[3],a[2]);return b;default:return null}},getTalkSelection:function(a){if(null==this.paneTalkSelections)return t.entity.TalkSelection.NotSelected;var b=this.getTalkSelectionMap();if(null==b)return t.entity.TalkSelection.NotSelected;var c=b.get(a);return null==c?t.entity.TalkSelection.NotSelected:c},isSendByEnter:function(){return null==this.sendByEnter&&(this.sendByEnter=!0),this.sendByEnter},setSendByEnter:function(a){a!=this.sendByEnter&&(this.sendByEnter=a,this.sendNotification("send_by_enter_changed",a))},setSelectedStampTabId:function(a){t.StorageHelper.setItem("selected_stamp_tab_id",null==a?"null":""+a)},getSelectedStampTabId:function(){var a=t.StorageHelper.getItemAsInt("selected_stamp_tab_id");return null==a?0:a},clearSelectedStampTabId:function(){t.StorageHelper.removeItem("selected_stamp_tab_id")},setInputTextForTalkId:function(a,b){null==a||0==a.length?this.clearInputTextForTalkId(b):(this.loadInputTextForAll(),this.inputTexts["_"+b.high+"_"+b.low]=a)},getInputTextForTalkId:function(a){this.loadInputTextForAll();var b=this.inputTexts["_"+a.high+"_"+a.low];return null!=b?b:""},clearInputTextForTalkId:function(a){this.loadInputTextForAll(),delete this.inputTexts["_"+a.high+"_"+a.low]},loadInputTextForAll:function(){null==this.inputTexts&&(this.inputTexts=t.StorageHelper.getItemAsJson("input_text"),null==this.inputTexts&&(this.inputTexts={}))},saveInputTextForAll:function(){if(null!=this.inputTexts){var a=JSON.stringify(this.inputTexts);t.StorageHelper.setItem("input_text",a)}},clearInputTextForAll:function(){t.StorageHelper.removeItem("input_text"),this.inputTexts=null},setCopyProfileToAllDomains:function(a){a?t.StorageHelper.setItem("copy_profile_to_all_domains","true"):t.StorageHelper.removeItem("copy_profile_to_all_domains")},isCopyProfileToAllDomains:function(){return null!=t.StorageHelper.getItem("copy_profile_to_all_domains")},setSearchHistoriesForSelectedDomain:function(a){null!=this.selectedDomainId&&(this.loadSearchHistoryForAll(),null==a?delete this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)]:this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)]=a,this.saveSearchHistoryForAll())},getSearchHistoriesForSelectedDomain:function(){if(null==this.selectedDomainId)return null;this.loadSearchHistoryForAll();var a=this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)];return a},loadSearchHistoryForAll:function(){null==this.searchHistories&&(this.searchHistories=t.StorageHelper.getItemAsJson("search_histories"),null==this.searchHistories&&(this.searchHistories={}))},saveSearchHistoryForAll:function(){if(null!=this.searchHistories){var a=JSON.stringify(this.searchHistories);t.StorageHelper.setItem("search_histories",a)}},setSelectedDepartmentId:function(a,b){null!=a&&(this.loadSelectedDepartmentIdsForAll(),null==b?this.selectedDepartmentIds.remove("_"+a.high+"_"+a.low):this.selectedDepartmentIds.set("_"+a.high+"_"+a.low,b),this.saveSelectedDepartmentIdsForAll())},getSelectedDepartmentId:function(a){return null==a?null:(this.loadSelectedDepartmentIdsForAll(),this.selectedDepartmentIds.get("_"+a.high+"_"+a.low))},loadSelectedDepartmentIdsForAll:function(){null==this.selectedDepartmentIds&&(this.selectedDepartmentIds=t.StorageHelper.getItemWithUnserialize("selected_department_ids"),null==this.selectedDepartmentIds&&(this.selectedDepartmentIds=new x.ds.StringMap))},saveSelectedDepartmentIdsForAll:function(){null!=this.selectedDepartmentIds&&t.StorageHelper.setItemWithSerialize("selected_department_ids",this.selectedDepartmentIds)},setRightPanelOpened:function(a){a?t.StorageHelper.removeItem("right_panel_opened"):t.StorageHelper.setItem("right_panel_opened","false")},isRightPanelOpened:function(){return null==t.StorageHelper.getItem("right_panel_opened")},setMultiViewMode:function(a){a?t.StorageHelper.setItem("multi_view_mode","true"):t.StorageHelper.removeItem("multi_view_mode")},isMultiViewMode:function(){return null!=t.StorageHelper.getItem("multi_view_mode")},setPasswordWarningSkipUntil:function(a){null==a?t.StorageHelper.removeItem("password_warning_skip_until"):t.StorageHelper.setItem("password_warning_skip_until","_"+a.high+"_"+a.low)},getPasswordWarningSkipUntil:function(){var a=t.StorageHelper.getItem("password_warning_skip_until");return null==a?null:t.Int64Helper.makeFromIdStr(a)},setLastUsedExpiredAt:function(a){null==a?t.StorageHelper.removeItem("last_used_expired_at"):t.StorageHelper.setItem("last_used_expired_at","_"+a.high+"_"+a.low)},getLastUsedExpiredAt:function(){var a=t.StorageHelper.getItem("last_used_expired_at");return null==a?null:t.Int64Helper.makeFromIdStr(a)},setOnPremise:function(a){this.onPremises=a},isOnPremises:function(){return this.onPremises},getBrowserSettings:function(){return this.browserSettings},applyNotificationSettings:function(a){return a.copyNotificationSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyKeywordWatchingSettings:function(a){return a.copyKeywordSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyTalkSettings:function(a){return a.copyTalkSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyUserDataSettings:function(a){return a.copyUserDataContainerTo(this.browserSettings),this.saveBrowserSettings()},loadBrowserSettings:function(){this.browserSettings=t.entity.BrowserSettings.fromJson(t.StorageHelper.getItemAsJson(t.entity.BrowserSettings.NAME))},saveBrowserSettings:function(){var a=t.StorageHelper.getItemAsJson(t.entity.BrowserSettings.NAME);return null==a&&(a={}),this.browserSettings.copyTo(a),t.StorageHelper.setItem(t.entity.BrowserSettings.NAME,JSON.stringify(a))},__class__:t.proxy.SettingsProxy}),t.proxy.SolutionsStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"solutionsStore")},e["albero.proxy.SolutionsStoreProxy"]=t.proxy.SolutionsStoreProxy,t.proxy.SolutionsStoreProxy.__name__=["albero","proxy","SolutionsStoreProxy"],t.proxy.SolutionsStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.SolutionsStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{getSolutions:function(a){var b=this;return null==this.solutionsMap?[]:this.getSolutionIds(a).map(function(a){return b.solutionsMap.get(a)}).filter(function(a){return null!=a})},getSolution:function(a){return null==this.solutionsMap?null:this.solutionsMap.get(a)},getSolutionIds:function(a){return null==a?[]:null==a.contract?[]:null==a.contract.solutionIds?[]:a.contract.solutionIds},getSolutionIdsNotLoaded:function(a){var b=this;return this.getSolutionIds(a).filter(function(a){return null==b.solutionsMap||!b.solutionsMap.exists(a)})},setSolution:function(a){null==this.solutionsMap&&(this.solutionsMap=new x.ds.IntMap),this.solutionsMap.set(a.solutionId,a)},__class__:t.proxy.SolutionsStoreProxy}),s.interfaces.IMediator=function(){},e["puremvc.interfaces.IMediator"]=s.interfaces.IMediator,s.interfaces.IMediator.__name__=["puremvc","interfaces","IMediator"],s.interfaces.IMediator.prototype={__class__:s.interfaces.IMediator},s.patterns.mediator={},s.patterns.mediator.Mediator=function(a,b){s.patterns.observer.Notifier.call(this),null!=a?this.mediatorName=a:this.mediatorName=s.patterns.mediator.Mediator.NAME,null!=b&&(this.viewComponent=b)},e["puremvc.patterns.mediator.Mediator"]=s.patterns.mediator.Mediator,s.patterns.mediator.Mediator.__name__=["puremvc","patterns","mediator","Mediator"],s.patterns.mediator.Mediator.__interfaces__=[s.interfaces.IMediator],s.patterns.mediator.Mediator.__super__=s.patterns.observer.Notifier,s.patterns.mediator.Mediator.prototype=b(s.patterns.observer.Notifier.prototype,{getMediatorName:function(){return this.mediatorName},setViewComponent:function(a){this.viewComponent=a},getViewComponent:function(){return this.viewComponent},listNotificationInterests:function(){return[]},handleNotification:function(a){},onRegister:function(){},onRemove:function(){},__class__:s.patterns.mediator.Mediator});var w={};w.mediator={},w.mediator.CommandLineMediator=function(){s.patterns.mediator.Mediator.call(this,"commandline",null)},e["albero_cli.mediator.CommandLineMediator"]=w.mediator.CommandLineMediator,w.mediator.CommandLineMediator.__name__=["albero_cli","mediator","CommandLineMediator"],w.mediator.CommandLineMediator.__super__=s.patterns.mediator.Mediator,w.mediator.CommandLineMediator.prototype=b(s.patterns.mediator.Mediator.prototype,{onRegister:function(){this.getViewComponent();this.eventEmitter=g.getInstance(),this.dataRecovered=!1,this.startDataSaver()},listNotificationInterests:function(){return["app_state_changed","access_token_changed","current_user_changed","configuration_changed","domain_selection_changed","talk_selection_changed","talk_list_scroll_to_talk_top_needed","user_selection_needed","user_selection_changed","friend_selection_needed","stamp_set_changed","stamp_selection_changed","phone_call_started","phone_call_accepted","phone_call_connected","phone_call_hangued_up","action_selection_changed","current_page_changed","current_page_not_changed","fileinfo_selection_changed","message_fileinfo_selection_changed","staged_fileinfo_selection_changed","error_occurred","brand_badge_changed","send_form_top_changed","solutions_loaded","right_pane_opened","right_pane_closed","password_expiration_overed","password_expiration_warned","photo_editor_saved","mc_authenticated_user_received","data_recovered","notify_update_user","notify_add_friend","notify_add_acquaintance","notify_delete_friend","notify_delete_acquaintance","notify_update_domain_users","get_domain_users_responsed","get_users_responsed","get_profile_responsed","update_user_responsed","update_profile_responsed","notify_add_domain_invite","notify_accept_domain_invite","notify_delete_domain_invite","notify_join_domain","notify_update_domain","notify_leave_domain","notify_create_pair_talk","notify_create_group_talk","notify_update_group_talk","notify_add_talkers","notify_delete_talker","notify_delete_talk","notify_create_message","notify_update_read_statuses","notify_update_talk_status","notify_update_local_talk_status","notify_get_messages","notify_get_message_status","create_message_start","create_message_complete","create_message_fail","notify_create_announcement","notify_update_announcement_status","notify_get_announcements","create_announcement_start","create_announcement_complete","create_announcement_fail","notify_update_question","get_questions_responsed","notify_create_attachment","notify_delete_attachment","get_file_responsed","notify_search_messages","notify_search_attachments","notify_search_messages_fail","notify_search_attachments_fail","notify_search_prepare","notify_search_clear","notify_search_box_popup","notify_add_account_control_request","notify_delete_account_control_request","notify_join_account_control_group","notify_update_account_control_group_partially","notify_leave_account_control_group"]},handleNotification:function(a){var b=a.getName();switch(b){case"data_recovered":if(this.dataRecovered)return;this.dataRecovered=!0,this.eventEmitter.emit(a.getName());break;case"error_occurred":this.eventEmitter.emit(a.getName(),new Error("AdapterError"),a.getBody());break;case"current_page_changed":var c=a.getBody();r.enumEq(c,t.Urls.error)&&(this.dataRecovered=!1),this.eventEmitter.emit(a.getName(),a.getBody());break;default:this.eventEmitter.emit(a.getName(),a.getBody())}},startDataSaver:function(){var a=this;x.Timer.delay(function(){a.dataRecovered&&a.dataStore.saveIfNeeded(),a.startDataSaver()},5e3)},__class__:w.mediator.CommandLineMediator});var x={};x.Int64=function(a,b){this.high=0|a,this.low=0|b},e["haxe.Int64"]=x.Int64,x.Int64.__name__=["haxe","Int64"],x.Int64.make=function(a,b){return new x.Int64(a,b)},x.Int64.ofInt=function(a){return new x.Int64(a>>31,a)},x.Int64.getLow=function(a){return a.low},x.Int64.getHigh=function(a){return a.high},x.Int64.add=function(a,b){var c=a.high+b.high|0,d=a.low+b.low|0;return x.Int64.uicompare(d,a.low)<0&&c++,new x.Int64(c,d)},x.Int64.sub=function(a,b){var c=a.high-b.high|0,d=a.low-b.low|0;return x.Int64.uicompare(a.low,b.low)<0&&c--,new x.Int64(c,d)},x.Int64.mul=function(a,b){var c=65535,d=a.low&c,e=a.low>>>16,f=b.low&c,g=b.low>>>16,h=d*f,i=e*f,j=d*g,k=e*g,l=h,m=k+(j>>>16)+(i>>>16)|0;return j=j<<16|0,l=l+j|0,x.Int64.uicompare(l,j)<0&&(m=m+1|0),i=i<<16|0,l=l+i|0,x.Int64.uicompare(l,i)<0&&(m=m+1|0),m=m+function(c){var d,e=a.low,f=b.high;return d=(e*(f>>>16)<<16|0)+e*(65535&f)|0}(this)|0,m=m+function(c){var d,e=a.high,f=b.low;return d=(e*(f>>>16)<<16|0)+e*(65535&f)|0}(this)|0,new x.Int64(m,l)},x.Int64.divMod=function(a,b){var c=new x.Int64(0,0),d=0,e=1;for(b=new x.Int64(b.high,b.low);b.high>=0;){var f=x.Int64.ucompare(b,a);if(b.high=b.high<<1|0|b.low>>>31|0,b.low=b.low<<1|0,d=d<<1|0|e>>>31|0,e=e<<1|0,f>=0)break}for(;0!=(e|d|0);)x.Int64.ucompare(a,b)>=0&&(c.high=c.high|d|0,c.low=c.low|e|0,a=x.Int64.sub(a,b)),e=e>>>1|(d<<31|0)|0,d>>>=1,b.low=b.low>>>1|(b.high<<31|0)|0,b.high=b.high>>>1;return{quotient:c,modulus:a}},x.Int64.neg=function(a){var b=0|~a.high,c=0|-a.low;return 0==c&&b++,new x.Int64(b,c)},x.Int64.uicompare=function(a,b){return 0>a?0>b?~b-~a|0:1:0>b?-1:a-b|0},x.Int64.compare=function(a,b){var c=a.high-b.high|0;return 0!=c?c:x.Int64.uicompare(a.low,b.low)},x.Int64.ucompare=function(a,b){var c=x.Int64.uicompare(a.high,b.high);return 0!=c?c:x.Int64.uicompare(a.low,b.low)},x.Int64.prototype={toString:function(){if(0==(this.high|this.low))return"0";var a="",b=!1,c=this;c.high<0&&(b=!0,c=x.Int64.neg(c));for(var d=new x.Int64(0,10);0!=(c.high|c.low);){
var e=x.Int64.divMod(c,d);a=e.modulus.low+a,c=e.quotient}return b&&(a="-"+a),a},__class__:x.Int64},x.Serializer=function(){this.buf=new o,this.cache=new Array,this.useCache=x.Serializer.USE_CACHE,this.useEnumIndex=x.Serializer.USE_ENUM_INDEX,this.shash=new x.ds.StringMap,this.scount=0},e["haxe.Serializer"]=x.Serializer,x.Serializer.__name__=["haxe","Serializer"],x.Serializer.run=function(a){var b=new x.Serializer;return b.serialize(a),b.toString()},x.Serializer.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);return null!=b?(this.buf.b+="R",void(null==b?this.buf.b+="null":this.buf.b+=""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),null==a.length?this.buf.b+="null":this.buf.b+=""+a.length,this.buf.b+=":",void(null==a?this.buf.b+="null":this.buf.b+=""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;d>c;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",null==e?this.buf.b+="null":this.buf.b+=""+e,!0}return this.cache.push(a),!1},serializeFields:function(a){for(var b=0,c=m.fields(a);b<c.length;){var d=c[b];++b,this.serializeString(d),this.serialize(m.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=r["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:var c=a;if(0==c)return void(this.buf.b+="z");this.buf.b+="i",null==c?this.buf.b+="null":this.buf.b+=""+c;break;case 2:var d=a;Math.isNaN(d)?this.buf.b+="k":Math.isFinite(d)?(this.buf.b+="d",null==d?this.buf.b+="null":this.buf.b+=""+d):0>d?this.buf.b+="m":this.buf.b+="p";break;case 3:a?this.buf.b+="t":this.buf.b+="f";break;case 6:var e=b[2];if(e==String)return void this.serializeString(a);if(this.useCache&&this.serializeRef(a))return;switch(e){case Array:var f=0;this.buf.b+="a";for(var g=a.length,h=0;g>h;){var j=h++;null==a[j]?f++:(f>0&&(1==f?this.buf.b+="n":(this.buf.b+="u",null==f?this.buf.b+="null":this.buf.b+=""+f),f=0),this.serialize(a[j]))}f>0&&(1==f?this.buf.b+="n":(this.buf.b+="u",null==f?this.buf.b+="null":this.buf.b+=""+f)),this.buf.b+="h";break;case k:this.buf.b+="l";for(var l=a,p=l.iterator();p.hasNext();){var q=p.next();this.serialize(q)}this.buf.b+="h";break;case Date:var s=a;this.buf.b+="v",this.buf.add(i.dateStr(s));break;case x.ds.StringMap:this.buf.b+="b";for(var t=a,u=t.keys();u.hasNext();){var v=u.next();this.serializeString(v),this.serialize(t.get(v))}this.buf.b+="h";break;case x.ds.IntMap:this.buf.b+="q";for(var w=a,y=w.keys();y.hasNext();){var z=y.next();this.buf.b+=":",null==z?this.buf.b+="null":this.buf.b+=""+z,this.serialize(w.get(z))}this.buf.b+="h";break;case x.ds.ObjectMap:this.buf.b+="M";for(var A=a,B=A.keys();B.hasNext();){var C=B.next(),D=m.field(C,"__id__");m.deleteField(C,"__id__"),this.serialize(C),C.__id__=D,this.serialize(A.h[C.__id__])}this.buf.b+="h";break;case x.io.Bytes:for(var E=a,F=0,G=E.length-2,H=new o,I=x.Serializer.BASE64;G>F;){var J=E.get(F++),K=E.get(F++),L=E.get(F++);H.add(I.charAt(J>>2)),H.add(I.charAt(63&(J<<4|K>>4))),H.add(I.charAt(63&(K<<2|L>>6))),H.add(I.charAt(63&L))}if(F==G){var M=E.get(F++),N=E.get(F++);H.add(I.charAt(M>>2)),H.add(I.charAt(63&(M<<4|N>>4))),H.add(I.charAt(N<<2&63))}else if(F==G+1){var O=E.get(F++);H.add(I.charAt(O>>2)),H.add(I.charAt(O<<4&63))}var P=H.b;this.buf.b+="s",null==P.length?this.buf.b+="null":this.buf.b+=""+P.length,this.buf.b+=":",null==P?this.buf.b+="null":this.buf.b+=""+P;break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(r.getClassName(e)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(r.getClassName(e)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))return;this.buf.b+="o",this.serializeFields(a);break;case 7:var Q=b[2];if(this.useCache){if(this.serializeRef(a))return;this.cache.pop()}this.useEnumIndex?this.buf.b+="j":this.buf.b+="w",this.serializeString(r.getEnumName(Q)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=n.string(a[1])):this.serializeString(a[0]),this.buf.b+=":";var R=a.length;this.buf.b+=n.string(R-2);for(var S=2;R>S;){var T=S++;this.serialize(a[T])}this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+n.string(a)}},__class__:x.Serializer},x.Timer=function(a){var b=this;this.id=setInterval(function(){b.run()},a)},e["haxe.Timer"]=x.Timer,x.Timer.__name__=["haxe","Timer"],x.Timer.delay=function(a,b){var c=new x.Timer(b);return c.run=function(){c.stop(),a()},c},x.Timer.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:x.Timer},x.Unserializer=function(a){this.buf=a,this.length=a.length,this.pos=0,this.scache=new Array,this.cache=new Array;var b=x.Unserializer.DEFAULT_RESOLVER;null==b&&(b=r,x.Unserializer.DEFAULT_RESOLVER=b),this.setResolver(b)},e["haxe.Unserializer"]=x.Unserializer,x.Unserializer.__name__=["haxe","Unserializer"],x.Unserializer.initCodes=function(){for(var a=new Array,b=0,c=x.Unserializer.BASE64.length;c>b;){var d=b++;a[x.Unserializer.BASE64.charCodeAt(d)]=d}return a},x.Unserializer.run=function(a){return new x.Unserializer(a).unserialize()},x.Unserializer.prototype={setResolver:function(a){null==a?this.resolver={resolveClass:function(a){return null},resolveEnum:function(a){return null}}:this.resolver=a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45!=d){if(48>d||d>57)break;a=10*a+(d-48),this.pos++}else{if(this.pos!=c)break;b=!0,this.pos++}}return b&&(a*=-1),a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return r.createEnum(a,b);for(var d=new Array;c-->0;)d.push(this.unserialize());return r.createEnum(a,b,d)},unserialize:function(){var a=this.get(this.pos++);switch(a){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var b=this.pos;;){var c=this.buf.charCodeAt(this.pos);if(!(c>=43&&58>c||101==c||69==c))break;this.pos++}return n.parseFloat(i.substr(this.buf,b,this.pos-b));case 121:var d=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<d)throw"Invalid string length";var e=i.substr(this.buf,this.pos,d);return this.pos+=d,e=decodeURIComponent(e.split("+").join(" ")),this.scache.push(e),e;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var f=(this.buf,new Array);for(this.cache.push(f);;){var g=this.buf.charCodeAt(this.pos);if(104==g){this.pos++;break}if(117==g){this.pos++;var h=this.readDigits();f[f.length+h-1]=null}else f.push(this.unserialize())}return f;case 111:var j={};return this.cache.push(j),this.unserializeObject(j),j;case 114:var l=this.readDigits();if(0>l||l>=this.cache.length)throw"Invalid reference";return this.cache[l];case 82:var m=this.readDigits();if(0>m||m>=this.scache.length)throw"Invalid string reference";return this.scache[m];case 120:throw this.unserialize();case 99:var o=this.unserialize(),q=this.resolver.resolveClass(o);if(null==q)throw"Class not found "+o;var s=r.createEmptyInstance(q);return this.cache.push(s),this.unserializeObject(s),s;case 119:var t=this.unserialize(),u=this.resolver.resolveEnum(t);if(null==u)throw"Enum not found "+t;var v=this.unserializeEnum(u,this.unserialize());return this.cache.push(v),v;case 106:var w=this.unserialize(),y=this.resolver.resolveEnum(w);if(null==y)throw"Enum not found "+w;this.pos++;var z=this.readDigits(),A=r.getEnumConstructs(y)[z];if(null==A)throw"Unknown enum index "+w+"@"+z;var B=this.unserializeEnum(y,A);return this.cache.push(B),B;case 108:var C=new k;this.cache.push(C);for(this.buf;104!=this.buf.charCodeAt(this.pos);)C.add(this.unserialize());return this.pos++,C;case 98:var D=new x.ds.StringMap;this.cache.push(D);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var E=this.unserialize();D.set(E,this.unserialize())}return this.pos++,D;case 113:var F=new x.ds.IntMap;this.cache.push(F);for(var G=(this.buf,this.get(this.pos++));58==G;){var H=this.readDigits();F.set(H,this.unserialize()),G=this.get(this.pos++)}if(104!=G)throw"Invalid IntMap format";return F;case 77:var I=new x.ds.ObjectMap;this.cache.push(I);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var J=this.unserialize();I.set(J,this.unserialize())}return this.pos++,I;case 118:var K,L=i.substr(this.buf,this.pos,19);return K=i.strDate(L),this.cache.push(K),this.pos+=19,K;case 115:var M=this.readDigits(),N=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<M)throw"Invalid bytes length";var O=x.Unserializer.CODES;null==O&&(O=x.Unserializer.initCodes(),x.Unserializer.CODES=O);var P,Q=this.pos,R=3&M;P=3*(M>>2)+(R>=2?R-1:0);for(var S=Q+(M-R),T=x.io.Bytes.alloc(P),U=0;S>Q;){var V=O[p.fastCodeAt(N,Q++)],W=O[p.fastCodeAt(N,Q++)];T.set(U++,V<<2|W>>4);var X=O[p.fastCodeAt(N,Q++)];T.set(U++,W<<4|X>>2);var Y=O[p.fastCodeAt(N,Q++)];T.set(U++,X<<6|Y)}if(R>=2){var Z=O[p.fastCodeAt(N,Q++)],$=O[p.fastCodeAt(N,Q++)];if(T.set(U++,Z<<2|$>>4),3==R){var _=O[p.fastCodeAt(N,Q++)];T.set(U++,$<<4|_>>2)}}return this.pos+=M,this.cache.push(T),T;case 67:var aa=this.unserialize(),ba=this.resolver.resolveClass(aa);if(null==ba)throw"Class not found "+aa;var ca=r.createEmptyInstance(ba);if(this.cache.push(ca),ca.hxUnserialize(this),103!=this.get(this.pos++))throw"Invalid custom data";return ca}throw this.pos--,"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos},__class__:x.Unserializer},x.ds={},x.ds.BalancedTree=function(){},e["haxe.ds.BalancedTree"]=x.ds.BalancedTree,x.ds.BalancedTree.__name__=["haxe","ds","BalancedTree"],x.ds.BalancedTree.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},remove:function(a){try{return this.root=this.removeLoop(a,this.root),!0}catch(b){if(v.Boot.__instanceof(b,String))return!1;throw b}},setLoop:function(a,b,c){if(null==c)return new x.ds.TreeNode(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new x.ds.TreeNode(c.left,a,b,c.right,null==c?0:c._height);if(0>d){var e=this.setLoop(a,b,c.left);return this.balance(e,c.key,c.value,c.right)}var f=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,f)},removeLoop:function(a,b){if(null==b)throw"Not_found";var c=this.compare(a,b.key);return 0==c?this.merge(b.left,b.right):0>c?this.balance(this.removeLoop(a,b.left),b.key,b.value,b.right):this.balance(b.left,b.key,b.value,this.removeLoop(a,b.right))},merge:function(a,b){if(null==a)return b;if(null==b)return a;var c=this.minBinding(b);return this.balance(a,c.key,c.value,this.removeMinBinding(b))},minBinding:function(a){if(null==a)throw"Not_found";return null==a.left?a:this.minBinding(a.left)},removeMinBinding:function(a){return null==a.left?a.right:this.balance(this.removeMinBinding(a.left),a.key,a.value,a.right)},balance:function(a,b,c,d){var e;e=null==a?0:a._height;var f;return f=null==d?0:d._height,e>f+2?function(b){var c,d=a.left;return c=null==d?0:d._height}(this)>=function(b){var c,d=a.right;return c=null==d?0:d._height}(this)?new x.ds.TreeNode(a.left,a.key,a.value,new x.ds.TreeNode(a.right,b,c,d)):new x.ds.TreeNode(new x.ds.TreeNode(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new x.ds.TreeNode(a.right.right,b,c,d)):f>e+2?function(a){var b,c=d.right;return b=null==c?0:c._height}(this)>function(a){var b,c=d.left;return b=null==c?0:c._height}(this)?new x.ds.TreeNode(new x.ds.TreeNode(a,b,c,d.left),d.key,d.value,d.right):new x.ds.TreeNode(new x.ds.TreeNode(a,b,c,d.left.left),d.left.key,d.left.value,new x.ds.TreeNode(d.left.right,d.key,d.value,d.right)):new x.ds.TreeNode(a,b,c,d,(e>f?e:f)+1)},compare:function(a,b){return m.compare(a,b)},__class__:x.ds.BalancedTree},x.ds.TreeNode=function(a,b,c,d,e){null==e&&(e=-1),this.left=a,this.key=b,this.value=c,this.right=d,-1==e?this._height=(function(a){var b,c=a.left;return b=null==c?0:c._height}(this)>function(a){var b,c=a.right;return b=null==c?0:c._height}(this)?function(a){var b,c=a.left;return b=null==c?0:c._height}(this):function(a){var b,c=a.right;return b=null==c?0:c._height}(this))+1:this._height=e},e["haxe.ds.TreeNode"]=x.ds.TreeNode,x.ds.TreeNode.__name__=["haxe","ds","TreeNode"],x.ds.TreeNode.prototype={__class__:x.ds.TreeNode},x.ds.EnumValueMap=function(){x.ds.BalancedTree.call(this)},e["haxe.ds.EnumValueMap"]=x.ds.EnumValueMap,x.ds.EnumValueMap.__name__=["haxe","ds","EnumValueMap"],x.ds.EnumValueMap.__interfaces__=[l],x.ds.EnumValueMap.__super__=x.ds.BalancedTree,x.ds.EnumValueMap.prototype=b(x.ds.BalancedTree.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var d=a.slice(2),e=b.slice(2);return 0==d.length&&0==e.length?0:this.compareArgs(d,e)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var d=0,e=a.length;e>d;){var f=d++,g=this.compareArg(a[f],b[f]);if(0!=g)return g}return 0},compareArg:function(a,b){return m.isEnumValue(a)&&m.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):m.compare(a,b)},__class__:x.ds.EnumValueMap}),x.ds.IntMap=function(){this.h={}},e["haxe.ds.IntMap"]=x.ds.IntMap,x.ds.IntMap.__name__=["haxe","ds","IntMap"],x.ds.IntMap.__interfaces__=[l],x.ds.IntMap.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){return this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(0|b);return i.iter(a)},__class__:x.ds.IntMap},x.ds.ObjectMap=function(){this.h={},this.h.__keys__={}},e["haxe.ds.ObjectMap"]=x.ds.ObjectMap,x.ds.ObjectMap.__name__=["haxe","ds","ObjectMap"],x.ds.ObjectMap.__interfaces__=[l],x.ds.ObjectMap.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++x.ds.ObjectMap.count);this.h[c]=b,this.h.__keys__[c]=a},remove:function(a){var b=a.__id__;return null==this.h.__keys__[b]?!1:(delete this.h[b],delete this.h.__keys__[b],!0)},keys:function(){var a=[];for(var b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return i.iter(a)},__class__:x.ds.ObjectMap},x.ds.Option=e["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]},x.ds.Option.Some=function(a){var b=["Some",0,a];return b.__enum__=x.ds.Option,b.toString=f,b},x.ds.Option.None=["None",1],x.ds.Option.None.toString=f,x.ds.Option.None.__enum__=x.ds.Option,x.ds.StringMap=function(){this.h={}},e["haxe.ds.StringMap"]=x.ds.StringMap,x.ds.StringMap.__name__=["haxe","ds","StringMap"],x.ds.StringMap.__interfaces__=[l],x.ds.StringMap.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){return a="$"+a,this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return i.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref["$"+a]}}},__class__:x.ds.StringMap},x.io={},x.io.Bytes=function(a,b){this.length=a,this.b=b},e["haxe.io.Bytes"]=x.io.Bytes,x.io.Bytes.__name__=["haxe","io","Bytes"],x.io.Bytes.alloc=function(a){for(var b=new Array,c=0;a>c;){c++;b.push(0)}return new x.io.Bytes(a,b)},x.io.Bytes.ofString=function(a){for(var b=new Array,c=0;c<a.length;){var d=p.fastCodeAt(a,c++);d>=55296&&56319>=d&&(d=d-55232<<10|1023&p.fastCodeAt(a,c++)),127>=d?b.push(d):2047>=d?(b.push(192|d>>6),b.push(128|63&d)):65535>=d?(b.push(224|d>>12),b.push(128|d>>6&63),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|d>>12&63),b.push(128|d>>6&63),b.push(128|63&d))}return new x.io.Bytes(b.length,b)},x.io.Bytes.ofData=function(a){return new x.io.Bytes(a.length,a)},x.io.Bytes.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=255&b},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw x.io.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,f=a,g=a+b;g>f;){var h=d[f++];if(128>h){if(0==h)break;c+=e(h)}else if(224>h)c+=e((63&h)<<6|127&d[f++]);else if(240>h){var i=d[f++];c+=e((31&h)<<12|(127&i)<<6|127&d[f++])}else{var j=d[f++],k=d[f++],l=(15&h)<<18|(127&j)<<12|(127&k)<<6|127&d[f++];c+=e((l>>10)+55232),c+=e(1023&l|56320)}}return c},toString:function(){return this.getString(0,this.length)},__class__:x.io.Bytes},x.io.BytesBuffer=function(){this.b=new Array},e["haxe.io.BytesBuffer"]=x.io.BytesBuffer,x.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],x.io.BytesBuffer.prototype={addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw x.io.Error.OutsideBounds;for(var d=(this.b,a.b),e=b,f=b+c;f>e;){var g=e++;this.b.push(d[g])}},getBytes:function(){var a=new x.io.Bytes(this.b.length,this.b);return this.b=null,a},__class__:x.io.BytesBuffer},x.io.Input=function(){},e["haxe.io.Input"]=x.io.Input,x.io.Input.__name__=["haxe","io","Input"],x.io.Input.prototype={readByte:function(){throw"Not implemented"},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw x.io.Error.OutsideBounds;for(;d>0;)e[b]=this.readByte(),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},read:function(a){for(var b=x.io.Bytes.alloc(a),c=0;a>0;){var d=this.readBytes(b,c,a);if(0==d)throw x.io.Error.Blocked;c+=d,a-=d}return b},readFloat:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<1&255|a[1]>>7)-127,d=(127&a[1])<<16|a[2]<<8|a[3];return 0==d&&-127==c?0:b*(1+Math.pow(2,-23)*d)*Math.pow(2,c)},readDouble:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<4&2047|a[1]>>4)-1023,d=this.getDoubleSig(a);return 0==d&&-1023==c?0:b*(1+Math.pow(2,-52)*d)*Math.pow(2,c)},readInt8:function(){var a=this.readByte();return a>=128?a-256:a},readInt16:function(){var a,b=this.readByte(),c=this.readByte();return a=this.bigEndian?c|b<<8:b|c<<8,0!=(32768&a)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},getDoubleSig:function(a){return 4294967296*((15&a[1])<<16|a[2]<<8|a[3])+2147483648*(a[4]>>7)+((127&a[4])<<24|a[5]<<16|a[6]<<8|a[7])},__class__:x.io.Input},x.io.BytesInput=function(a,b,c){if(null==b&&(b=0),null==c&&(c=a.length-b),0>b||0>c||b+c>a.length)throw x.io.Error.OutsideBounds;this.b=a.b,this.pos=b,this.len=c,this.totlen=c},e["haxe.io.BytesInput"]=x.io.BytesInput,x.io.BytesInput.__name__=["haxe","io","BytesInput"],x.io.BytesInput.__super__=x.io.Input,x.io.BytesInput.prototype=b(x.io.Input.prototype,{readByte:function(){if(0==this.len)throw new x.io.Eof;return this.len--,this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw x.io.Error.OutsideBounds;if(0==this.len&&c>0)throw new x.io.Eof;this.len<c&&(c=this.len);for(var d=this.b,e=a.b,f=0;c>f;){var g=f++;e[b+g]=d[this.pos+g]}return this.pos+=c,this.len-=c,c},__class__:x.io.BytesInput}),x.io.Output=function(){},e["haxe.io.Output"]=x.io.Output,x.io.Output.__name__=["haxe","io","Output"],x.io.Output.prototype={writeByte:function(a){throw"Not implemented"},writeBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw x.io.Error.OutsideBounds;for(;d>0;)this.writeByte(e[b]),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},write:function(a){for(var b=a.length,c=0;b>0;){var d=this.writeBytes(a,c,b);if(0==d)throw x.io.Error.Blocked;c+=d,b-=d}},writeFloat:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/x.io.Output.LN2),d=8388607&Math.floor(Math.abs(a)/Math.pow(2,c)*8388608);b=c+127>>1|(c>0?0>a?128:64:0>a?128:0);var e=c+127<<7&255|d>>16&127,f=d>>8&255,g=255&d;this.bigEndian?(this.writeByte(b),this.writeByte(e),this.writeByte(f),this.writeByte(g)):(this.writeByte(g),this.writeByte(f),this.writeByte(e),this.writeByte(b))},writeDouble:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/x.io.Output.LN2),d=Math.floor(Math.abs(a)/Math.pow(2,c)*Math.pow(2,52)),e=34359738367&d,f=Math.floor(d/Math.pow(2,32));b=c+1023>>4|(c>0?0>a?128:64:0>a?128:0);var g=c+1023<<4&255|f>>16&15,h=f>>8&255,i=255&f,j=e>>24&255,k=e>>16&255,l=e>>8&255,m=255&e;this.bigEndian?(this.writeByte(b),this.writeByte(g),this.writeByte(h),this.writeByte(i),this.writeByte(j),this.writeByte(k),this.writeByte(l),this.writeByte(m)):(this.writeByte(m),this.writeByte(l),this.writeByte(k),this.writeByte(j),this.writeByte(i),this.writeByte(h),this.writeByte(g),this.writeByte(b))},writeInt8:function(a){if(-128>a||a>=128)throw x.io.Error.Overflow;this.writeByte(255&a)},writeInt16:function(a){if(-32768>a||a>=32768)throw x.io.Error.Overflow;this.writeUInt16(65535&a)},writeUInt16:function(a){if(0>a||a>=65536)throw x.io.Error.Overflow;this.bigEndian?(this.writeByte(a>>8),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8))},writeInt32:function(a){this.bigEndian?(this.writeByte(a>>>24),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8&255),this.writeByte(a>>16&255),this.writeByte(a>>>24))},__class__:x.io.Output},x.io.BytesOutput=function(){this.b=new x.io.BytesBuffer},e["haxe.io.BytesOutput"]=x.io.BytesOutput,x.io.BytesOutput.__name__=["haxe","io","BytesOutput"],x.io.BytesOutput.__super__=x.io.Output,x.io.BytesOutput.prototype=b(x.io.Output.prototype,{writeByte:function(a){this.b.b.push(a)},writeBytes:function(a,b,c){return this.b.addBytes(a,b,c),c},getBytes:function(){return this.b.getBytes()},__class__:x.io.BytesOutput}),x.io.Eof=function(){},e["haxe.io.Eof"]=x.io.Eof,x.io.Eof.__name__=["haxe","io","Eof"],x.io.Eof.prototype={toString:function(){return"Eof"},__class__:x.io.Eof},x.io.Error=e["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},x.io.Error.Blocked=["Blocked",0],x.io.Error.Blocked.toString=f,x.io.Error.Blocked.__enum__=x.io.Error,x.io.Error.Overflow=["Overflow",1],x.io.Error.Overflow.toString=f,x.io.Error.Overflow.__enum__=x.io.Error,x.io.Error.OutsideBounds=["OutsideBounds",2],x.io.Error.OutsideBounds.toString=f,x.io.Error.OutsideBounds.__enum__=x.io.Error,x.io.Error.Custom=function(a){var b=["Custom",3,a];return b.__enum__=x.io.Error,b.toString=f,b},x.rtti={},x.rtti.Meta=function(){},e["haxe.rtti.Meta"]=x.rtti.Meta,x.rtti.Meta.__name__=["haxe","rtti","Meta"],x.rtti.Meta.getFields=function(a){var b=a.__meta__;return null==b||null==b.fields?{}:b.fields},v.Browser=function(){},e["js.Browser"]=v.Browser,v.Browser.__name__=["js","Browser"],v.Browser.getLocalStorage=function(){try{var a=window.localStorage;return a.getItem(""),a}catch(b){return null}};var y={};y.Decoder=function(a,b){var c=new x.io.BytesInput(a);c.set_bigEndian(!0),this.o=this.decode(c,b)},e["msgpack.Decoder"]=y.Decoder,y.Decoder.__name__=["msgpack","Decoder"],y.Decoder.prototype={decode:function(a,b){try{var c=a.readByte();switch(c){case 192:return null;case 194:return!1;case 195:return!0;case 202:return a.readFloat();case 203:return a.readDouble();case 204:return a.readByte();case 205:return a.readUInt16();case 206:return a.readInt32();case 207:return x.Int64.make(a.readInt32(),a.readInt32());case 208:return a.readInt8();case 209:return a.readInt16();case 210:return a.readInt32();case 211:return x.Int64.make(a.readInt32(),a.readInt32());case 218:case 219:return a.read(218==c?a.readUInt16():a.readInt32()).toString();case 220:case 221:return this.readArray(a,220==c?a.readUInt16():a.readInt32(),b);case 222:case 223:return this.readMap(a,222==c?a.readUInt16():a.readInt32(),b);default:if(128>c)return c;if(144>c)return this.readMap(a,15&c,b);if(160>c)return this.readArray(a,15&c,b);if(192>c)return a.read(31&c).toString();if(c>223)return-256|c}}catch(d){if(!v.Boot.__instanceof(d,x.io.Eof))throw d}return null},readArray:function(a,b,c){for(var d=[],e=0;b>e;){e++;d.push(this.decode(a,c))}return d},readMap:function(a,b,c){if(c){for(var d={},e=0;b>e;){var f=(e++,this.decode(a,c)),g=this.decode(a,c);d[f]=g}return d}for(var h=new x.ds.ObjectMap,i=0;b>i;){var j=(i++,this.decode(a,c)),k=this.decode(a,c);h.set(j,k)}return h},getResult:function(){return this.o},__class__:y.Decoder},y.Encoder=function(a){this.o=new x.io.BytesOutput,this.o.set_bigEndian(!0),this.encode(a)},e["msgpack.Encoder"]=y.Encoder,y.Encoder.__name__=["msgpack","Encoder"],y.Encoder.prototype={encode:function(a){var b=r["typeof"](a);switch(b[1]){case 0:this.o.writeByte(192);break;case 3:this.o.writeByte(a?195:194);break;case 1:this.writeInt(a);break;case 2:this.writeFloat(a);break;case 6:var c=b[2],d=r.getClassName(c);switch(d){case"String":this.writeRaw(x.io.Bytes.ofString(a));break;case"Array":this.writeArray(a);break;case"Hash":this.writeHashMap(a);break;case"haxe.Int64":this.writeInt64(a)}break;case 4:this.writeObjectMap(a);break;case 7:throw"Error: Enum not supported";case 5:throw"Error: Function not supported";case 8:throw"Error: Unknown Data Type"}},writeInt:function(a){-32>a?-32768>a?(this.o.writeByte(210),this.o.writeInt32(a)):-128>a?(this.o.writeByte(209),this.o.writeInt16(a)):(this.o.writeByte(208),this.o.writeInt8(a)):128>a?this.o.writeByte(255&a):256>a?(this.o.writeByte(204),this.o.writeByte(a)):65536>a?(this.o.writeByte(205),this.o.writeUInt16(a)):(this.o.writeByte(206),this.o.writeInt32(a))},writeInt64:function(a){this.o.writeByte(a.high<0?211:207),this.o.writeInt32(x.Int64.getHigh(a)),this.o.writeInt32(x.Int64.getLow(a))},writeFloat:function(a){var b=Math.abs(a);b>1.401298464324817e-45&&3.4028234663852886e38>b?(this.o.writeByte(202),this.o.writeFloat(a)):(this.o.writeByte(203),this.o.writeDouble(a))},writeRaw:function(a){var b=a.length;32>b?this.o.writeByte(160|b):65536>b?(this.o.writeByte(218),this.o.writeUInt16(b)):(this.o.writeByte(219),this.o.writeInt32(b)),this.o.write(a)},writeArray:function(a){var b=a.length;16>b?this.o.writeByte(144|b):65536>b?(this.o.writeByte(220),this.o.writeUInt16(b)):(this.o.writeByte(221),this.o.writeInt32(b));for(var c=0;c<a.length;){var d=a[c];++c,this.encode(d)}},writeMapLength:function(a){16>a?this.o.writeByte(128|a):65536>a?(this.o.writeByte(222),this.o.writeUInt16(a)):(this.o.writeByte(223),this.o.writeInt32(a))},writeHashMap:function(a){this.writeMapLength(j.count(a));for(var b=a.keys();b.hasNext();){var c=b.next();this.writeRaw(x.io.Bytes.ofString(c)),this.encode(a.get(c))}},writeObjectMap:function(a){var b=m.fields(a);this.writeMapLength(j.count(b));for(var c=0;c<b.length;){var d=b[c];++c,this.writeRaw(x.io.Bytes.ofString(d)),this.encode(m.field(a,d))}},getBytes:function(){return this.o.getBytes()},__class__:y.Encoder},y.MsgPack=function(){},e["msgpack.MsgPack"]=y.MsgPack,y.MsgPack.__name__=["msgpack","MsgPack"],y.MsgPack.encode=function(a){return new y.Encoder(a).getBytes()},y.MsgPack.decode=function(a,b){return null==b&&(b=!0),new y.Decoder(a,b).getResult()},s.interfaces.IController=function(){},e["puremvc.interfaces.IController"]=s.interfaces.IController,s.interfaces.IController.__name__=["puremvc","interfaces","IController"],s.interfaces.IController.prototype={__class__:s.interfaces.IController},s.core={},s.core.Controller=function(){s.core.Controller.instance=this,this.commandMap=new x.ds.StringMap,this.initializeController()},e["puremvc.core.Controller"]=s.core.Controller,s.core.Controller.__name__=["puremvc","core","Controller"],s.core.Controller.__interfaces__=[s.interfaces.IController],s.core.Controller.getInstance=function(){return null==s.core.Controller.instance&&(s.core.Controller.instance=new s.core.Controller),s.core.Controller.instance},s.core.Controller.prototype={initializeController:function(){this.view=s.core.View.getInstance()},executeCommand:function(a){var b=this.commandMap.get(a.getName());if(null!=b){var c=r.createInstance(b,[]);c.execute(a)}},registerCommand:function(a,b){this.commandMap.exists(a)||this.view.registerObserver(a,new s.patterns.observer.Observer(d(this,this.executeCommand),this)),this.commandMap.set(a,b)},hasCommand:function(a){return this.commandMap.exists(a)},removeCommand:function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap.remove(a))},__class__:s.core.Controller},s.interfaces.IModel=function(){},e["puremvc.interfaces.IModel"]=s.interfaces.IModel,s.interfaces.IModel.__name__=["puremvc","interfaces","IModel"],s.interfaces.IModel.prototype={__class__:s.interfaces.IModel},s.core.Model=function(){s.core.Model.instance=this,this.proxyMap=new x.ds.StringMap,this.initializeModel()},e["puremvc.core.Model"]=s.core.Model,s.core.Model.__name__=["puremvc","core","Model"],s.core.Model.__interfaces__=[s.interfaces.IModel],s.core.Model.getInstance=function(){return null==s.core.Model.instance&&(s.core.Model.instance=new s.core.Model),s.core.Model.instance},s.core.Model.prototype={initializeModel:function(){},registerProxy:function(a){this.proxyMap.set(a.getProxyName(),a),a.onRegister()},retrieveProxy:function(a){return this.proxyMap.get(a)},hasProxy:function(a){return this.proxyMap.exists(a)},removeProxy:function(a){var b=this.proxyMap.get(a);return null!=b&&(this.proxyMap.remove(a),b.onRemove()),b},__class__:s.core.Model},s.interfaces.IView=function(){},e["puremvc.interfaces.IView"]=s.interfaces.IView,s.interfaces.IView.__name__=["puremvc","interfaces","IView"],s.interfaces.IView.prototype={__class__:s.interfaces.IView},s.core.View=function(){s.core.View.instance=this,this.mediatorMap=new x.ds.StringMap,this.observerMap=new x.ds.StringMap,this.initializeView()},e["puremvc.core.View"]=s.core.View,s.core.View.__name__=["puremvc","core","View"],s.core.View.__interfaces__=[s.interfaces.IView],s.core.View.getInstance=function(){return null==s.core.View.instance&&(s.core.View.instance=new s.core.View),s.core.View.instance},s.core.View.prototype={initializeView:function(){},registerObserver:function(a,b){this.observerMap.exists(a)||this.observerMap.set(a,new k),this.observerMap.get(a).add(b)},notifyObservers:function(a){if(this.observerMap.exists(a.getName())){for(var b=this.observerMap.get(a.getName()),c=new k,d=b.iterator();d.hasNext();){var e=d.next();c.add(e)}for(var f=c.iterator();f.hasNext();){var g=f.next();g.notifyObserver(a)}}},removeObserver:function(a,b){for(var c=this.observerMap.get(a),d=c.iterator();d.hasNext();){var e=d.next();if(1==e.compareNotifyContext(b)){c.remove(e);break}}c.isEmpty()&&this.observerMap.remove(a)},registerMediator:function(a){if(!this.mediatorMap.exists(a.getMediatorName())){this.mediatorMap.set(a.getMediatorName(),a);var b=a.listNotificationInterests();if(b.length>0)for(var c=new s.patterns.observer.Observer(d(a,a.handleNotification),a),e=0,f=b.length;f>e;){var g=e++;this.registerObserver(b[g],c)}a.onRegister()}},retrieveMediator:function(a){return this.mediatorMap.get(a)},removeMediator:function(a){var b=this.mediatorMap.get(a);if(null!=b){for(var c=b.listNotificationInterests(),d=0,e=c.length;e>d;){var f=d++;this.removeObserver(c[f],b)}this.mediatorMap.remove(a),b.onRemove()}return b},hasMediator:function(a){return this.mediatorMap.exists(a);
},__class__:s.core.View},s.interfaces.INotification=function(){},e["puremvc.interfaces.INotification"]=s.interfaces.INotification,s.interfaces.INotification.__name__=["puremvc","interfaces","INotification"],s.interfaces.INotification.prototype={__class__:s.interfaces.INotification},s.interfaces.IObserver=function(){},e["puremvc.interfaces.IObserver"]=s.interfaces.IObserver,s.interfaces.IObserver.__name__=["puremvc","interfaces","IObserver"],s.interfaces.IObserver.prototype={__class__:s.interfaces.IObserver},s.patterns.observer.Notification=function(a,b,c){this.name=a,null!=b&&(this.body=b),null!=c&&(this.type=c)},e["puremvc.patterns.observer.Notification"]=s.patterns.observer.Notification,s.patterns.observer.Notification.__name__=["puremvc","patterns","observer","Notification"],s.patterns.observer.Notification.__interfaces__=[s.interfaces.INotification],s.patterns.observer.Notification.prototype={getName:function(){return this.name},setBody:function(a){this.body=a},getBody:function(){return this.body},setType:function(a){this.type=a},getType:function(){return this.type},toString:function(){var a="Notification Name: "+this.getName();return a+="\nBody:"+(null==this.body?"null":this.body.toString()),a+="\nType:"+(null==this.type?"null":this.type)},__class__:s.patterns.observer.Notification},s.patterns.observer.Observer=function(a,b){this.setNotifyMethod(a),this.setNotifyContext(b)},e["puremvc.patterns.observer.Observer"]=s.patterns.observer.Observer,s.patterns.observer.Observer.__name__=["puremvc","patterns","observer","Observer"],s.patterns.observer.Observer.__interfaces__=[s.interfaces.IObserver],s.patterns.observer.Observer.prototype={setNotifyMethod:function(a){this.notify=a},setNotifyContext:function(a){this.context=a},getNotifyMethod:function(){return this.notify},getNotifyContext:function(){return this.context},notifyObserver:function(a){this.getNotifyMethod()(a)},compareNotifyContext:function(a){return a==this.context},__class__:s.patterns.observer.Observer};var z,A=0,B={},C=function(a){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return"object"==typeof a&&null!==a}function f(a){return void 0===a}return a.exports=null,a.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(a){if(!d(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},b.prototype.emit=function(a){var b,d,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||e(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(d=this._events[a],f(d))return!1;if(c(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),d.apply(this,h)}else if(e(d))for(h=Array.prototype.slice.call(arguments,1),j=d.slice(),g=j.length,i=0;g>i;i++)j[i].apply(this,h);return!0},b.prototype.addListener=function(a,d){var g;if(!c(d))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,c(d.listener)?d.listener:d),this._events[a]?e(this._events[a])?this._events[a].push(d):this._events[a]=[this._events[a],d]:this._events[a]=d,e(this._events[a])&&!this._events[a].warned&&(g=f(this._maxListeners)?b.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[a].length>g&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(a,b){function d(){this.removeListener(a,d),e||(e=!0,b.apply(this,arguments))}if(!c(b))throw TypeError("listener must be a function");var e=!1;return d.listener=b,this.on(a,d),this},b.prototype.removeListener=function(a,b){var d,f,g,h;if(!c(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(d=this._events[a],g=d.length,f=-1,d===b||c(d.listener)&&d.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(e(d)){for(h=g;h-->0;)if(d[h]===b||d[h].listener&&d[h].listener===b){f=h;break}if(0>f)return this;1===d.length?(d.length=0,delete this._events[a]):d.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},b.prototype.removeAllListeners=function(a){var b,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},b.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]},b.listenerCount=function(a,b){var d;return d=a._events&&a._events[b]?c(a._events[b])?1:a._events[b].length:0},a.exports}({});Array.prototype.indexOf&&(i.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}),Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,e.Math=Math,Math.isFinite=function(a){return isFinite(a)},Math.isNaN=function(a){return isNaN(a)},String.prototype.__class__=e.String=String,String.__name__=["String"],e.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=e.Date=Date,Date.__name__=["Date"];var D=e.Int={__name__:["Int"]},E=e.Dynamic={__name__:["Dynamic"]},F=e.Float=Number;F.__name__=["Float"];var G=e.Bool=Boolean;G.__ename__=["Bool"];var H=e.Class={__name__:["Class"]},I={};null==Array.prototype.map&&(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++;b[e]=a(this[e])}return b}),null==Array.prototype.filter&&(Array.prototype.filter=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++,f=this[e];a(f)&&b.push(f)}return b});var J,K=function(a){function b(a){var b="POST",c=a.url,d=a.headers,e=a.data,f=a.files,g=a.complete,h=new FormData;for(var i in e)e.hasOwnProperty(i)&&h.append(i,e[i]);for(var i in f)f.hasOwnProperty(i)&&h.append(i,f[i]);var j=new XMLHttpRequest;j.open(b,c,!0);for(var i in d)d.hasOwnProperty(i)&&j.setRequestHeader(i,d[i]);return j.onload=function(a){4===j.readyState&&g(200===j.status,j)},j.onerror=function(a){g(!1,j)},j.send(h),j}return a.exports=null,a.exports={upload:b},a.exports}({});J={websocketsbinary:!0,audio:!1},t.AppFacade.APP_STATE_CHANGED="app_state_changed",t.AppFacade.ACCESS_TOKEN_CHANGED="access_token_changed",t.AppFacade.CURRENT_USER_CHANGED="current_user_changed",t.AppFacade.CONFIGURATION_CHANGED="configuration_changed",t.AppFacade.DOMAIN_SELECTION_CHANGED="domain_selection_changed",t.AppFacade.TALK_SELECTION_CHANGED="talk_selection_changed",t.AppFacade.TALK_LIST_SCROLL_TO_TALK_TOP_NEEDED="talk_list_scroll_to_talk_top_needed",t.AppFacade.USER_SELECTION_NEEDED="user_selection_needed",t.AppFacade.USER_SELECTION_CHANGED="user_selection_changed",t.AppFacade.FRIEND_SELECTION_NEEDED="friend_selection_needed",t.AppFacade.STAMP_SET_CHANGED="stamp_set_changed",t.AppFacade.STAMP_SELECTION_CHANGED="stamp_selection_changed",t.AppFacade.PHONE_CALL_STARTED="phone_call_started",t.AppFacade.PHONE_CALL_ACCEPTED="phone_call_accepted",t.AppFacade.PHONE_CALL_CONNECTED="phone_call_connected",t.AppFacade.PHONE_CALL_HANGED_UP="phone_call_hangued_up",t.AppFacade.ACTION_SELECTION_CHANGED="action_selection_changed",t.AppFacade.CURRENT_PAGE_CHANGED="current_page_changed",t.AppFacade.CURRENT_PAGE_NOT_CHANGED="current_page_not_changed",t.AppFacade.FILEINFO_SELECTION_CHANGED="fileinfo_selection_changed",t.AppFacade.MESSAGE_FILEINFO_SELECTION_CHANGED="message_fileinfo_selection_changed",t.AppFacade.STAGED_FILEINFO_SELECTION_CHANGED="staged_fileinfo_selection_changed",t.AppFacade.STAGED_FILEINFOS_ADDED="staged_fileinfos_added",t.AppFacade.STAGED_FILEINFOS_MOVED="staged_fileinfos_moved",t.AppFacade.ERROR_OCCURRED="error_occurred",t.AppFacade.UNREAD_COUNT_CHANGED="brand_badge_changed",t.AppFacade.SEND_FORM_TOP_CHANGED="send_form_top_changed",t.AppFacade.SOLUTIONS_LOADED="solutions_loaded",t.AppFacade.RIGHT_PANE_OPENED="right_pane_opened",t.AppFacade.RIGHT_PANE_CLOSED="right_pane_closed",t.AppFacade.PASSWORD_EXPIRATION_OVERED="password_expiration_overed",t.AppFacade.PASSWORD_EXPIRATION_WARNED="password_expiration_warned",t.AppFacade.PHOTO_EDITOR_SAVED="photo_editor_saved",t.AppFacade.MC_AUTHENTICATED_USER_RECEIVED="mc_authenticated_user_received",t.AppFacade.KEYWORD_WATCHING_UPDATED="keyword_watching_updated",t.AppFacade.KEYWORD_DETECTION_UPDATED="keyword_detaction_updated",t.AppFacade.SEND_BY_ENTER_CHANGED="send_by_enter_changed",t.AppFacade.DEPARTMENT_SELECTION_CHANGED_FOR_MEMBERS_PAGE="department_selection_changed_for_members_page",t.AppFacade.DATA_RECOVERED="data_recovered",t.AppFacade.NOTIFY_UPDATE_USER="notify_update_user",t.AppFacade.NOTIFY_ADD_FRIEND="notify_add_friend",t.AppFacade.NOTIFY_ADD_ACQUAINTANCE="notify_add_acquaintance",t.AppFacade.NOTIFY_DELETE_FRIEND="notify_delete_friend",t.AppFacade.NOTIFY_DELETE_ACQUAINTANCE="notify_delete_acquaintance",t.AppFacade.NOTIFY_UPDATE_DOMAIN_USERS="notify_update_domain_users",t.AppFacade.GET_DOMAIN_USERS_RESPONSED="get_domain_users_responsed",t.AppFacade.GET_USERS_RESPONSED="get_users_responsed",t.AppFacade.GET_PROFILE_RESPONSED="get_profile_responsed",t.AppFacade.GET_PROFILE_ERRORED="get_profile_errored",t.AppFacade.UPDATE_USER_RESPONSED="update_user_responsed",t.AppFacade.UPDATE_USER_ERRORED="update_user_errored",t.AppFacade.UPDATE_PROFILE_RESPONSED="update_profile_responsed",t.AppFacade.UPDATE_PROFILE_ERRORED="update_profile_errored",t.AppFacade.NOTIFY_UPDATE_DEPARTMENT_TREE="notify_update_department_tree",t.AppFacade.NOTIFY_UPDATE_DEPARTMENT_USERS="notify_update_department_users",t.AppFacade.GET_DEPARTMENT_TREE_RESPONSED="get_department_tree_responsed",t.AppFacade.GET_DEPARTMENT_TREE_CANCELED="get_department_tree_canceled",t.AppFacade.GET_DEPARTMENT_USERS_RESPONSED="get_department_users_responsed",t.AppFacade.GET_DEPARTMENT_USERS_CANCELED="get_department_users_canceled",t.AppFacade.GET_DEPARTMENT_USER_COUNT_RESPONSED="get_department_user_count_responsed",t.AppFacade.GET_ME_RESPONSED="get_me_responsed",t.AppFacade.DEPARTMENT_USER_COUNT_CLEARED="department_user_count_cleared",t.AppFacade.DEPARTMENT_USER_IDS_PREPARED="department_user_ids_prepared",t.AppFacade.NOTIFY_ADD_DOMAIN_INVITE="notify_add_domain_invite",t.AppFacade.NOTIFY_ACCEPT_DOMAIN_INVITE="notify_accept_domain_invite",t.AppFacade.NOTIFY_DELETE_DOMAIN_INVITE="notify_delete_domain_invite",t.AppFacade.NOTIFY_JOIN_DOMAIN="notify_join_domain",t.AppFacade.NOTIFY_UPDATE_DOMAIN="notify_update_domain",t.AppFacade.NOTIFY_LEAVE_DOMAIN="notify_leave_domain",t.AppFacade.NOTIFY_CREATE_PAIR_TALK="notify_create_pair_talk",t.AppFacade.NOTIFY_CREATE_GROUP_TALK="notify_create_group_talk",t.AppFacade.NOTIFY_UPDATE_GROUP_TALK="notify_update_group_talk",t.AppFacade.NOTIFY_UPDATE_GROUP_TALK_ERRORED="notify_update_group_talk_ERRORED",t.AppFacade.NOTIFY_ADD_TALKERS="notify_add_talkers",t.AppFacade.NOTIFY_ADD_TALKERS_INCLUDING_ME="notify_add_talkers_including_me",t.AppFacade.NOTIFY_DELETE_TALKER="notify_delete_talker",t.AppFacade.NOTIFY_DELETE_TALK="notify_delete_talk",t.AppFacade.NOTIFY_CREATE_MESSAGE="notify_create_message",t.AppFacade.NOTIFY_DELETE_MESSAGE="notify_delete_message",t.AppFacade.NOTIFY_UPDATE_READ_STATUSES="notify_update_read_statuses",t.AppFacade.NOTIFY_UPDATE_TALK_STATUS="notify_update_talk_status",t.AppFacade.NOTIFY_UPDATE_LOCAL_TALK_STATUS="notify_update_local_talk_status",t.AppFacade.NOTIFY_GET_MESSAGES="notify_get_messages",t.AppFacade.NOTIFY_GET_MESSAGE_READ_STATUS="notify_get_message_status",t.AppFacade.NOTIFY_ADD_FAVORITE_TALK="notify_add_favorite_talk",t.AppFacade.NOTIFY_DELETE_FAVORITE_TALK="notify_delete_favorite_talk",t.AppFacade.NOTIFY_DISABLE_PUSH_NOTIFICATION="notify_disable_push_notification",t.AppFacade.NOTIFY_ENABLE_PUSH_NOTIFICATION="notify_enable_push_notification",t.AppFacade.CREATE_MESSAGE_START="create_message_start",t.AppFacade.CREATE_MESSAGE_COMPLETE="create_message_complete",t.AppFacade.CREATE_MESSAGE_FAIL="create_message_fail",t.AppFacade.NOTIFY_CREATE_ANNOUNCEMENT="notify_create_announcement",t.AppFacade.NOTIFY_DELETE_ANNOUNCEMENT="notify_delete_announcement",t.AppFacade.NOTIFY_UPDATE_ANNOUNCEMENT_STATUS="notify_update_announcement_status",t.AppFacade.NOTIFY_GET_ANNOUNCEMENTS="notify_get_announcements",t.AppFacade.CREATE_ANNOUNCEMENT_START="create_announcement_start",t.AppFacade.CREATE_ANNOUNCEMENT_COMPLETE="create_announcement_complete",t.AppFacade.CREATE_ANNOUNCEMENT_FAIL="create_announcement_fail",t.AppFacade.NOTIFY_UPDATE_QUESTION="notify_update_question",t.AppFacade.NOTIFY_GET_QUESTIONS="get_questions_responsed",t.AppFacade.NOTIFY_CREATE_ATTACHMENT="notify_create_attachment",t.AppFacade.NOTIFY_DELETE_ATTACHMENT="notify_delete_attachment",t.AppFacade.GET_FILE_RESPONSED="get_file_responsed",t.AppFacade.NOTIFY_SEARCH_MESSAGES="notify_search_messages",t.AppFacade.NOTIFY_SEARCH_ATTACHMENTS="notify_search_attachments",t.AppFacade.NOTIFY_SEARCH_MESSAGES_FAIL="notify_search_messages_fail",t.AppFacade.NOTIFY_SEARCH_ATTACHMENTS_FAIL="notify_search_attachments_fail",t.AppFacade.NOTIFY_SEARCH_PREPARE="notify_search_prepare",t.AppFacade.NOTIFY_SEARCH_CLEAR="notify_search_clear",t.AppFacade.NOTIFY_FILTER_BOX_TEXT_CHANGED="notify_filter_box_text_changed",t.AppFacade.NOTIFY_SEARCH_BOX_POPUP="notify_search_box_popup",t.AppFacade.NOTIFY_ADD_ACCOUNT_CONTROL_REQUEST="notify_add_account_control_request",t.AppFacade.NOTIFY_DELETE_ACCOUNT_CONTROL_REQUEST="notify_delete_account_control_request",t.AppFacade.NOTIFY_JOIN_ACCOUNT_CONTROL_GROUP="notify_join_account_control_group",t.AppFacade.NOTIFY_UPDATE_ACCOUNT_CONTROL_GROUP_PARTIALLY="notify_update_account_control_group_partially",t.AppFacade.NOTIFY_LEAVE_ACCOUNT_CONTROL_GROUP="notify_leave_account_control_group",t.command.AccountControlRequestCommand.__meta__={fields:{api:{inject:null}}},t.command.AccountControlRequestCommand.NAME="AccountControlRequest",t.command.DeviceCommand.__meta__={fields:{api:{inject:null}}},t.command.DeviceCommand.NAME="Device",t.command.DomainCommand.__meta__={fields:{api:{inject:null}}},t.command.DomainCommand.NAME="Domain",t.command.FileCommand.__meta__={fields:{api:{inject:null}}},t.command.FileCommand.NAME="File",t.command.LoadStampSetCommand.NAME="LoadStampSet",t.command.LoadStampSetCommand.TAB_URL="./json/app_ja.json",t.command.LoadStampSetCommand.TAB_PANE_URL="./json/illust_category_ja.json",t.command.ManageFriendsCommand.__meta__={fields:{api:{inject:null}}},t.command.ManageFriendsCommand.NAME="ManageFriends",t.command.MessageCommand.__meta__={fields:{api:{inject:null}}},t.command.MessageCommand.NAME="Message",t.command.ReadCommand.__meta__={fields:{api:{inject:null},keywordWatcher:{inject:null}}},t.command.ReadCommand.NAME="Read",t.command.ReloadDataCommand.__meta__={fields:{api:{inject:null}}},t.command.ReloadDataCommand.NAME="ReloadData",t.command.SearchCommand.__meta__={fields:{api:{inject:null},searchService:{inject:null}}},t.command.SearchCommand.NAME="Search",t.command.SelectTalkCommand.__meta__={fields:{dataStore:{inject:null},settings:{inject:null}}},t.command.SelectTalkCommand.NAME="SelectTalk",t.command.SendCommand.__meta__={fields:{api:{inject:null}}},t.command.SendCommand.NAME="Send",t.command.SignInCommand.__meta__={fields:{api:{inject:null},settings:{inject:null}}},t.command.SignInCommand.NAME="SignIn",t.command.SignOutCommand.__meta__={fields:{api:{inject:null},settings:{inject:null},dataStore:{inject:null}}},t.command.SignOutCommand.NAME="SignOut",t.command.TalkCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},t.command.TalkCommand.NAME="Talk",t.command.UpdateProfileCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},t.command.UpdateProfileCommand.NAME="UpdateProfile",t.command.UpdateUserCommand.__meta__={fields:{api:{inject:null}}},t.command.UpdateUserCommand.NAME="UpdateUser",t.command.UrlCommand.__meta__={fields:{routing:{inject:null}}},t.command.UrlCommand.NAME="Url",t.entity.BrowserSettings.TalkAutoScrollDelay=1,t.entity.BrowserSettings.TalkAutoScrollImmediately=2,t.entity.BrowserSettings.TalkAutoScrollNone=3,t.entity.BrowserSettings.NAME="browser_settings",t.entity.Department.LABEL_ROOT="すべての連絡先",t.entity.Department.LABEL_FREE="所属なし",t.entity.Message.MAX_READ_USER_IDS_COUNT=16,t.entity.SearchParams.TEXT_DATE_NONE="指定なし",t.entity.SearchParams.TEXT_DATE_TODAY="今日",t.entity.SearchParams.TEXT_DATE_YESTERDAY="昨日",t.entity.SearchParams.TEXT_DATE_THREE_DAYS_BEFORE="3日前",t.entity.SearchParams.TEXT_DATE_CALENDER="カレンダー",t.entity.SearchParams.QUERY_DATE_TODAY="t",t.entity.SearchParams.QUERY_DATE_YESTERDAY="-1d",t.entity.SearchParams.QUERY_DATE_THREE_DAYS_BEFORE="-3d",t.entity.SearchParams.TEXT_TYPE_MESSAGES="メッセージ",t.entity.SearchParams.TEXT_TYPE_ATTACHMENTS="ファイル",t.js.Base64.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u.EMERGENCY=0,u.ALERT=1,u.CRITICAL=2,u.ERROR=3,u.WARNING=4,u.NOTICE=5,u.INFO=6,u.DEBUG=7,u.level=6,u._d=u._nop,u._i=null!=console?console.info.bind(console):u._nop,u._w=null!=console?console.warn.bind(console):u._nop,u._e=null!=console?console.error.bind(console):u._nop,t.js.TextCanonicalizer.HIRAGANA_SMALL_A=12353,t.js.TextCanonicalizer.HIRAGANA_NN=12435,t.js.TextCanonicalizer.KATAKANA_SMALL_A=12449,s.patterns.proxy.Proxy.NAME="Proxy",t.proxy.AlberoBroadcastProxy.__meta__={fields:{api:{inject:null},dataStore:{inject:null},settings:{inject:null},fileInfoStore:{inject:null},departmentStore:{inject:null}}},t.proxy.AlberoBroadcastProxy.NAME="broadcast",t.proxy.AlberoServiceProxy.__meta__={fields:{rpc:{inject:null},settings:{inject:null},dataStore:{inject:null},fileService:{inject:null},searchService:{inject:null},solutionsStore:{inject:null},fileInfoStore:{inject:null},departmentStore:{inject:null}}},t.proxy.AlberoServiceProxy.NAME="api",t.proxy.AlberoServiceProxy.API_VERSION="1.94",t.proxy.AlberoServiceProxy.UPDATE_VERSION="1.94_1",t.proxy.AlberoServiceProxy.DELAY_FOR_DB_REPLICATION=1e3,t.proxy.AlberoServiceProxy.API_TRY_COUNT=3,t.proxy.AlberoServiceProxy.UPDATE_LAST_USED_AT_INTERVAL=36e5,t.proxy.AppStateProxy.NAME="appState",t.proxy.DataStoreProxy.NAME="dataStore",t.proxy.DataStoreProxy.TYPE_FRIEND=0,t.proxy.DataStoreProxy.TYPE_ACQUAINSTANCE=1,t.proxy.DataStoreProxy.TYPE_NONE=2,t.proxy.DepartmentStoreProxy.__meta__={fields:{dataStore:{inject:null}}},t.proxy.DepartmentStoreProxy.NAME="departmentStore",t.proxy.FeaturesProxy.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},t.proxy.FeaturesProxy.NAME="features",t.proxy.FileInfoStoreProxy.__meta__={fields:{fileService:{inject:null}}},t.proxy.FileInfoStoreProxy.NAME="fileInfoStore",t.proxy.FileServiceProxy.__meta__={fields:{settings:{inject:null}}},t.proxy.FileServiceProxy.NAME="fileService",t.proxy.FileServiceProxy.THUMBNAIL_WIDTH=300,t.proxy.FileServiceProxy.THUMBNAIL_HEIGHT=300,t.proxy.KeywordWatcherProxy.__meta__={fields:{settings:{inject:null}}},t.proxy.KeywordWatcherProxy.NAME="keywordWatcher",t.proxy.KeywordWatcherProxy.TALK_KEY_PREFIX="talk_",t.proxy.KeywordWatcherProxy.ANNOUNCEMENT_KEY_PREFIX="announcement_",t.proxy.KeywordParser.KEYWORD_TYPE_PREFIX="keyword_type_",t.proxy.KeywordParser.KEYWORD_TYPE_NORMAL="keyword_type_normal",t.proxy.KeywordParser.KEYWORD_TYPE_STRINGS=[t.proxy.KeywordParser.getKeywordTypeString(null),t.proxy.KeywordParser.getKeywordTypeString(t.entity.MessageType.selectOneReply),t.proxy.KeywordParser.getKeywordTypeString(t.entity.MessageType.yesOrNoReply),t.proxy.KeywordParser.getKeywordTypeString(t.entity.MessageType.todoDone)],t.proxy.MsgPackRpcProxy.__meta__={fields:{broadcast:{inject:null}}},t.proxy.MsgPackRpcProxy.NAME="rpc",t.proxy.MsgPackRpcProxy.lastMsgId=0,t.proxy._MsgPackRpcProxy.ConnectionKeeper.PING_INTERVAL_ON_CONNECTED=45e3,t.proxy.RoutingProxy.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},t.proxy.RoutingProxy.NAME="routing",t.proxy.SearchServiceProxy.__meta__={fields:{settings:{inject:null}}},t.proxy.SearchServiceProxy.NAME="searchService",t.proxy.SearchServiceProxy.LOAD_SIZE=20,t.proxy.SearchServiceProxy.DUMMY_VALUE_FOR_SET=1,t.proxy.SettingsProxy.NAME="settings",t.proxy.SettingsProxy.KEY_ACCESS_TOKEN="access_token",t.proxy.SettingsProxy.KEY_ACCESS_TOKEN_WITHOUT_MANAGEMENT_CONSOLE="access_token_without_management_console",t.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_H="selected_domain_id_h",t.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_L="selected_domain_id_l",t.proxy.SettingsProxy.COOKIE_KEY_SEND_BY_ENTER="send-by-enter",t.proxy.SettingsProxy.COOKIE_EXPIRES_SEND_BY_ENTER=31536e3,t.proxy.SettingsProxy.KEY_SELECTED_STAMP_TAB_ID="selected_stamp_tab_id",t.proxy.SettingsProxy.KEY_INPUT_TEXT="input_text",t.proxy.SettingsProxy.KEY_COPY_PROFILE_TO_ALL_DOMAINS="copy_profile_to_all_domains",t.proxy.SettingsProxy.KEY_SELECTED_DEPARTMENT_IDS="selected_department_ids",t.proxy.SettingsProxy.KEY_SEARCH_HISTORIES="search_histories",t.proxy.SettingsProxy.KEY_RIGHT_PANEL_OPENED="right_panel_opened",t.proxy.SettingsProxy.KEY_MULTI_VIEW_MODE="multi_view_mode",t.proxy.SettingsProxy.KEY_PASSWORD_WARNING_SKIP_UNTIL="password_warning_skip_until",t.proxy.SettingsProxy.KEY_LAST_USED_EXPIRED_AT="last_used_expired_at",t.proxy.SettingsProxy.KEY_IDFV="idfv",t.proxy.SolutionsStoreProxy.NAME="solutionsStore",s.patterns.mediator.Mediator.NAME="Mediator",w.mediator.CommandLineMediator.__meta__={fields:{dataStore:{inject:null},api:{inject:null}}},w.mediator.CommandLineMediator.NAME="commandline",w.mediator.CommandLineMediator.DATA_SAVE_SPAN=5e3,x.Serializer.USE_CACHE=!1,x.Serializer.USE_ENUM_INDEX=!1,x.Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",x.Unserializer.DEFAULT_RESOLVER=r,x.Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",x.ds.ObjectMap.count=0,x.io.Output.LN2=Math.log(2),y.Encoder.FLOAT_SINGLE_MIN=1.401298464324817e-45,y.Encoder.FLOAT_SINGLE_MAX=3.4028234663852886e38,y.Encoder.FLOAT_DOUBLE_MIN=5e-324,y.Encoder.FLOAT_DOUBLE_MAX=1.7976931348623157e308,g.main()}("undefined"!=typeof window?window:exports);